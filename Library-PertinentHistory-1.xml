<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1" localId="0">
   <annotation translatorVersion="3.11.0" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="1528">
         <a:s>/*  
  Author: CMS Alliance to Modernize Healthcare, operated by THE MITRE Corporation.

  (C) 2024 The MITRE Corporation. All Rights Reserved. 
  Approved for Public Release: 24-2711. 
  Distribution Unlimited.

  Unless otherwise noted, this work is available under an Apache 2.0 license. 
  It was produced by the MITRE Corporation for the Division of Cancer Prevention 
  and Control, Centers for Disease Control and Prevention in accordance with the 
  Statement of Work, contract number 75FCMC18D0047, task order number 75D30123F17931.
*/

library PertinentHistory version '1.0.0'</a:s>
      </a:s>
   </annotation>
   <identifier id="PertinentHistory" system="http://cancerscreeningcds.github.io/bcsm-cds" version="1.0.0"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localId="1" localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="206" locator="16:1-16:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="206">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="207" locator="18:1-18:63" localIdentifier="C3F" path="http://cancerscreeningcds.github.io/bcsm-cds/CDSConnectCommonsforFHIRv401" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="207">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CDSConnectCommonsforFHIRv401</a:s>
               </a:s>
               <a:s> version '1.0.0' called C3F</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="208" locator="19:1-19:56" localIdentifier="Common" path="http://cancerscreeningcds.github.io/bcsm-cds/CSMCommonFunctions" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CSMCommonFunctions</a:s>
               </a:s>
               <a:s> version '1.0.0' called Common</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="209" locator="20:1-20:61" localIdentifier="BCSMCommon" path="http://cancerscreeningcds.github.io/bcsm-cds/BCSMCommonFunctions" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>include </a:s>
               <a:s>
                  <a:s>BCSMCommonFunctions</a:s>
               </a:s>
               <a:s> version '1.0.0' called BCSMCommon</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="210" locator="21:1-21:54" localIdentifier="FHIRHelpers" path="http://cancerscreeningcds.github.io/bcsm-cds/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="210">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1' called FHIRHelpers</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="211" locator="22:1-22:56" localIdentifier="DataElements" path="http://cancerscreeningcds.github.io/bcsm-cds/DataElements" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="211">
               <a:s>include </a:s>
               <a:s>
                  <a:s>DataElements</a:s>
               </a:s>
               <a:s> version '1.0.0' called DataElements</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="212" locator="23:1-23:36" localIdentifier="ScreeningDue" path="http://cancerscreeningcds.github.io/bcsm-cds/ScreeningDue" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="212">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ScreeningDue</a:s>
               </a:s>
               <a:s> version '1.0.0'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="213" locator="24:1-24:47" localIdentifier="ScreeningTestIncomplete" path="http://cancerscreeningcds.github.io/bcsm-cds/ScreeningTestIncomplete" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="213">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ScreeningTestIncomplete</a:s>
               </a:s>
               <a:s> version '1.0.0'</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <codeSystems>
      <def localId="214" locator="26:1-26:48" name="SNOMED-CT" id="http://snomed.info/sct" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="214">
               <a:s>codesystem &quot;SNOMED-CT&quot;: 'http://snomed.info/sct'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <codes>
      <def localId="215" locator="28:1-28:139" name="Category0" id="397138000" display="Mammography assessment (Category 0) - Need additional imaging evaluation (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="215">
               <a:s>code &quot;Category0&quot;: '397138000' from </a:s>
               <a:s r="216">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 0) - Need additional imaging evaluation (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="216" locator="28:36-28:46" name="SNOMED-CT"/>
      </def>
      <def localId="217" locator="29:1-29:113" name="Category1" id="397140005" display="Mammography assessment (Category 1) - Negative (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="217">
               <a:s>code &quot;Category1&quot;: '397140005' from </a:s>
               <a:s r="218">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 1) - Negative (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="218" locator="29:36-29:46" name="SNOMED-CT"/>
      </def>
      <def localId="219" locator="30:1-30:119" name="Category2" id="397141009" display="Mammography assessment (Category 2) - Benign finding (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="219">
               <a:s>code &quot;Category2&quot;: '397141009' from </a:s>
               <a:s r="220">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 2) - Benign finding (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="220" locator="30:36-30:46" name="SNOMED-CT"/>
      </def>
      <def localId="221" locator="31:1-31:154" name="Category3" id="397143007" display="Mammography assessment (Category 3) - Probably benign finding, short interval follow-up (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="221">
               <a:s>code &quot;Category3&quot;: '397143007' from </a:s>
               <a:s r="222">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 3) - Probably benign finding, short interval follow-up (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="222" locator="31:36-31:46" name="SNOMED-CT"/>
      </def>
      <def localId="223" locator="32:1-32:156" name="Category4" id="397144001" display="Mammography assessment (Category 4) - Suspicious abnormality, biopsy should be considered (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="223">
               <a:s>code &quot;Category4&quot;: '397144001' from </a:s>
               <a:s r="224">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 4) - Suspicious abnormality, biopsy should be considered (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="224" locator="32:36-32:46" name="SNOMED-CT"/>
      </def>
      <def localId="225" locator="33:1-33:191" name="Category4A" id="6121000179106" display="Mammography assessment (Category 4A) - Suspicious abnormality, biopsy should be considered, low suspicion of malignancy (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="225">
               <a:s>code &quot;Category4A&quot;: '6121000179106' from </a:s>
               <a:s r="226">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 4A) - Suspicious abnormality, biopsy should be considered, low suspicion of malignancy (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="226" locator="33:41-33:51" name="SNOMED-CT"/>
      </def>
      <def localId="227" locator="34:1-34:196" name="Category4B" id="6131000179108" display="Mammography assessment (Category 4B) - Suspicious abnormality, biopsy should be considered, moderate suspicion of malignancy (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="227">
               <a:s>code &quot;Category4B&quot;: '6131000179108' from </a:s>
               <a:s r="228">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 4B) - Suspicious abnormality, biopsy should be considered, moderate suspicion of malignancy (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="228" locator="34:41-34:51" name="SNOMED-CT"/>
      </def>
      <def localId="229" locator="35:1-35:192" name="Category4C" id="6141000179100" display="Mammography assessment (Category 4C) - Suspicious abnormality, biopsy should be considered, high suspicion of malignancy (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="229">
               <a:s>code &quot;Category4C&quot;: '6141000179100' from </a:s>
               <a:s r="230">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 4C) - Suspicious abnormality, biopsy should be considered, high suspicion of malignancy (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="230" locator="35:41-35:51" name="SNOMED-CT"/>
      </def>
      <def localId="231" locator="36:1-36:136" name="Category5" id="397145000" display="Mammography assessment (Category 5) - Highly suggestive of malignancy (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="231">
               <a:s>code &quot;Category5&quot;: '397145000' from </a:s>
               <a:s r="232">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 5) - Highly suggestive of malignancy (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="232" locator="36:36-36:46" name="SNOMED-CT"/>
      </def>
      <def localId="233" locator="37:1-37:140" name="Category6" id="6111000179101" display="Mammography assessment (Category 6) - known biopsy, proven malignancy (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="233">
               <a:s>code &quot;Category6&quot;: '6111000179101' from </a:s>
               <a:s r="234">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Mammography assessment (Category 6) - known biopsy, proven malignancy (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="234" locator="37:40-37:50" name="SNOMED-CT"/>
      </def>
   </codes>
   <contexts>
      <def localId="238" locator="39:1-39:15" name="Patient"/>
   </contexts>
   <statements>
      <def localId="236" locator="39:1-39:15" name="Patient" context="Patient">
         <expression localId="237" xsi:type="SingletonFrom">
            <operand localId="235" locator="39:1-39:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="247" locator="78:1-81:12" name="UsualPatientName" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="247">
               <a:s>define UsualPatientName:
  </a:s>
               <a:s r="261">
                  <a:s>
                     <a:s r="248">
                        <a:s r="250">
                           <a:s>
                              <a:s>Patient.name</a:s>
                           </a:s>
                        </a:s>
                        <a:s> N</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="251">
                     <a:s>where </a:s>
                     <a:s r="251">
                        <a:s r="253">
                           <a:s r="252">
                              <a:s>N</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="253">
                              <a:s>use</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="254">
                           <a:s>'usual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="259">
                     <a:s>return </a:s>
                     <a:s r="260">
                        <a:s>N</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="261" locator="79:3-81:12" xsi:type="Query">
            <source localId="248" locator="79:3-79:16" alias="N">
               <expression localId="250" locator="79:3-79:14" path="name" xsi:type="Property">
                  <source localId="249" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="251" locator="80:5-80:25" xsi:type="Equal">
               <signature localId="257" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="258" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="255" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="256" name="fhir:NameUse" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="253" locator="80:11-80:15" path="use" scope="N" xsi:type="Property"/>
               </operand>
               <operand localId="254" locator="80:19-80:25" valueType="t:String" value="usual" xsi:type="Literal"/>
            </where>
            <return localId="259" locator="81:5-81:12">
               <expression localId="260" locator="81:12" name="N" xsi:type="AliasRef"/>
            </return>
         </expression>
      </def>
      <def localId="270" locator="88:1-89:39" name="FormatPatientName" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="270">
               <a:s>define function FormatPatientName(name FHIR.HumanName):
  </a:s>
               <a:s r="1753">
                  <a:s r="1753">
                     <a:s r="1746">
                        <a:s r="1738">
                           <a:s>First(</a:s>
                           <a:s r="1733">
                              <a:s r="1732">
                                 <a:s>name</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1733">
                                 <a:s>given</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="1741">
                           <a:s>' '</a:s>
                        </a:s>
                     </a:s>
                     <a:s> + </a:s>
                     <a:s r="1748">
                        <a:s r="1747">
                           <a:s>name</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1748">
                           <a:s>family</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1753" locator="89:3-89:39" xsi:type="Concatenate">
            <operand localId="1746" locator="89:3-89:25" xsi:type="Concatenate">
               <operand localId="1742" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="1743" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1738" locator="89:3-89:19" xsi:type="First">
                     <signature localId="1739" xsi:type="ListTypeSpecifier">
                        <elementType localId="1740" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <source localId="1733" locator="89:9-89:18" path="given" xsi:type="Property">
                        <source localId="1732" locator="89:9-89:12" name="name" xsi:type="OperandRef"/>
                     </source>
                  </operand>
               </operand>
               <operand localId="1741" locator="89:23-89:25" valueType="t:String" value=" " xsi:type="Literal"/>
            </operand>
            <operand localId="1749" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <signature localId="1750" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
               <operand localId="1748" locator="89:29-89:39" path="family" xsi:type="Property">
                  <source localId="1747" locator="89:29-89:32" name="name" xsi:type="OperandRef"/>
               </operand>
            </operand>
         </expression>
         <operand localId="272" name="name">
            <operandTypeSpecifier localId="271" locator="88:40-88:53" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="300" locator="83:1-86:12" name="OfficialPatientName" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="300">
               <a:s>define OfficialPatientName:
  </a:s>
               <a:s r="314">
                  <a:s>
                     <a:s r="301">
                        <a:s r="303">
                           <a:s>
                              <a:s>Patient.name</a:s>
                           </a:s>
                        </a:s>
                        <a:s> N</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="304">
                     <a:s>where </a:s>
                     <a:s r="304">
                        <a:s r="306">
                           <a:s r="305">
                              <a:s>N</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="306">
                              <a:s>use</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="307">
                           <a:s>'official'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="312">
                     <a:s>return </a:s>
                     <a:s r="313">
                        <a:s>N</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="314" locator="84:3-86:12" xsi:type="Query">
            <source localId="301" locator="84:3-84:16" alias="N">
               <expression localId="303" locator="84:3-84:14" path="name" xsi:type="Property">
                  <source localId="302" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="304" locator="85:5-85:28" xsi:type="Equal">
               <signature localId="310" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="311" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="308" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="309" name="fhir:NameUse" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="306" locator="85:11-85:15" path="use" scope="N" xsi:type="Property"/>
               </operand>
               <operand localId="307" locator="85:19-85:28" valueType="t:String" value="official" xsi:type="Literal"/>
            </where>
            <return localId="312" locator="86:5-86:12">
               <expression localId="313" locator="86:12" name="N" xsi:type="AliasRef"/>
            </return>
         </expression>
      </def>
      <def localId="244" locator="70:1-76:42" name="PatientName" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="244">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT DEMOGRAPHICS
//------------------------------------------------------------------------------

define PatientName:
  </a:s>
               <a:s r="245">
                  <a:s>if </a:s>
                  <a:s r="265">
                     <a:s>Exists(</a:s>
                     <a:s r="262">
                        <a:s>UsualPatientName</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> then
    </a:s>
                  <a:s r="273">
                     <a:s>FormatPatientName(</a:s>
                     <a:s r="269">
                        <a:s>First(</a:s>
                        <a:s r="266">
                           <a:s>UsualPatientName</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="298">
                     <a:s>if </a:s>
                     <a:s r="318">
                        <a:s>Exists(</a:s>
                        <a:s r="315">
                           <a:s>OfficialPatientName</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="327">
                        <a:s>FormatPatientName(</a:s>
                        <a:s r="324">
                           <a:s>First(</a:s>
                           <a:s r="319">
                              <a:s>OfficialPatientName</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  else
    </a:s>
                     <a:s r="337">
                        <a:s>FormatPatientName(</a:s>
                        <a:s r="334">
                           <a:s>First(</a:s>
                           <a:s r="329">
                              <a:s r="328">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="329">
                                 <a:s>name</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="245" locator="71:3-76:42" xsi:type="If">
            <condition localId="265" locator="71:6-71:29" xsi:type="Exists">
               <operand localId="262" locator="71:13-71:28" name="UsualPatientName" xsi:type="ExpressionRef"/>
            </condition>
            <then localId="273" locator="72:5-72:46" name="FormatPatientName" xsi:type="FunctionRef">
               <operand localId="269" locator="72:23-72:45" xsi:type="First">
                  <source localId="266" locator="72:29-72:44" name="UsualPatientName" xsi:type="ExpressionRef"/>
               </operand>
            </then>
            <else localId="298" locator="73:8-76:42" xsi:type="If">
               <condition localId="318" locator="73:11-73:37" xsi:type="Exists">
                  <operand localId="315" locator="73:18-73:36" name="OfficialPatientName" xsi:type="ExpressionRef"/>
               </condition>
               <then localId="327" locator="74:5-74:49" name="FormatPatientName" xsi:type="FunctionRef">
                  <operand localId="324" locator="74:23-74:48" xsi:type="First">
                     <signature localId="325" xsi:type="ListTypeSpecifier">
                        <elementType localId="326" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <source localId="319" locator="74:29-74:47" name="OfficialPatientName" xsi:type="ExpressionRef"/>
                  </operand>
               </then>
               <else localId="337" locator="76:5-76:42" name="FormatPatientName" xsi:type="FunctionRef">
                  <operand localId="334" locator="76:23-76:41" xsi:type="First">
                     <signature localId="335" xsi:type="ListTypeSpecifier">
                        <elementType localId="336" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <source localId="329" locator="76:29-76:40" path="name" xsi:type="Property">
                        <source localId="328" locator="76:29-76:35" name="Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
               </else>
            </else>
         </expression>
      </def>
      <def localId="346" locator="91:1-94:16" name="BirthSexText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="346">
               <a:s>define BirthSexText:
  </a:s>
               <a:s r="347">
                  <a:s>if </a:s>
                  <a:s r="348">
                     <a:s r="350">
                        <a:s r="349">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="350">
                           <a:s>BirthSexCode</a:s>
                        </a:s>
                     </a:s>
                     <a:s> = </a:s>
                     <a:s r="351">
                        <a:s>'F'</a:s>
                     </a:s>
                  </a:s>
                  <a:s> then </a:s>
                  <a:s r="354">
                     <a:s>'Female'</a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="355">
                     <a:s>if </a:s>
                     <a:s r="356">
                        <a:s r="358">
                           <a:s r="357">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="358">
                              <a:s>BirthSexCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="359">
                           <a:s>'M'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="362">
                        <a:s>'Male'</a:s>
                     </a:s>
                     <a:s>
  else </a:s>
                     <a:s r="363">
                        <a:s>'Unknown'</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="347" locator="92:3-94:16" xsi:type="If">
            <condition localId="348" locator="92:6-92:36" xsi:type="Equal">
               <signature localId="352" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="353" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="350" locator="92:6-92:30" name="BirthSexCode" libraryName="DataElements" xsi:type="ExpressionRef"/>
               <operand localId="351" locator="92:34-92:36" valueType="t:String" value="F" xsi:type="Literal"/>
            </condition>
            <then localId="354" locator="92:43-92:50" valueType="t:String" value="Female" xsi:type="Literal"/>
            <else localId="355" locator="93:8-94:16" xsi:type="If">
               <condition localId="356" locator="93:11-93:41" xsi:type="Equal">
                  <signature localId="360" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="361" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="358" locator="93:11-93:35" name="BirthSexCode" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  <operand localId="359" locator="93:39-93:41" valueType="t:String" value="M" xsi:type="Literal"/>
               </condition>
               <then localId="362" locator="93:48-93:53" valueType="t:String" value="Male" xsi:type="Literal"/>
               <else localId="363" locator="94:8-94:16" valueType="t:String" value="Unknown" xsi:type="Literal"/>
            </else>
         </expression>
      </def>
      <def localId="372" locator="96:1-99:27" name="GenderText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="372">
               <a:s>define GenderText:
  </a:s>
               <a:s r="373">
                  <a:s>if </a:s>
                  <a:s r="380">
                     <a:s>Exists(</a:s>
                     <a:s r="375">
                        <a:s r="374">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="375">
                           <a:s>GenderIdentityExtension</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> 
  then </a:s>
                  <a:s r="398">
                     <a:s r="397">
                        <a:s r="383">
                           <a:s r="392">
                              <a:s r="391">
                                 <a:s r="384">
                                    <a:s r="386">
                                       <a:s r="385">
                                          <a:s>DataElements</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="386">
                                          <a:s>GenderIdentityExtension</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="387">[0]</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="391">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="392">
                                 <a:s>coding</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="393">[0]</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="397">
                           <a:s>code</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="398">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="401">
                     <a:s r="400">
                        <a:s r="399">
                           <a:s>Patient</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="400">
                           <a:s>gender</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="401">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="373" locator="97:3-99:27" xsi:type="If">
            <condition localId="380" locator="97:6-97:49" xsi:type="Exists">
               <signature localId="381" xsi:type="ListTypeSpecifier">
                  <elementType localId="382" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="375" locator="97:13-97:48" name="GenderIdentityExtension" libraryName="DataElements" xsi:type="ExpressionRef"/>
            </condition>
            <then localId="398" locator="98:8-98:73" path="value" xsi:type="Property">
               <source localId="397" locator="98:8-98:67" path="code" xsi:type="Property">
                  <source localId="383" locator="98:8-98:62" xsi:type="Indexer">
                     <signature localId="394" xsi:type="ListTypeSpecifier">
                        <elementType localId="395" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <signature localId="396" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="392" locator="98:8-98:59" path="coding" xsi:type="Property">
                        <source localId="391" locator="98:8-98:52" path="value" xsi:type="Property">
                           <source localId="384" locator="98:8-98:46" xsi:type="Indexer">
                              <signature localId="388" xsi:type="ListTypeSpecifier">
                                 <elementType localId="389" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <signature localId="390" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="386" locator="98:8-98:43" name="GenderIdentityExtension" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="387" locator="98:45" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </source>
                     </operand>
                     <operand localId="393" locator="98:61" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </source>
               </source>
            </then>
            <else localId="401" locator="99:8-99:27" path="value" xsi:type="Property">
               <source localId="400" locator="99:8-99:21" path="gender" xsi:type="Property">
                  <source localId="399" locator="99:8-99:14" name="Patient" xsi:type="ExpressionRef"/>
               </source>
            </else>
         </expression>
      </def>
      <def localId="412" locator="115:1-116:53" name="CommunicationLanguageCode" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="412">
               <a:s>define CommunicationLanguageCode:
  </a:s>
               <a:s r="413">
                  <a:s r="451">
                     <a:s r="442">
                        <a:s r="434">
                           <a:s r="423">
                              <a:s r="415">
                                 <a:s r="414">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="415">
                                    <a:s>communication</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="423">
                                 <a:s>language</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="434">
                              <a:s>coding</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="442">
                           <a:s>code</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="451">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="453">[0]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="413" locator="116:3-116:53" xsi:type="Indexer">
            <signature localId="454" xsi:type="ListTypeSpecifier">
               <elementType localId="455" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="456" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="451" locator="116:3-116:50" xsi:type="Query">
               <source localId="450" alias="$this">
                  <expression localId="442" locator="116:3-116:44" xsi:type="Query">
                     <source localId="441" alias="$this">
                        <expression localId="434" locator="116:3-116:39" xsi:type="Flatten">
                           <operand localId="432" xsi:type="Query">
                              <source localId="431" alias="$this">
                                 <expression localId="423" locator="116:3-116:32" xsi:type="Query">
                                    <source localId="422" alias="$this">
                                       <expression localId="415" locator="116:3-116:23" path="communication" xsi:type="Property">
                                          <source localId="414" locator="116:3-116:9" name="Patient" xsi:type="ExpressionRef"/>
                                       </expression>
                                    </source>
                                    <where localId="419" xsi:type="Not">
                                       <operand localId="418" xsi:type="IsNull">
                                          <operand localId="417" path="language" xsi:type="Property">
                                             <source localId="416" name="$this" xsi:type="AliasRef"/>
                                          </operand>
                                       </operand>
                                    </where>
                                    <return localId="424" distinct="false">
                                       <expression localId="421" path="language" xsi:type="Property">
                                          <source localId="420" name="$this" xsi:type="AliasRef"/>
                                       </expression>
                                    </return>
                                 </expression>
                              </source>
                              <where localId="428" xsi:type="Not">
                                 <operand localId="427" xsi:type="IsNull">
                                    <operand localId="426" path="coding" xsi:type="Property">
                                       <source localId="425" name="$this" xsi:type="AliasRef"/>
                                    </operand>
                                 </operand>
                              </where>
                              <return localId="433" distinct="false">
                                 <expression localId="430" path="coding" xsi:type="Property">
                                    <source localId="429" name="$this" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </operand>
                        </expression>
                     </source>
                     <where localId="438" xsi:type="Not">
                        <operand localId="437" xsi:type="IsNull">
                           <operand localId="436" path="code" xsi:type="Property">
                              <source localId="435" name="$this" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </where>
                     <return localId="443" distinct="false">
                        <expression localId="440" path="code" xsi:type="Property">
                           <source localId="439" name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where localId="447" xsi:type="Not">
                  <operand localId="446" xsi:type="IsNull">
                     <operand localId="445" path="value" xsi:type="Property">
                        <source localId="444" name="$this" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
               </where>
               <return localId="452" distinct="false">
                  <expression localId="449" path="value" xsi:type="Property">
                     <source localId="448" name="$this" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </operand>
            <operand localId="453" locator="116:52" valueType="t:Integer" value="0" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="459" locator="118:1-119:46" name="CommunicationLanguageText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="459">
               <a:s>define CommunicationLanguageText:
  </a:s>
               <a:s r="460">
                  <a:s r="488">
                     <a:s r="479">
                        <a:s r="470">
                           <a:s r="462">
                              <a:s r="461">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="462">
                                 <a:s>communication</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="470">
                              <a:s>language</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="479">
                           <a:s>text</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="488">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="490">[0]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="460" locator="119:3-119:46" xsi:type="Indexer">
            <signature localId="491" xsi:type="ListTypeSpecifier">
               <elementType localId="492" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="493" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="488" locator="119:3-119:43" xsi:type="Query">
               <source localId="487" alias="$this">
                  <expression localId="479" locator="119:3-119:37" xsi:type="Query">
                     <source localId="478" alias="$this">
                        <expression localId="470" locator="119:3-119:32" xsi:type="Query">
                           <source localId="469" alias="$this">
                              <expression localId="462" locator="119:3-119:23" path="communication" xsi:type="Property">
                                 <source localId="461" locator="119:3-119:9" name="Patient" xsi:type="ExpressionRef"/>
                              </expression>
                           </source>
                           <where localId="466" xsi:type="Not">
                              <operand localId="465" xsi:type="IsNull">
                                 <operand localId="464" path="language" xsi:type="Property">
                                    <source localId="463" name="$this" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                           <return localId="471" distinct="false">
                              <expression localId="468" path="language" xsi:type="Property">
                                 <source localId="467" name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="475" xsi:type="Not">
                        <operand localId="474" xsi:type="IsNull">
                           <operand localId="473" path="text" xsi:type="Property">
                              <source localId="472" name="$this" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </where>
                     <return localId="480" distinct="false">
                        <expression localId="477" path="text" xsi:type="Property">
                           <source localId="476" name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where localId="484" xsi:type="Not">
                  <operand localId="483" xsi:type="IsNull">
                     <operand localId="482" path="value" xsi:type="Property">
                        <source localId="481" name="$this" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
               </where>
               <return localId="489" distinct="false">
                  <expression localId="486" path="value" xsi:type="Property">
                     <source localId="485" name="$this" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </operand>
            <operand localId="490" locator="119:45" valueType="t:Integer" value="0" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="496" locator="121:1-122:24" name="LanguageCode" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="496">
               <a:s>define LanguageCode:
  </a:s>
               <a:s r="499">
                  <a:s r="498">
                     <a:s r="497">
                        <a:s>Patient</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="498">
                        <a:s>language</a:s>
                     </a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="499">
                     <a:s>value</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="499" locator="122:3-122:24" path="value" xsi:type="Property">
            <source localId="498" locator="122:3-122:18" path="language" xsi:type="Property">
               <source localId="497" locator="122:3-122:9" name="Patient" xsi:type="ExpressionRef"/>
            </source>
         </expression>
      </def>
      <def localId="409" locator="112:1-113:82" name="LanguageTextAbbreviated" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="409">
               <a:s>define LanguageTextAbbreviated:
  </a:s>
               <a:s r="503">
                  <a:s>Coalesce( </a:s>
                  <a:s r="410">
                     <a:s>{</a:s>
                     <a:s r="457">
                        <a:s>CommunicationLanguageCode</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="494">
                        <a:s>CommunicationLanguageText</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="500">
                        <a:s>LanguageCode</a:s>
                     </a:s>
                     <a:s>}</a:s>
                  </a:s>
                  <a:s> )</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="503" locator="113:3-113:82" xsi:type="Coalesce">
            <operand localId="410" locator="113:13-113:80" xsi:type="List">
               <element localId="457" locator="113:14-113:38" name="CommunicationLanguageCode" xsi:type="ExpressionRef"/>
               <element localId="494" locator="113:41-113:65" name="CommunicationLanguageText" xsi:type="ExpressionRef"/>
               <element localId="500" locator="113:68-113:79" name="LanguageCode" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="404" locator="101:1-110:5" name="LanguageText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="404">
               <a:s>define LanguageText:
  </a:s>
               <a:s r="405">
                  <a:s>case
    </a:s>
                  <a:s r="406">
                     <a:s>when </a:s>
                     <a:s r="407">
                        <a:s r="504">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="505">
                           <a:s>'en'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="508">
                        <a:s>'English'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="509">
                     <a:s>when </a:s>
                     <a:s r="510">
                        <a:s r="511">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="512">
                           <a:s>'es'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="515">
                        <a:s>'Spanish'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="516">
                     <a:s>when </a:s>
                     <a:s r="517">
                        <a:s r="518">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="519">
                           <a:s>'zh'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="522">
                        <a:s>'Chinese'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="523">
                     <a:s>when </a:s>
                     <a:s r="524">
                        <a:s r="525">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="526">
                           <a:s>'fr'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="529">
                        <a:s>'French'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="530">
                     <a:s>when </a:s>
                     <a:s r="531">
                        <a:s r="532">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="533">
                           <a:s>'tl'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="536">
                        <a:s>'Tagalog'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="537">
                     <a:s>when </a:s>
                     <a:s r="538">
                        <a:s r="539">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="540">
                           <a:s>'vi'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="543">
                        <a:s>'Vietnamese'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    else </a:s>
                  <a:s r="544">
                     <a:s>'Unknown'</a:s>
                  </a:s>
                  <a:s>
  end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="405" locator="102:3-110:5" xsi:type="Case">
            <caseItem localId="406" locator="103:5-103:54">
               <when localId="407" locator="103:10-103:39" xsi:type="Equal">
                  <signature localId="506" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="507" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="504" locator="103:10-103:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="505" locator="103:36-103:39" valueType="t:String" value="en" xsi:type="Literal"/>
               </when>
               <then localId="508" locator="103:46-103:54" valueType="t:String" value="English" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="509" locator="104:5-104:54">
               <when localId="510" locator="104:10-104:39" xsi:type="Equal">
                  <signature localId="513" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="514" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="511" locator="104:10-104:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="512" locator="104:36-104:39" valueType="t:String" value="es" xsi:type="Literal"/>
               </when>
               <then localId="515" locator="104:46-104:54" valueType="t:String" value="Spanish" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="516" locator="105:5-105:54">
               <when localId="517" locator="105:10-105:39" xsi:type="Equal">
                  <signature localId="520" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="521" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="518" locator="105:10-105:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="519" locator="105:36-105:39" valueType="t:String" value="zh" xsi:type="Literal"/>
               </when>
               <then localId="522" locator="105:46-105:54" valueType="t:String" value="Chinese" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="523" locator="106:5-106:53">
               <when localId="524" locator="106:10-106:39" xsi:type="Equal">
                  <signature localId="527" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="528" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="525" locator="106:10-106:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="526" locator="106:36-106:39" valueType="t:String" value="fr" xsi:type="Literal"/>
               </when>
               <then localId="529" locator="106:46-106:53" valueType="t:String" value="French" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="530" locator="107:5-107:54">
               <when localId="531" locator="107:10-107:39" xsi:type="Equal">
                  <signature localId="534" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="535" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="532" locator="107:10-107:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="533" locator="107:36-107:39" valueType="t:String" value="tl" xsi:type="Literal"/>
               </when>
               <then localId="536" locator="107:46-107:54" valueType="t:String" value="Tagalog" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="537" locator="108:5-108:57">
               <when localId="538" locator="108:10-108:39" xsi:type="Equal">
                  <signature localId="541" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="542" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="539" locator="108:10-108:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="540" locator="108:36-108:39" valueType="t:String" value="vi" xsi:type="Literal"/>
               </when>
               <then localId="543" locator="108:46-108:57" valueType="t:String" value="Vietnamese" xsi:type="Literal"/>
            </caseItem>
            <else localId="544" locator="109:10-109:18" valueType="t:String" value="Unknown" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="551" locator="127:1-130:99" name="RaceExtensionValues" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="551">
               <a:s>define RaceExtensionValues:
  </a:s>
               <a:s r="584">
                  <a:s>
                     <a:s r="552">
                        <a:s r="554">
                           <a:s>(</a:s>
                           <a:s r="554">
                              <a:s r="553">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="554">
                                 <a:s>extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="555">
                     <a:s>where </a:s>
                     <a:s r="555">
                        <a:s r="557">
                           <a:s r="556">
                              <a:s>E</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="557">
                              <a:s>url</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="558">
                           <a:s>'http://hl7.org/fhir/us/core/StructureDefinition/us-core-race'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="563">
                     <a:s>return </a:s>
                     <a:s r="583">
                        <a:s>
                           <a:s r="564">
                              <a:s r="566">
                                 <a:s>(</a:s>
                                 <a:s r="566">
                                    <a:s r="565">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="566">
                                       <a:s>extension</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> X</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="567">
                           <a:s>where </a:s>
                           <a:s r="567">
                              <a:s r="569">
                                 <a:s r="568">
                                    <a:s>X</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="569">
                                    <a:s>url</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="570">
                                 <a:s>'text'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="575">
                           <a:s>return </a:s>
                           <a:s r="581">
                              <a:s r="576">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="581">
                                 <a:s>ToString(</a:s>
                                 <a:s r="577">
                                    <a:s r="579">
                                       <a:s r="578">
                                          <a:s>X</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="579">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="580">
                                       <a:s>FHIR.string</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="584" locator="128:3-130:99" xsi:type="Query">
            <source localId="552" locator="128:3-128:23" alias="E">
               <expression localId="554" locator="128:3-128:21" path="extension" xsi:type="Property">
                  <source localId="553" locator="128:4-128:10" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="555" locator="129:5-129:80" xsi:type="Equal">
               <signature localId="561" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="562" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="559" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="560" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="557" locator="129:11-129:15" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="558" locator="129:19-129:80" valueType="t:String" value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-race" xsi:type="Literal"/>
            </where>
            <return localId="563" locator="130:5-130:99">
               <expression localId="583" locator="130:12-130:99" xsi:type="Query">
                  <source localId="564" locator="130:12-130:26" alias="X">
                     <expression localId="566" locator="130:12-130:24" path="extension" scope="E" xsi:type="Property"/>
                  </source>
                  <where localId="567" locator="130:28-130:47" xsi:type="Equal">
                     <signature localId="573" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="574" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="571" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="572" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="569" locator="130:34-130:38" path="url" scope="X" xsi:type="Property"/>
                     </operand>
                     <operand localId="570" locator="130:42-130:47" valueType="t:String" value="text" xsi:type="Literal"/>
                  </where>
                  <return localId="575" locator="130:49-130:99">
                     <expression localId="581" locator="130:56-130:99" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="582" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="577" locator="130:77-130:98" strict="false" xsi:type="As">
                           <operand localId="579" locator="130:77-130:83" path="value" scope="X" xsi:type="Property"/>
                           <asTypeSpecifier localId="580" locator="130:88-130:98" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </expression>
                  </return>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="549" locator="124:1-125:41" name="RaceText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="549">
               <a:s>define RaceText:
  </a:s>
               <a:s r="599">
                  <a:s>Coalesce(</a:s>
                  <a:s r="591">
                     <a:s>Coalesce(</a:s>
                     <a:s r="585">
                        <a:s>RaceExtensionValues</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="599" locator="125:3-125:41" xsi:type="Coalesce">
            <signature localId="600" xsi:type="ListTypeSpecifier">
               <elementType localId="601" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="591" locator="125:12-125:40" xsi:type="Coalesce">
               <signature localId="592" xsi:type="ListTypeSpecifier">
                  <elementType localId="593" xsi:type="ListTypeSpecifier">
                     <elementType localId="594" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </signature>
               <operand localId="585" locator="125:21-125:39" name="RaceExtensionValues" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="610" locator="135:1-138:99" name="EthnicityExtensionValues" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="610">
               <a:s>define EthnicityExtensionValues:
  </a:s>
               <a:s r="643">
                  <a:s>
                     <a:s r="611">
                        <a:s r="613">
                           <a:s>(</a:s>
                           <a:s r="613">
                              <a:s r="612">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="613">
                                 <a:s>extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="614">
                     <a:s>where </a:s>
                     <a:s r="614">
                        <a:s r="616">
                           <a:s r="615">
                              <a:s>E</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="616">
                              <a:s>url</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="617">
                           <a:s>'http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="622">
                     <a:s>return </a:s>
                     <a:s r="642">
                        <a:s>
                           <a:s r="623">
                              <a:s r="625">
                                 <a:s>(</a:s>
                                 <a:s r="625">
                                    <a:s r="624">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="625">
                                       <a:s>extension</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> X</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="626">
                           <a:s>where </a:s>
                           <a:s r="626">
                              <a:s r="628">
                                 <a:s r="627">
                                    <a:s>X</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="628">
                                    <a:s>url</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="629">
                                 <a:s>'text'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="634">
                           <a:s>return </a:s>
                           <a:s r="640">
                              <a:s r="635">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="640">
                                 <a:s>ToString(</a:s>
                                 <a:s r="636">
                                    <a:s r="638">
                                       <a:s r="637">
                                          <a:s>X</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="638">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="639">
                                       <a:s>FHIR.string</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="643" locator="136:3-138:99" xsi:type="Query">
            <source localId="611" locator="136:3-136:23" alias="E">
               <expression localId="613" locator="136:3-136:21" path="extension" xsi:type="Property">
                  <source localId="612" locator="136:4-136:10" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="614" locator="137:5-137:85" xsi:type="Equal">
               <signature localId="620" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="621" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="618" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="619" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="616" locator="137:11-137:15" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="617" locator="137:19-137:85" valueType="t:String" value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity" xsi:type="Literal"/>
            </where>
            <return localId="622" locator="138:5-138:99">
               <expression localId="642" locator="138:12-138:99" xsi:type="Query">
                  <source localId="623" locator="138:12-138:26" alias="X">
                     <expression localId="625" locator="138:12-138:24" path="extension" scope="E" xsi:type="Property"/>
                  </source>
                  <where localId="626" locator="138:28-138:47" xsi:type="Equal">
                     <signature localId="632" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="633" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="630" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="631" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="628" locator="138:34-138:38" path="url" scope="X" xsi:type="Property"/>
                     </operand>
                     <operand localId="629" locator="138:42-138:47" valueType="t:String" value="text" xsi:type="Literal"/>
                  </where>
                  <return localId="634" locator="138:49-138:99">
                     <expression localId="640" locator="138:56-138:99" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="641" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="636" locator="138:77-138:98" strict="false" xsi:type="As">
                           <operand localId="638" locator="138:77-138:83" path="value" scope="X" xsi:type="Property"/>
                           <asTypeSpecifier localId="639" locator="138:88-138:98" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </expression>
                  </return>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="608" locator="132:1-133:46" name="EthnicityText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="608">
               <a:s>define EthnicityText:
  </a:s>
               <a:s r="658">
                  <a:s>Coalesce(</a:s>
                  <a:s r="650">
                     <a:s>Coalesce(</a:s>
                     <a:s r="644">
                        <a:s>EthnicityExtensionValues</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="658" locator="133:3-133:46" xsi:type="Coalesce">
            <signature localId="659" xsi:type="ListTypeSpecifier">
               <elementType localId="660" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="650" locator="133:12-133:45" xsi:type="Coalesce">
               <signature localId="651" xsi:type="ListTypeSpecifier">
                  <elementType localId="652" xsi:type="ListTypeSpecifier">
                     <elementType localId="653" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </signature>
               <operand localId="644" locator="133:21-133:44" name="EthnicityExtensionValues" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="670" locator="144:1-158:38" name="PertinentConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="670">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT CONDITIONS
//------------------------------------------------------------------------------

define PertinentConditions:
  </a:s>
               <a:s r="717">
                  <a:s r="713">
                     <a:s r="710">
                        <a:s r="706">
                           <a:s r="703">
                              <a:s r="699">
                                 <a:s r="696">
                                    <a:s r="692">
                                       <a:s r="689">
                                          <a:s r="685">
                                             <a:s r="682">
                                                <a:s r="678">
                                                   <a:s r="675">
                                                      <a:s r="672">
                                                         <a:s r="671">
                                                            <a:s>DataElements</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="672">
                                                            <a:s>BreastCancerDiagnoses</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> union
  </a:s>
                                                      <a:s r="674">
                                                         <a:s r="673">
                                                            <a:s>DataElements</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="674">
                                                            <a:s>BilateralMastectomyConditions</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> union
  </a:s>
                                                   <a:s r="677">
                                                      <a:s r="676">
                                                         <a:s>DataElements</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="677">
                                                         <a:s>LeftUnilateralMastectomyConditions</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> union
  </a:s>
                                                <a:s r="680">
                                                   <a:s r="679">
                                                      <a:s>DataElements</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="680">
                                                      <a:s>RightUnilateralMastectomyConditions</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> union
  </a:s>
                                             <a:s r="684">
                                                <a:s r="683">
                                                   <a:s>DataElements</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="684">
                                                   <a:s>UnilateralMastectomyConditions</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> union
  </a:s>
                                          <a:s r="687">
                                             <a:s r="686">
                                                <a:s>DataElements</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="687">
                                                <a:s>BreastSymptomConditions</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> union
  </a:s>
                                       <a:s r="691">
                                          <a:s r="690">
                                             <a:s>DataElements</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="691">
                                             <a:s>PregnancyDiagnoses</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> union
  </a:s>
                                    <a:s r="694">
                                       <a:s r="693">
                                          <a:s>DataElements</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="694">
                                          <a:s>&quot;BRCA-1MutationConditions&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> union
  </a:s>
                                 <a:s r="698">
                                    <a:s r="697">
                                       <a:s>DataElements</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="698">
                                       <a:s>&quot;BRCA-2MutationConditions&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> union
  </a:s>
                              <a:s r="701">
                                 <a:s r="700">
                                    <a:s>DataElements</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="701">
                                    <a:s>&quot;Li-FraumeniSyndromeConditions&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> union
  </a:s>
                           <a:s r="705">
                              <a:s r="704">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="705">
                                 <a:s>CowdenSyndromeConditions</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> union
  </a:s>
                        <a:s r="708">
                           <a:s r="707">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="708">
                              <a:s>&quot;Bannayan-Riley-RuvalcabaSyndromeConditions&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> union
	</a:s>
                     <a:s r="712">
                        <a:s r="711">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="712">
                           <a:s>&quot;de-chestxrt&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
	</a:s>
                  <a:s r="715">
                     <a:s r="714">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="715">
                        <a:s>AtypicalBiopsyConditions</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="717" locator="145:3-158:38" xsi:type="Union">
            <operand localId="710" locator="145:3-156:59" xsi:type="Union">
               <operand localId="703" locator="145:3-154:46" xsi:type="Union">
                  <operand localId="696" locator="145:3-152:41" xsi:type="Union">
                     <operand localId="689" locator="145:3-150:38" xsi:type="Union">
                        <operand localId="682" locator="145:3-148:50" xsi:type="Union">
                           <operand localId="675" locator="145:3-146:44" xsi:type="Union">
                              <operand localId="672" locator="145:3-145:36" name="BreastCancerDiagnoses" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="674" locator="146:3-146:44" name="BilateralMastectomyConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                           <operand localId="681" xsi:type="Union">
                              <operand localId="677" locator="147:3-147:49" name="LeftUnilateralMastectomyConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="680" locator="148:3-148:50" name="RightUnilateralMastectomyConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                        <operand localId="688" xsi:type="Union">
                           <operand localId="684" locator="149:3-149:45" name="UnilateralMastectomyConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           <operand localId="687" locator="150:3-150:38" name="BreastSymptomConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="695" xsi:type="Union">
                        <operand localId="691" locator="151:3-151:33" name="PregnancyDiagnoses" libraryName="DataElements" xsi:type="ExpressionRef"/>
                        <operand localId="694" locator="152:3-152:41" name="BRCA-1MutationConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="702" xsi:type="Union">
                     <operand localId="698" locator="153:3-153:41" name="BRCA-2MutationConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     <operand localId="701" locator="154:3-154:46" name="Li-FraumeniSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="709" xsi:type="Union">
                  <operand localId="705" locator="155:3-155:39" name="CowdenSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  <operand localId="708" locator="156:3-156:59" name="Bannayan-Riley-RuvalcabaSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="716" xsi:type="Union">
               <operand localId="712" locator="157:2-157:27" name="de-chestxrt" libraryName="DataElements" xsi:type="ExpressionRef"/>
               <operand localId="715" locator="158:2-158:38" name="AtypicalBiopsyConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="756" locator="358:1-362:42" name="HasBeenLocallyEdited" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="756">
               <a:s>//------------------------------------------------------------------------------
// FUNCTIONS
//------------------------------------------------------------------------------

define function HasBeenLocallyEdited(R FHIR.DomainResource):
  </a:s>
               <a:s r="1775">
                  <a:s r="1775">
                     <a:s>
                        <a:s r="1754">
                           <a:s r="1756">
                              <a:s>
                                 <a:s>R.extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ext</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1757">
                        <a:s>where
      </a:s>
                        <a:s r="1757">
                           <a:s r="1758">
                              <a:s r="1760">
                                 <a:s r="1759">
                                    <a:s>ext</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1760">
                                    <a:s>url</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1761">
                                 <a:s>'http://cancerscreeningcds.github.io/bcsm-cds/StructureDefinition/bcsm-edited'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="1766">
                              <a:s r="1767">
                                 <a:s r="1769">
                                    <a:s r="1768">
                                       <a:s>ext</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1769">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1770">
                                    <a:s>FHIR.boolean</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1771"> = true</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1775" locator="359:3-362:42" xsi:type="Query">
            <source localId="1754" locator="359:3-359:17" alias="ext">
               <expression localId="1756" locator="359:3-359:13" path="extension" xsi:type="Property">
                  <source localId="1755" name="R" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where localId="1757" locator="360:5-362:42" xsi:type="And">
               <operand localId="1758" locator="361:7-361:94" xsi:type="Equal">
                  <signature localId="1764" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1765" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1762" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="1763" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1760" locator="361:7-361:13" path="url" scope="ext" xsi:type="Property"/>
                  </operand>
                  <operand localId="1761" locator="361:17-361:94" valueType="t:String" value="http://cancerscreeningcds.github.io/bcsm-cds/StructureDefinition/bcsm-edited" xsi:type="Literal"/>
               </operand>
               <operand localId="1766" locator="362:11-362:42" xsi:type="Equal">
                  <signature localId="1773" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1774" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1772" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1767" locator="362:11-362:35" strict="false" xsi:type="As">
                        <operand localId="1769" locator="362:11-362:19" path="value" scope="ext" xsi:type="Property"/>
                        <asTypeSpecifier localId="1770" locator="362:24-362:35" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="1771" locator="362:39-362:42" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand localId="758" name="R">
            <operandTypeSpecifier localId="757" locator="358:40-358:58" name="fhir:DomainResource" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="667" locator="160:1-174:31" name="PertinentConditionsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="667">
               <a:s>define PertinentConditionsSummary:
  </a:s>
               <a:s r="792">
                  <a:s>
                     <a:s r="668">
                        <a:s r="718">
                           <a:s>(</a:s>
                           <a:s r="718">
                              <a:s>PertinentConditions</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="719">
                     <a:s>return </a:s>
                     <a:s r="720">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="724">
                              <a:s r="721">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="724">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="723">
                                    <a:s r="722">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="723">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="734">
                              <a:s r="733">
                                 <a:s r="725">
                                    <a:s r="728">
                                       <a:s r="727">
                                          <a:s r="726">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="727">
                                             <a:s>clinicalStatus</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="728">
                                          <a:s>coding</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="729">[0]</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="733">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="734">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="745">
                              <a:s r="735">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="745">
                                 <a:s>DateTimeText(
      </a:s>
                                 <a:s r="744">
                                    <a:s>Coalesce(
        </a:s>
                                    <a:s r="736">
                                       <a:s r="738">
                                          <a:s r="737">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="738">
                                             <a:s>onset</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="739">
                                          <a:s>FHIR.dateTime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>,
        </a:s>
                                    <a:s r="741">
                                       <a:s r="740">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="741">
                                          <a:s>recordedDate</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
      )</a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="754">
                              <a:s r="747">
                                 <a:s>'Condition/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="749">
                                 <a:s r="748">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="749">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="759">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="755">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="786">
                     <a:s>sort by </a:s>
                     <a:s r="785">
                        <a:s r="782">
                           <a:s>(</a:s>
                           <a:s r="782">
                              <a:s r="783">
                                 <a:s>date</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="784">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="792" locator="161:3-174:31" xsi:type="Query">
            <source localId="668" locator="161:3-161:25" alias="C">
               <expression localId="718" locator="161:3-161:23" name="PertinentConditions" xsi:type="ExpressionRef"/>
            </source>
            <return localId="719" locator="162:3-173:3">
               <expression localId="720" locator="162:10-173:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="724" locator="163:11-163:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="723" locator="163:30-163:35" path="code" scope="C" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="734" locator="164:12-164:48" path="value" xsi:type="Property">
                        <source localId="733" locator="164:12-164:42" path="code" xsi:type="Property">
                           <source localId="725" locator="164:12-164:37" xsi:type="Indexer">
                              <signature localId="730" xsi:type="ListTypeSpecifier">
                                 <elementType localId="731" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <signature localId="732" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="728" locator="164:12-164:34" path="coding" xsi:type="Property">
                                 <source localId="727" locator="164:12-164:27" path="clinicalStatus" scope="C" xsi:type="Property"/>
                              </operand>
                              <operand localId="729" locator="164:36" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </source>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="745" locator="165:11-170:5" name="DateTimeText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="744" locator="166:7-169:7" xsi:type="Coalesce">
                           <operand localId="736" locator="167:9-167:32" strict="false" xsi:type="As">
                              <operand localId="738" locator="167:9-167:15" path="onset" scope="C" xsi:type="Property"/>
                              <asTypeSpecifier localId="739" locator="167:20-167:32" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                           <operand localId="741" locator="168:9-168:22" path="recordedDate" scope="C" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="754" locator="171:16-171:34" xsi:type="Concatenate">
                        <operand localId="747" locator="171:16-171:27" valueType="t:String" value="Condition/" xsi:type="Literal"/>
                        <operand localId="750" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="751" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="749" locator="171:31-171:34" path="id" scope="C" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="759" locator="172:13-172:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="755" locator="172:34" name="C" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="786" locator="174:3-174:31">
               <by localId="785" locator="174:11-174:31" direction="desc" xsi:type="ByExpression">
                  <expression localId="782" locator="174:11-174:26" strict="false" xsi:type="As">
                     <operand localId="783" locator="174:12-174:15" name="date" xsi:type="IdentifierRef"/>
                     <asTypeSpecifier localId="784" locator="174:20-174:25" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="798" locator="180:1-182:60" name="PertinentFamilyMemberHistory" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="798">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT FAMILY MEMBER HISTORY
//------------------------------------------------------------------------------  

define PertinentFamilyMemberHistory:
  </a:s>
               <a:s r="803">
                  <a:s r="800">
                     <a:s r="799">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="800">
                        <a:s>FamilyMemberBreastOvarianTubalPeritonealCancerCondition</a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
  </a:s>
                  <a:s r="802">
                     <a:s r="801">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="802">
                        <a:s>FamilyMemberGeneticMarkerOrSyndromeConditions</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="803" locator="181:3-182:60" xsi:type="Union">
            <signature localId="804" xsi:type="ListTypeSpecifier">
               <elementType localId="805" xsi:type="TupleTypeSpecifier">
                  <element localId="806" name="familyMemberHistory">
                     <elementType localId="807" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="808" name="conditions">
                     <elementType localId="809" xsi:type="ListTypeSpecifier">
                        <elementType localId="810" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
               </elementType>
            </signature>
            <signature localId="811" xsi:type="ListTypeSpecifier">
               <elementType localId="812" xsi:type="TupleTypeSpecifier">
                  <element localId="813" name="familyMemberHistory">
                     <elementType localId="814" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="815" name="conditions">
                     <elementType localId="816" xsi:type="ListTypeSpecifier">
                        <elementType localId="817" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
               </elementType>
            </signature>
            <operand localId="800" locator="181:3-181:70" name="FamilyMemberBreastOvarianTubalPeritonealCancerCondition" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="802" locator="182:3-182:60" name="FamilyMemberGeneticMarkerOrSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="835" locator="364:1-370:4" name="Onset" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="835">
               <a:s>define function Onset(c FHIR.FamilyMemberHistory.Condition):
  </a:s>
               <a:s r="1804">
                  <a:s r="1804">
                     <a:s>Coalesce( </a:s>
                     <a:s r="1776">
                        <a:s>List{
    </a:s>
                        <a:s r="1782">
                           <a:s r="1777">
                              <a:s>Common</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1782">
                              <a:s>QuantityText(</a:s>
                              <a:s r="1778">
                                 <a:s r="1780">
                                    <a:s r="1779">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1780">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1781">
                                    <a:s>FHIR.Age</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1788">
                           <a:s r="1783">
                              <a:s>Common</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1788">
                              <a:s>PeriodObject(</a:s>
                              <a:s r="1784">
                                 <a:s r="1786">
                                    <a:s r="1785">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1786">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1787">
                                    <a:s>FHIR.Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1794">
                           <a:s r="1789">
                              <a:s>Common</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1794">
                              <a:s>RangeObject(</a:s>
                              <a:s r="1790">
                                 <a:s r="1792">
                                    <a:s r="1791">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1792">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1793">
                                    <a:s>FHIR.Range</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1799">
                           <a:s r="1795">
                              <a:s>(</a:s>
                              <a:s r="1795">
                                 <a:s r="1797">
                                    <a:s r="1796">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1797">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1798">
                                    <a:s>FHIR.string</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1799">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1804" locator="365:3-370:4" xsi:type="Coalesce">
            <signature localId="1805" xsi:type="ListTypeSpecifier">
               <elementType localId="1806" name="t:Any" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="1776" locator="365:13-370:3" xsi:type="List">
               <element localId="1782" locator="366:5-366:44" name="QuantityText" libraryName="Common" xsi:type="FunctionRef">
                  <operand localId="1778" locator="366:25-366:43" strict="false" xsi:type="As">
                     <operand localId="1780" locator="366:25-366:31" path="onset" xsi:type="Property">
                        <source localId="1779" locator="366:25" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1781" locator="366:36-366:43" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </element>
               <element localId="1788" locator="367:5-367:47" name="PeriodObject" libraryName="Common" xsi:type="FunctionRef">
                  <operand localId="1784" locator="367:25-367:46" strict="false" xsi:type="As">
                     <operand localId="1786" locator="367:25-367:31" path="onset" xsi:type="Property">
                        <source localId="1785" locator="367:25" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1787" locator="367:36-367:46" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </element>
               <element localId="1794" locator="368:5-368:45" name="RangeObject" libraryName="Common" xsi:type="FunctionRef">
                  <operand localId="1790" locator="368:24-368:44" strict="false" xsi:type="As">
                     <operand localId="1792" locator="368:24-368:30" path="onset" xsi:type="Property">
                        <source localId="1791" locator="368:24" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1793" locator="368:35-368:44" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </element>
               <element localId="1799" locator="369:5-369:34" path="value" xsi:type="Property">
                  <source localId="1795" locator="369:5-369:28" strict="false" xsi:type="As">
                     <operand localId="1797" locator="369:6-369:12" path="onset" xsi:type="Property">
                        <source localId="1796" locator="369:6" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1798" locator="369:17-369:27" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                  </source>
               </element>
            </operand>
         </expression>
         <operand localId="837" name="c">
            <operandTypeSpecifier localId="836" locator="364:25-364:58" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="795" locator="184:1-193:4" name="PertinentFamilyMemberHistorySummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="795">
               <a:s>define PertinentFamilyMemberHistorySummary:
  </a:s>
               <a:s r="887">
                  <a:s>Flatten(</a:s>
                  <a:s r="884">
                     <a:s>
                        <a:s r="796">
                           <a:s r="818">
                              <a:s>(</a:s>
                              <a:s r="818">
                                 <a:s>PertinentFamilyMemberHistory</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> FMH</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="819">
                        <a:s>return 
      </a:s>
                        <a:s r="883">
                           <a:s>
                              <a:s r="820">
                                 <a:s r="822">
                                    <a:s>
                                       <a:s>FMH.conditions</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="823">
                              <a:s>return </a:s>
                              <a:s r="824">
                                 <a:s>{
        </a:s>
                                 <a:s>
                                    <a:s>name: </a:s>
                                    <a:s r="829">
                                       <a:s r="825">
                                          <a:s>Common</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="829">
                                          <a:s>ConceptText(</a:s>
                                          <a:s r="828">
                                             <a:s r="827">
                                                <a:s r="826">
                                                   <a:s>FMH</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="827">
                                                   <a:s>familyMemberHistory</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="828">
                                                <a:s>relationship</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s>
                                    <a:s>value: </a:s>
                                    <a:s r="833">
                                       <a:s r="830">
                                          <a:s>Common</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="833">
                                          <a:s>ConceptText(</a:s>
                                          <a:s r="832">
                                             <a:s r="831">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="832">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s>
                                    <a:s>onset: </a:s>
                                    <a:s r="838">
                                       <a:s>Onset(</a:s>
                                       <a:s r="834">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s>
                                    <a:s>reference: </a:s>
                                    <a:s r="879">
                                       <a:s r="871">
                                          <a:s>'FamilyMemberHistory/'</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="874">
                                          <a:s r="873">
                                             <a:s r="872">
                                                <a:s>FMH</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="873">
                                                <a:s>familyMemberHistory</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="874">
                                             <a:s>id</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s>
                                    <a:s>edited: </a:s>
                                    <a:s r="882">
                                       <a:s>HasBeenLocallyEdited(</a:s>
                                       <a:s r="881">
                                          <a:s r="880">
                                             <a:s>FMH</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="881">
                                             <a:s>familyMemberHistory</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
  }</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="887" locator="185:3-193:4" xsi:type="Flatten">
            <operand localId="884" locator="185:11-193:3" xsi:type="Query">
               <source localId="796" locator="185:11-185:44" alias="FMH">
                  <expression localId="818" locator="185:11-185:40" name="PertinentFamilyMemberHistory" xsi:type="ExpressionRef"/>
               </source>
               <return localId="819" locator="186:5-193:3">
                  <expression localId="883" locator="187:7-193:3" xsi:type="Query">
                     <source localId="820" locator="187:7-187:22" alias="C">
                        <expression localId="822" locator="187:7-187:20" path="conditions" scope="FMH" xsi:type="Property"/>
                     </source>
                     <return localId="823" locator="187:24-193:3">
                        <expression localId="824" locator="187:31-193:3" xsi:type="Tuple">
                           <element name="name">
                              <value localId="829" locator="188:15-188:70" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                                 <operand localId="828" locator="188:34-188:69" path="relationship" xsi:type="Property">
                                    <source localId="827" locator="188:34-188:56" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
                                 </operand>
                              </value>
                           </element>
                           <element name="value">
                              <value localId="833" locator="189:16-189:41" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                                 <operand localId="832" locator="189:35-189:40" path="code" scope="C" xsi:type="Property"/>
                              </value>
                           </element>
                           <element name="onset">
                              <value localId="838" locator="190:16-190:23" name="Onset" xsi:type="FunctionRef">
                                 <operand localId="834" locator="190:22" name="C" xsi:type="AliasRef"/>
                              </value>
                           </element>
                           <element name="reference">
                              <value localId="879" locator="191:20-191:70" xsi:type="Concatenate">
                                 <operand localId="871" locator="191:20-191:41" valueType="t:String" value="FamilyMemberHistory/" xsi:type="Literal"/>
                                 <operand localId="875" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <signature localId="876" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="874" locator="191:45-191:70" path="id" xsi:type="Property">
                                       <source localId="873" locator="191:45-191:67" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                              </value>
                           </element>
                           <element name="edited">
                              <value localId="882" locator="192:17-192:61" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                                 <operand localId="881" locator="192:38-192:60" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
                              </value>
                           </element>
                        </expression>
                     </return>
                  </expression>
               </return>
            </operand>
         </expression>
      </def>
      <def localId="893" locator="199:1-216:15" name="PertinentObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="893">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT OBSERVATIONS
//------------------------------------------------------------------------------

define PertinentObservations:
  </a:s>
               <a:s r="1051">
                  <a:s r="1044">
                     <a:s>(</a:s>
                     <a:s r="1044">
                        <a:s r="1031">
                           <a:s r="1023">
                              <a:s r="1010">
                                 <a:s r="1002">
                                    <a:s r="989">
                                       <a:s r="981">
                                          <a:s r="968">
                                             <a:s r="960">
                                                <a:s r="947">
                                                   <a:s r="939">
                                                      <a:s r="926">
                                                         <a:s r="918">
                                                            <a:s r="906">
                                                               <a:s r="899">
                                                                  <a:s r="894">
                                                                     <a:s>{</a:s>
                                                                     <a:s r="896">
                                                                        <a:s r="895">
                                                                           <a:s>DataElements</a:s>
                                                                        </a:s>
                                                                        <a:s>.</a:s>
                                                                        <a:s r="896">
                                                                           <a:s>MostRecentLactatingObservation</a:s>
                                                                        </a:s>
                                                                     </a:s>
                                                                     <a:s>}</a:s>
                                                                  </a:s>
                                                                  <a:s> union
  </a:s>
                                                                  <a:s r="898">
                                                                     <a:s r="897">
                                                                        <a:s>DataElements</a:s>
                                                                     </a:s>
                                                                     <a:s>.</a:s>
                                                                     <a:s r="898">
                                                                        <a:s>PregnancyObservations</a:s>
                                                                     </a:s>
                                                                  </a:s>
                                                               </a:s>
                                                               <a:s> union
  </a:s>
                                                               <a:s r="905">
                                                                  <a:s r="904">
                                                                     <a:s>DataElements</a:s>
                                                                  </a:s>
                                                                  <a:s>.</a:s>
                                                                  <a:s r="905">
                                                                     <a:s>NewOrWorseningBreastSymptomsObservations</a:s>
                                                                  </a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> union
  </a:s>
                                                            <a:s r="912">
                                                               <a:s r="911">
                                                                  <a:s>DataElements</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="912">
                                                                  <a:s>NewOrWorseningBreastFindingsObservations</a:s>
                                                               </a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> union
  </a:s>
                                                         <a:s r="923">
                                                            <a:s>{</a:s>
                                                            <a:s r="925">
                                                               <a:s r="924">
                                                                  <a:s>DataElements</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="925">
                                                                  <a:s>MostRecentReducedLifeExpectancyObservation</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s>}</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> union
  </a:s>
                                                      <a:s r="931">
                                                         <a:s>{</a:s>
                                                         <a:s r="933">
                                                            <a:s r="932">
                                                               <a:s>DataElements</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="933">
                                                               <a:s>MostRecentGeneticMarkerOrSyndromeObservation</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>}</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> union
  </a:s>
                                                   <a:s r="944">
                                                      <a:s>{</a:s>
                                                      <a:s r="946">
                                                         <a:s r="945">
                                                            <a:s>DataElements</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="946">
                                                            <a:s>HistoryOfChestRadiationAges10To30Observation</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>}</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> union
  </a:s>
                                                <a:s r="952">
                                                   <a:s>{</a:s>
                                                   <a:s r="954">
                                                      <a:s r="953">
                                                         <a:s>DataElements</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="954">
                                                         <a:s>MostRecentLifetimeRiskAssessment</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>}</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> union
  </a:s>
                                             <a:s r="965">
                                                <a:s>{</a:s>
                                                <a:s r="967">
                                                   <a:s r="966">
                                                      <a:s>DataElements</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="967">
                                                      <a:s>MostRecentFamilialRiskAssessmentObservation</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>}</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> union
  </a:s>
                                          <a:s r="973">
                                             <a:s>{</a:s>
                                             <a:s r="975">
                                                <a:s r="974">
                                                   <a:s>DataElements</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="975">
                                                   <a:s>MostRecentFamilialRiskAssessmentResult</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>}</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> union
  </a:s>
                                       <a:s r="986">
                                          <a:s>{</a:s>
                                          <a:s r="988">
                                             <a:s r="987">
                                                <a:s>DataElements</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="988">
                                                <a:s>FamilyGeneticHistoryAssessmentObservation</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>}</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> union
  </a:s>
                                    <a:s r="994">
                                       <a:s>{</a:s>
                                       <a:s r="996">
                                          <a:s r="995">
                                             <a:s>DataElements</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="996">
                                             <a:s>KnownGeneticMarkerOrSyndromeStatusObservation</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>}</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> union
  </a:s>
                                 <a:s r="1007">
                                    <a:s>{</a:s>
                                    <a:s r="1009">
                                       <a:s r="1008">
                                          <a:s>DataElements</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1009">
                                          <a:s>MostRecentBRCAGeneAncestryObservation</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>}</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> union
  </a:s>
                              <a:s r="1015">
                                 <a:s>{</a:s>
                                 <a:s r="1017">
                                    <a:s r="1016">
                                       <a:s>DataElements</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1017">
                                       <a:s>MostRecent5YrRiskAssessment</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s> union
  </a:s>
                           <a:s r="1028">
                              <a:s>{</a:s>
                              <a:s r="1030">
                                 <a:s r="1029">
                                    <a:s>DataElements</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1030">
                                    <a:s>MostRecentPersonalRiskFactorAssessment</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>}</a:s>
                           </a:s>
                        </a:s>
                        <a:s> union
  </a:s>
                        <a:s r="1036">
                           <a:s>{</a:s>
                           <a:s r="1038">
                              <a:s r="1037">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1038">
                                 <a:s>MostRecentFirstDegRelativeGeneticObservation</a:s>
                              </a:s>
                           </a:s>
                           <a:s>}</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>
  except </a:s>
                  <a:s r="1049">
                     <a:s r="1050">{null}</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1051" locator="200:3-216:15" xsi:type="Except">
            <operand localId="1044" locator="200:3-215:62" xsi:type="Union">
               <signature localId="1045" xsi:type="ListTypeSpecifier">
                  <elementType localId="1046" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <signature localId="1047" xsi:type="ListTypeSpecifier">
                  <elementType localId="1048" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1023" locator="200:4-213:44" xsi:type="Union">
                  <signature localId="1024" xsi:type="ListTypeSpecifier">
                     <elementType localId="1025" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <signature localId="1026" xsi:type="ListTypeSpecifier">
                     <elementType localId="1027" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1002" locator="200:4-211:62" xsi:type="Union">
                     <signature localId="1003" xsi:type="ListTypeSpecifier">
                        <elementType localId="1004" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <signature localId="1005" xsi:type="ListTypeSpecifier">
                        <elementType localId="1006" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="981" locator="200:4-209:55" xsi:type="Union">
                        <signature localId="982" xsi:type="ListTypeSpecifier">
                           <elementType localId="983" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <signature localId="984" xsi:type="ListTypeSpecifier">
                           <elementType localId="985" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="960" locator="200:4-207:49" xsi:type="Union">
                           <signature localId="961" xsi:type="ListTypeSpecifier">
                              <elementType localId="962" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <signature localId="963" xsi:type="ListTypeSpecifier">
                              <elementType localId="964" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <operand localId="939" locator="200:4-205:61" xsi:type="Union">
                              <signature localId="940" xsi:type="ListTypeSpecifier">
                                 <elementType localId="941" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <signature localId="942" xsi:type="ListTypeSpecifier">
                                 <elementType localId="943" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <operand localId="918" locator="200:4-203:55" xsi:type="Union">
                                 <signature localId="919" xsi:type="ListTypeSpecifier">
                                    <elementType localId="920" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                 </signature>
                                 <signature localId="921" xsi:type="ListTypeSpecifier">
                                    <elementType localId="922" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                 </signature>
                                 <operand localId="899" locator="200:4-201:36" xsi:type="Union">
                                    <signature localId="900" xsi:type="ListTypeSpecifier">
                                       <elementType localId="901" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </signature>
                                    <signature localId="902" xsi:type="ListTypeSpecifier">
                                       <elementType localId="903" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </signature>
                                    <operand localId="894" locator="200:4-200:48" xsi:type="List">
                                       <element localId="896" locator="200:5-200:47" name="MostRecentLactatingObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                                    </operand>
                                    <operand localId="898" locator="201:3-201:36" name="PregnancyObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
                                 </operand>
                                 <operand localId="913" xsi:type="Union">
                                    <signature localId="914" xsi:type="ListTypeSpecifier">
                                       <elementType localId="915" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </signature>
                                    <signature localId="916" xsi:type="ListTypeSpecifier">
                                       <elementType localId="917" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                    </signature>
                                    <operand localId="905" locator="202:3-202:55" name="NewOrWorseningBreastSymptomsObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
                                    <operand localId="912" locator="203:3-203:55" name="NewOrWorseningBreastFindingsObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="934" xsi:type="Union">
                                 <signature localId="935" xsi:type="ListTypeSpecifier">
                                    <elementType localId="936" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                 </signature>
                                 <signature localId="937" xsi:type="ListTypeSpecifier">
                                    <elementType localId="938" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                                 </signature>
                                 <operand localId="923" locator="204:3-204:59" xsi:type="List">
                                    <element localId="925" locator="204:4-204:58" name="MostRecentReducedLifeExpectancyObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                                 </operand>
                                 <operand localId="931" locator="205:3-205:61" xsi:type="List">
                                    <element localId="933" locator="205:4-205:60" name="MostRecentGeneticMarkerOrSyndromeObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="955" xsi:type="Union">
                              <signature localId="956" xsi:type="ListTypeSpecifier">
                                 <elementType localId="957" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <signature localId="958" xsi:type="ListTypeSpecifier">
                                 <elementType localId="959" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <operand localId="944" locator="206:3-206:61" xsi:type="List">
                                 <element localId="946" locator="206:4-206:60" name="HistoryOfChestRadiationAges10To30Observation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              </operand>
                              <operand localId="952" locator="207:3-207:49" xsi:type="List">
                                 <element localId="954" locator="207:4-207:48" name="MostRecentLifetimeRiskAssessment" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="976" xsi:type="Union">
                           <signature localId="977" xsi:type="ListTypeSpecifier">
                              <elementType localId="978" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <signature localId="979" xsi:type="ListTypeSpecifier">
                              <elementType localId="980" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <operand localId="965" locator="208:3-208:60" xsi:type="List">
                              <element localId="967" locator="208:4-208:59" name="MostRecentFamilialRiskAssessmentObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                           <operand localId="973" locator="209:3-209:55" xsi:type="List">
                              <element localId="975" locator="209:4-209:54" name="MostRecentFamilialRiskAssessmentResult" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="997" xsi:type="Union">
                        <signature localId="998" xsi:type="ListTypeSpecifier">
                           <elementType localId="999" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <signature localId="1000" xsi:type="ListTypeSpecifier">
                           <elementType localId="1001" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="986" locator="210:3-210:58" xsi:type="List">
                           <element localId="988" locator="210:4-210:57" name="FamilyGeneticHistoryAssessmentObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="994" locator="211:3-211:62" xsi:type="List">
                           <element localId="996" locator="211:4-211:61" name="KnownGeneticMarkerOrSyndromeStatusObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1018" xsi:type="Union">
                     <signature localId="1019" xsi:type="ListTypeSpecifier">
                        <elementType localId="1020" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <signature localId="1021" xsi:type="ListTypeSpecifier">
                        <elementType localId="1022" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="1007" locator="212:3-212:54" xsi:type="List">
                        <element localId="1009" locator="212:4-212:53" name="MostRecentBRCAGeneAncestryObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="1015" locator="213:3-213:44" xsi:type="List">
                        <element localId="1017" locator="213:4-213:43" name="MostRecent5YrRiskAssessment" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="1039" xsi:type="Union">
                  <signature localId="1040" xsi:type="ListTypeSpecifier">
                     <elementType localId="1041" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <signature localId="1042" xsi:type="ListTypeSpecifier">
                     <elementType localId="1043" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1028" locator="214:3-214:55" xsi:type="List">
                     <element localId="1030" locator="214:4-214:54" name="MostRecentPersonalRiskFactorAssessment" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="1036" locator="215:3-215:61" xsi:type="List">
                     <element localId="1038" locator="215:4-215:60" name="MostRecentFirstDegRelativeGeneticObservation" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
            </operand>
            <operand localId="1052" xsi:type="Query">
               <source localId="1053" alias="X">
                  <expression localId="1049" locator="216:10-216:15" xsi:type="List">
                     <element localId="1050" locator="216:11-216:14" xsi:type="Null"/>
                  </expression>
               </source>
               <return localId="1054" distinct="false">
                  <expression localId="1056" asType="fhir:Observation" xsi:type="As">
                     <operand localId="1055" name="X" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </operand>
         </expression>
      </def>
      <def localId="890" locator="218:1-227:31" name="PertinentObservationsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="890">
               <a:s>define PertinentObservationsSummary:
  </a:s>
               <a:s r="1093">
                  <a:s>
                     <a:s r="891">
                        <a:s r="1057">
                           <a:s>(</a:s>
                           <a:s r="1057">
                              <a:s>PertinentObservations</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> Obs</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1058">
                     <a:s>return </a:s>
                     <a:s r="1059">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1063">
                              <a:s r="1060">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1063">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1062">
                                    <a:s r="1061">
                                       <a:s>Obs</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1062">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1067">
                              <a:s r="1064">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1067">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1066">
                                    <a:s r="1065">
                                       <a:s>Obs</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1066">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="1071">
                              <a:s r="1069">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1071">
                                 <a:s>ObservationDateString(</a:s>
                                 <a:s r="1070">
                                    <a:s>Obs</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1080">
                              <a:s r="1073">
                                 <a:s>'Observation/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1075">
                                 <a:s r="1074">
                                    <a:s>Obs</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1075">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="1082">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="1081">
                                 <a:s>Obs</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1087">
                     <a:s>sort by </a:s>
                     <a:s r="1086">
                        <a:s r="1083">
                           <a:s>(</a:s>
                           <a:s r="1083">
                              <a:s r="1084">
                                 <a:s>date</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1085">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1093" locator="219:3-227:31" xsi:type="Query">
            <source localId="891" locator="219:3-219:29" alias="Obs">
               <expression localId="1057" locator="219:3-219:25" name="PertinentObservations" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1058" locator="220:3-226:3">
               <expression localId="1059" locator="220:10-226:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1063" locator="221:11-221:38" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1062" locator="221:30-221:37" path="code" scope="Obs" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1067" locator="222:12-222:40" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1068" asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1066" locator="222:31-222:39" path="value" scope="Obs" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1071" locator="223:11-223:43" name="ObservationDateString" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1070" locator="223:40-223:42" name="Obs" xsi:type="AliasRef"/>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1080" locator="224:16-224:38" xsi:type="Concatenate">
                        <operand localId="1073" locator="224:16-224:29" valueType="t:String" value="Observation/" xsi:type="Literal"/>
                        <operand localId="1076" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1077" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1075" locator="224:33-224:38" path="id" scope="Obs" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1082" locator="225:13-225:37" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1081" locator="225:34-225:36" name="Obs" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="1087" locator="227:3-227:31">
               <by localId="1086" locator="227:11-227:31" direction="desc" xsi:type="ByExpression">
                  <expression localId="1083" locator="227:11-227:26" strict="false" xsi:type="As">
                     <operand localId="1084" locator="227:12-227:15" name="date" xsi:type="IdentifierRef"/>
                     <asTypeSpecifier localId="1085" locator="227:20-227:25" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="1099" locator="233:1-236:50" name="PertinentProcedures" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1099">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT PROCEDURES
//------------------------------------------------------------------------------

define PertinentProcedures:
  </a:s>
               <a:s r="1111">
                  <a:s r="1104">
                     <a:s r="1101">
                        <a:s r="1100">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1101">
                           <a:s>BilateralMastectomyProcedures</a:s>
                        </a:s>
                     </a:s>
                     <a:s> union
  </a:s>
                     <a:s r="1103">
                        <a:s r="1102">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1103">
                           <a:s>LeftUnilateralMastectomyProcedures</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
  </a:s>
                  <a:s r="1110">
                     <a:s r="1109">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1110">
                        <a:s>RightUnilateralMastectomyProcedures</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1111" locator="234:3-236:50" xsi:type="Union">
            <signature localId="1112" xsi:type="ListTypeSpecifier">
               <elementType localId="1113" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="1114" xsi:type="ListTypeSpecifier">
               <elementType localId="1115" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="1104" locator="234:3-235:49" xsi:type="Union">
               <signature localId="1105" xsi:type="ListTypeSpecifier">
                  <elementType localId="1106" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <signature localId="1107" xsi:type="ListTypeSpecifier">
                  <elementType localId="1108" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1101" locator="234:3-234:44" name="BilateralMastectomyProcedures" libraryName="DataElements" xsi:type="ExpressionRef"/>
               <operand localId="1103" locator="235:3-235:49" name="LeftUnilateralMastectomyProcedures" libraryName="DataElements" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="1110" locator="236:3-236:50" name="RightUnilateralMastectomyProcedures" libraryName="DataElements" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="1096" locator="238:1-246:21" name="PertinentProceduresSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1096">
               <a:s>define PertinentProceduresSummary:
  </a:s>
               <a:s r="1148">
                  <a:s>
                     <a:s r="1097">
                        <a:s r="1116">
                           <a:s>(</a:s>
                           <a:s r="1116">
                              <a:s>PertinentProcedures</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1117">
                     <a:s>return </a:s>
                     <a:s r="1118">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1122">
                              <a:s r="1119">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1122">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1121">
                                    <a:s r="1120">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1121">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1125">
                              <a:s r="1124">
                                 <a:s r="1123">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1124">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1125">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="1128">
                              <a:s r="1126">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1128">
                                 <a:s>ProcedureDateString(</a:s>
                                 <a:s r="1127">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1137">
                              <a:s r="1130">
                                 <a:s>'Procedure/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1132">
                                 <a:s r="1131">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1132">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="1139">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="1138">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="1142">
                     <a:s>sort by </a:s>
                     <a:s r="1141">
                        <a:s r="1140">
                           <a:s>date</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1148" locator="239:3-246:21" xsi:type="Query">
            <source localId="1097" locator="239:3-239:25" alias="P">
               <expression localId="1116" locator="239:3-239:23" name="PertinentProcedures" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1117" locator="240:3-246:3">
               <expression localId="1118" locator="240:10-246:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1122" locator="241:11-241:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1121" locator="241:30-241:35" path="code" scope="P" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1125" locator="242:12-242:25" path="value" xsi:type="Property">
                        <source localId="1124" locator="242:12-242:19" path="status" scope="P" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1128" locator="243:11-243:39" name="ProcedureDateString" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1127" locator="243:38" name="P" xsi:type="AliasRef"/>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1137" locator="244:16-244:34" xsi:type="Concatenate">
                        <operand localId="1130" locator="244:16-244:27" valueType="t:String" value="Procedure/" xsi:type="Literal"/>
                        <operand localId="1133" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1134" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1132" locator="244:31-244:34" path="id" scope="P" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1139" locator="245:13-245:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1138" locator="245:34" name="P" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="1142" locator="246:5-246:21">
               <by localId="1141" locator="246:13-246:21" direction="desc" path="date" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="1160" locator="372:1-388:3" name="FormatReports" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1160">
               <a:s>define function FormatReports(DrList List&lt;DiagnosticReport>, ObsList List&lt;Observation>, ReportType String):
  </a:s>
               <a:s r="1855">
                  <a:s r="1855">
                     <a:s>
                        <a:s r="1807">
                           <a:s r="1808">
                              <a:s>(</a:s>
                              <a:s r="1808">
                                 <a:s>DrList</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> D</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="1809">
                           <a:s>CollatedCodes: </a:s>
                           <a:s r="1813">
                              <a:s r="1810">
                                 <a:s>BCSMCommon</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1813">
                                 <a:s>CollateConclusionCodes(</a:s>
                                 <a:s r="1811">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>,</a:s>
                                 <a:s r="1812">
                                    <a:s>ObsList</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
  </a:s>
                        <a:s r="1814">
                           <a:s>HighestRanked: </a:s>
                           <a:s r="1816">
                              <a:s>HighestRankedResult(</a:s>
                              <a:s r="1815">
                                 <a:s>CollatedCodes</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s r="1817">
                        <a:s>return </a:s>
                        <a:s r="1818">
                           <a:s>{
    </a:s>
                           <a:s>
                              <a:s>name: </a:s>
                              <a:s r="1819">
                                 <a:s>ReportType</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>longName: </a:s>
                              <a:s r="1823">
                                 <a:s r="1820">
                                    <a:s>Common</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1823">
                                    <a:s>ConceptText(</a:s>
                                    <a:s r="1822">
                                       <a:s r="1821">
                                          <a:s>D</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1822">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>value: </a:s>
                              <a:s r="1825">
                                 <a:s r="1824">
                                    <a:s>HighestRanked</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1825">
                                    <a:s>display</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>longValue: </a:s>
                              <a:s r="1826">
                                 <a:s>flatten</a:s>
                                 <a:s r="1837">
                                    <a:s>(
      </a:s>
                                    <a:s r="1837">
                                       <a:s>
                                          <a:s r="1827">
                                             <a:s r="1828">
                                                <a:s>(</a:s>
                                                <a:s r="1828">
                                                   <a:s>CollatedCodes</a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                             <a:s> cC</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        </a:s>
                                       <a:s r="1829">
                                          <a:s>return </a:s>
                                          <a:s r="1836">
                                             <a:s>
                                                <a:s r="1830">
                                                   <a:s r="1832">
                                                      <a:s>(</a:s>
                                                      <a:s r="1832">
                                                         <a:s r="1831">
                                                            <a:s>cC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="1832">
                                                            <a:s>coding</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>)</a:s>
                                                   </a:s>
                                                   <a:s> cCC</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
          </a:s>
                                             <a:s r="1833">
                                                <a:s>return </a:s>
                                                <a:s r="1835">
                                                   <a:s r="1834">
                                                      <a:s>cCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1835">
                                                      <a:s>display</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    )</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>date: </a:s>
                              <a:s r="1843">
                                 <a:s r="1841">
                                    <a:s>Common</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1843">
                                    <a:s>DiagnosticReportDateString(</a:s>
                                    <a:s r="1842">
                                       <a:s>D</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>reference: </a:s>
                              <a:s r="1852">
                                 <a:s r="1845">
                                    <a:s>'DiagnosticReport/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="1847">
                                    <a:s r="1846">
                                       <a:s>D</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1847">
                                       <a:s>id</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>edited: </a:s>
                              <a:s r="1854">
                                 <a:s>HasBeenLocallyEdited(</a:s>
                                 <a:s r="1853">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  }</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1855" locator="373:3-388:3" xsi:type="Query">
            <source localId="1807" locator="373:3-373:12" alias="D">
               <expression localId="1808" locator="373:3-373:10" name="DrList" xsi:type="OperandRef"/>
            </source>
            <let localId="1809" locator="374:7-374:65" identifier="CollatedCodes">
               <expression localId="1813" locator="374:22-374:65" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                  <operand localId="1811" locator="374:56" name="D" xsi:type="AliasRef"/>
                  <operand localId="1812" locator="374:58-374:64" name="ObsList" xsi:type="OperandRef"/>
               </expression>
            </let>
            <let localId="1814" locator="375:3-375:51" identifier="HighestRanked">
               <expression localId="1816" locator="375:18-375:51" name="HighestRankedResult" xsi:type="FunctionRef">
                  <operand localId="1815" locator="375:38-375:50" name="CollatedCodes" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <return localId="1817" locator="376:3-388:3">
               <expression localId="1818" locator="376:10-388:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1819" locator="377:11-377:20" name="ReportType" xsi:type="OperandRef"/>
                  </element>
                  <element name="longName">
                     <value localId="1823" locator="378:15-378:40" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1822" locator="378:34-378:39" path="code" scope="D" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1825" locator="379:12-379:32" path="display" xsi:type="Property">
                        <source localId="1824" locator="379:12-379:24" name="HighestRanked" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
                  <element name="longValue">
                     <value localId="1826" locator="380:16-384:5" xsi:type="Flatten">
                        <signature localId="1838" xsi:type="ListTypeSpecifier">
                           <elementType localId="1839" xsi:type="ListTypeSpecifier">
                              <elementType localId="1840" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </signature>
                        <operand localId="1837" locator="380:23-384:5" xsi:type="Query">
                           <source localId="1827" locator="381:7-381:24" alias="cC">
                              <expression localId="1828" locator="381:7-381:21" name="CollatedCodes" xsi:type="QueryLetRef"/>
                           </source>
                           <return localId="1829" locator="382:9-383:28">
                              <expression localId="1836" locator="382:16-383:28" xsi:type="Query">
                                 <source localId="1830" locator="382:16-382:30" alias="cCC">
                                    <expression localId="1832" locator="382:16-382:26" path="coding" scope="cC" xsi:type="Property"/>
                                 </source>
                                 <return localId="1833" locator="383:11-383:28">
                                    <expression localId="1835" locator="383:18-383:28" path="display" scope="cCC" xsi:type="Property"/>
                                 </return>
                              </expression>
                           </return>
                        </operand>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1843" locator="385:11-385:46" name="DiagnosticReportDateString" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1842" locator="385:45" name="D" xsi:type="AliasRef"/>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1852" locator="386:16-386:41" xsi:type="Concatenate">
                        <operand localId="1845" locator="386:16-386:34" valueType="t:String" value="DiagnosticReport/" xsi:type="Literal"/>
                        <operand localId="1848" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1849" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1847" locator="386:38-386:41" path="id" scope="D" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1854" locator="387:13-387:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1853" locator="387:34" name="D" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand localId="1163" name="DrList">
            <operandTypeSpecifier localId="1161" locator="372:38-372:59" xsi:type="ListTypeSpecifier">
               <elementType localId="1162" locator="372:43-372:58" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand localId="1166" name="ObsList">
            <operandTypeSpecifier localId="1164" locator="372:70-372:86" xsi:type="ListTypeSpecifier">
               <elementType localId="1165" locator="372:75-372:85" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand localId="1168" name="ReportType">
            <operandTypeSpecifier localId="1167" locator="372:100-372:105" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1179" locator="391:1-402:3" name="HighestRankedResult" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1179">
               <a:s>//return biopsy result annotation or BI-RADS result annotation if exists, otherwise return first coding
define function HighestRankedResult(CollatedCodes List&lt;FHIR.CodeableConcept>):
  </a:s>
               <a:s r="1947">
                  <a:s r="1947">
                     <a:s>Coalesce(
    </a:s>
                     <a:s r="1883">
                        <a:s>First(</a:s>
                        <a:s r="1878">
                           <a:s>
                              <a:s r="1856">
                                 <a:s r="1857">
                                    <a:s>
                                       <a:s>CollatedCodes</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> cC</a:s>
                              </a:s>
                           </a:s>
                           <a:s>    
    </a:s>
                           <a:s r="1858">
                              <a:s>return </a:s>
                              <a:s r="1875">
                                 <a:s>First(</a:s>
                                 <a:s r="1870">
                                    <a:s>
                                       <a:s r="1859">
                                          <a:s r="1861">
                                             <a:s>
                                                <a:s>cC.coding</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
      </a:s>
                                    <a:s r="1862">
                                       <a:s>where </a:s>
                                       <a:s r="1862">
                                          <a:s r="1864">
                                             <a:s r="1863">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1864">
                                                <a:s>system</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="1865">
                                             <a:s>'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/biopsy-result-observation-code-system'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="1920">
                        <a:s>First(</a:s>
                        <a:s r="1915">
                           <a:s>
                              <a:s r="1886">
                                 <a:s r="1887">
                                    <a:s>
                                       <a:s>CollatedCodes</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> cC</a:s>
                              </a:s>
                           </a:s>
                           <a:s>    
    </a:s>
                           <a:s r="1888">
                              <a:s>return </a:s>
                              <a:s r="1912">
                                 <a:s>First(</a:s>
                                 <a:s r="1907">
                                    <a:s>
                                       <a:s r="1889">
                                          <a:s r="1891">
                                             <a:s>
                                                <a:s>cC.coding</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> coding</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
      </a:s>
                                    <a:s r="1906">
                                       <a:s>where </a:s>
                                       <a:s r="1906">
                                          <a:s r="1894">
                                             <a:s r="1892">
                                                <a:s>FHIRHelpers</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1894">
                                                <a:s>ToCode(</a:s>
                                                <a:s r="1893">
                                                   <a:s>coding</a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="1895">
                                             <a:s>{</a:s>
                                             <a:s r="1896">
                                                <a:s>Category0</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1897">
                                                <a:s>Category1</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1898">
                                                <a:s>Category2</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1899">
                                                <a:s>Category3</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1900">
                                                <a:s>Category4</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1901">
                                                <a:s>Category4A</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1902">
                                                <a:s>Category4B</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1903">
                                                <a:s>Category4C</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1904">
                                                <a:s>Category5</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1905">
                                                <a:s>Category6</a:s>
                                             </a:s>
                                             <a:s>}</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="1942">
                        <a:s>First(</a:s>
                        <a:s r="1937">
                           <a:s>
                              <a:s r="1923">
                                 <a:s r="1924">
                                    <a:s>
                                       <a:s>CollatedCodes</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> cC</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="1925">
                              <a:s>return </a:s>
                              <a:s r="1934">
                                 <a:s>First(</a:s>
                                 <a:s r="1929">
                                    <a:s>
                                       <a:s r="1926">
                                          <a:s r="1928">
                                             <a:s>
                                                <a:s>cC.coding</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1947" locator="392:3-402:3" xsi:type="Coalesce">
            <operand localId="1883" locator="393:5-396:6" xsi:type="First">
               <signature localId="1884" xsi:type="ListTypeSpecifier">
                  <elementType localId="1885" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="1878" locator="393:11-396:5" xsi:type="Query">
                  <source localId="1856" locator="393:11-393:26" alias="cC">
                     <expression localId="1857" locator="393:11-393:23" name="CollatedCodes" xsi:type="OperandRef"/>
                  </source>
                  <return localId="1858" locator="394:5-396:5">
                     <expression localId="1875" locator="394:12-396:5" xsi:type="First">
                        <signature localId="1876" xsi:type="ListTypeSpecifier">
                           <elementType localId="1877" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <source localId="1870" locator="394:18-395:118" xsi:type="Query">
                           <source localId="1859" locator="394:18-394:28" alias="C">
                              <expression localId="1861" locator="394:18-394:26" path="coding" scope="cC" xsi:type="Property"/>
                           </source>
                           <where localId="1862" locator="395:7-395:118" xsi:type="Equal">
                              <signature localId="1868" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="1869" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1866" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="1867" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="1864" locator="395:13-395:20" path="system" scope="C" xsi:type="Property"/>
                              </operand>
                              <operand localId="1865" locator="395:24-395:118" valueType="t:String" value="http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/biopsy-result-observation-code-system" xsi:type="Literal"/>
                           </where>
                        </source>
                     </expression>
                  </return>
               </source>
            </operand>
            <operand localId="1920" locator="397:5-400:6" xsi:type="First">
               <signature localId="1921" xsi:type="ListTypeSpecifier">
                  <elementType localId="1922" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="1915" locator="397:11-400:5" xsi:type="Query">
                  <source localId="1886" locator="397:11-397:26" alias="cC">
                     <expression localId="1887" locator="397:11-397:23" name="CollatedCodes" xsi:type="OperandRef"/>
                  </source>
                  <return localId="1888" locator="398:5-400:5">
                     <expression localId="1912" locator="398:12-400:5" xsi:type="First">
                        <signature localId="1913" xsi:type="ListTypeSpecifier">
                           <elementType localId="1914" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <source localId="1907" locator="398:18-399:155" xsi:type="Query">
                           <source localId="1889" locator="398:18-398:33" alias="coding">
                              <expression localId="1891" locator="398:18-398:26" path="coding" scope="cC" xsi:type="Property"/>
                           </source>
                           <where localId="1906" locator="399:7-399:155" xsi:type="In">
                              <operand localId="1894" locator="399:13-399:38" name="ToCode" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1893" locator="399:32-399:37" name="coding" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="1895" locator="399:43-399:155" xsi:type="List">
                                 <element localId="1896" locator="399:44-399:52" name="Category0" xsi:type="CodeRef"/>
                                 <element localId="1897" locator="399:55-399:63" name="Category1" xsi:type="CodeRef"/>
                                 <element localId="1898" locator="399:66-399:74" name="Category2" xsi:type="CodeRef"/>
                                 <element localId="1899" locator="399:77-399:85" name="Category3" xsi:type="CodeRef"/>
                                 <element localId="1900" locator="399:88-399:96" name="Category4" xsi:type="CodeRef"/>
                                 <element localId="1901" locator="399:99-399:108" name="Category4A" xsi:type="CodeRef"/>
                                 <element localId="1902" locator="399:111-399:120" name="Category4B" xsi:type="CodeRef"/>
                                 <element localId="1903" locator="399:123-399:132" name="Category4C" xsi:type="CodeRef"/>
                                 <element localId="1904" locator="399:135-399:143" name="Category5" xsi:type="CodeRef"/>
                                 <element localId="1905" locator="399:146-399:154" name="Category6" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </source>
                     </expression>
                  </return>
               </source>
            </operand>
            <operand localId="1942" locator="401:5-401:53" xsi:type="First">
               <signature localId="1943" xsi:type="ListTypeSpecifier">
                  <elementType localId="1944" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="1937" locator="401:11-401:52" xsi:type="Query">
                  <source localId="1923" locator="401:11-401:26" alias="cC">
                     <expression localId="1924" locator="401:11-401:23" name="CollatedCodes" xsi:type="OperandRef"/>
                  </source>
                  <return localId="1925" locator="401:28-401:52">
                     <expression localId="1934" locator="401:35-401:52" xsi:type="First">
                        <signature localId="1935" xsi:type="ListTypeSpecifier">
                           <elementType localId="1936" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <source localId="1929" locator="401:41-401:51" xsi:type="Query">
                           <source localId="1926" locator="401:41-401:51" alias="C">
                              <expression localId="1928" locator="401:41-401:49" path="coding" scope="cC" xsi:type="Property"/>
                           </source>
                        </source>
                     </expression>
                  </return>
               </source>
            </operand>
         </expression>
         <operand localId="1182" name="CollatedCodes">
            <operandTypeSpecifier localId="1180" locator="391:51-391:76" xsi:type="ListTypeSpecifier">
               <elementType localId="1181" locator="391:56-391:75" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="1154" locator="260:1-261:118" name="BreastImagingDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1154">
               <a:s>define BreastImagingDiagnosticReportsSummary:
  </a:s>
               <a:s r="1169">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1156">
                     <a:s r="1155">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1156">
                        <a:s>BreastImagingDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1158">
                     <a:s r="1157">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1158">
                        <a:s>BreastImagingObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1159">
                     <a:s>'Breast Imaging'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1169" locator="261:3-261:118" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1156" locator="261:17-261:59" name="BreastImagingDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1158" locator="261:62-261:99" name="BreastImagingObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1159" locator="261:102-261:117" valueType="t:String" value="Breast Imaging" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1317" locator="263:1-264:103" name="BiopsyDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1317">
               <a:s>define BiopsyDiagnosticReportsSummary:
  </a:s>
               <a:s r="1323">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1319">
                     <a:s r="1318">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1319">
                        <a:s>BiopsyDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1321">
                     <a:s r="1320">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1321">
                        <a:s>BiopsyObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1322">
                     <a:s>'Breast Biopsy'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1323" locator="264:3-264:103" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1319" locator="264:17-264:52" name="BiopsyDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1321" locator="264:55-264:85" name="BiopsyObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1322" locator="264:88-264:102" valueType="t:String" value="Breast Biopsy" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1363" locator="266:1-267:119" name="IncompleteBiopsyDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1363">
               <a:s>define IncompleteBiopsyDiagnosticReportsSummary:
  </a:s>
               <a:s r="1369">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1365">
                     <a:s r="1364">
                        <a:s>ScreeningTestIncomplete</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1365">
                        <a:s>IncompleteScreeningPathology</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1367">
                     <a:s r="1366">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1367">
                        <a:s>BiopsyObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1368">
                     <a:s>'Breast Biopsy'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1369" locator="267:3-267:119" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1365" locator="267:17-267:68" name="IncompleteScreeningPathology" libraryName="ScreeningTestIncomplete" xsi:type="ExpressionRef"/>
            <operand localId="1367" locator="267:71-267:101" name="BiopsyObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1368" locator="267:104-267:118" valueType="t:String" value="Breast Biopsy" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1151" locator="252:1-258:19" name="PertinentDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1151">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT DIAGNOSTIC REPORTS
//------------------------------------------------------------------------------

define PertinentDiagnosticReportsSummary:
  </a:s>
               <a:s r="1416">
                  <a:s>
                     <a:s r="1152">
                        <a:s r="1371">
                           <a:s>(
    </a:s>
                           <a:s r="1371">
                              <a:s r="1325">
                                 <a:s r="1315">
                                    <a:s>BreastImagingDiagnosticReportsSummary</a:s>
                                 </a:s>
                                 <a:s>
    union </a:s>
                                 <a:s r="1324">
                                    <a:s>BiopsyDiagnosticReportsSummary</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    union </a:s>
                              <a:s r="1370">
                                 <a:s>IncompleteBiopsyDiagnosticReportsSummary</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  )</a:s>
                        </a:s>
                        <a:s> D</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1410">
                     <a:s>sort by </a:s>
                     <a:s r="1409">
                        <a:s r="1408">
                           <a:s>date</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1416" locator="253:3-258:19" xsi:type="Query">
            <source localId="1152" locator="253:3-257:5" alias="D">
               <expression localId="1371" locator="253:3-257:3" xsi:type="Union">
                  <signature localId="1372" xsi:type="ListTypeSpecifier">
                     <elementType localId="1373" xsi:type="TupleTypeSpecifier">
                        <element localId="1374" name="name">
                           <elementType localId="1375" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1376" name="longName">
                           <elementType localId="1377" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1378" name="value">
                           <elementType localId="1379" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1380" name="longValue">
                           <elementType localId="1381" xsi:type="ListTypeSpecifier">
                              <elementType localId="1382" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element localId="1383" name="date">
                           <elementType localId="1384" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1385" name="reference">
                           <elementType localId="1386" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1387" name="edited">
                           <elementType localId="1388" xsi:type="ListTypeSpecifier">
                              <elementType localId="1389" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </signature>
                  <signature localId="1390" xsi:type="ListTypeSpecifier">
                     <elementType localId="1391" xsi:type="TupleTypeSpecifier">
                        <element localId="1392" name="name">
                           <elementType localId="1393" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1394" name="longName">
                           <elementType localId="1395" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1396" name="value">
                           <elementType localId="1397" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1398" name="longValue">
                           <elementType localId="1399" xsi:type="ListTypeSpecifier">
                              <elementType localId="1400" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element localId="1401" name="date">
                           <elementType localId="1402" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1403" name="reference">
                           <elementType localId="1404" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1405" name="edited">
                           <elementType localId="1406" xsi:type="ListTypeSpecifier">
                              <elementType localId="1407" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </signature>
                  <operand localId="1325" locator="254:5-255:40" xsi:type="Union">
                     <signature localId="1326" xsi:type="ListTypeSpecifier">
                        <elementType localId="1327" xsi:type="TupleTypeSpecifier">
                           <element localId="1328" name="name">
                              <elementType localId="1329" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1330" name="longName">
                              <elementType localId="1331" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1332" name="value">
                              <elementType localId="1333" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1334" name="longValue">
                              <elementType localId="1335" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1336" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element localId="1337" name="date">
                              <elementType localId="1338" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1339" name="reference">
                              <elementType localId="1340" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1341" name="edited">
                              <elementType localId="1342" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1343" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </elementType>
                     </signature>
                     <signature localId="1344" xsi:type="ListTypeSpecifier">
                        <elementType localId="1345" xsi:type="TupleTypeSpecifier">
                           <element localId="1346" name="name">
                              <elementType localId="1347" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1348" name="longName">
                              <elementType localId="1349" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1350" name="value">
                              <elementType localId="1351" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1352" name="longValue">
                              <elementType localId="1353" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1354" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element localId="1355" name="date">
                              <elementType localId="1356" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1357" name="reference">
                              <elementType localId="1358" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1359" name="edited">
                              <elementType localId="1360" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1361" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </elementType>
                     </signature>
                     <operand localId="1315" locator="254:5-254:41" name="BreastImagingDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                     <operand localId="1324" locator="255:11-255:40" name="BiopsyDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="1370" locator="256:11-256:50" name="IncompleteBiopsyDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <sort localId="1410" locator="258:3-258:19">
               <by localId="1409" locator="258:11-258:19" direction="desc" path="date" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="1422" locator="273:1-275:42" name="PertinentEncounters" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1422">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT ENCOUNTERS
//------------------------------------------------------------------------------

define PertinentEncounters:
  </a:s>
               <a:s r="1427">
                  <a:s r="1424">
                     <a:s r="1423">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1424">
                        <a:s>AllBreastSymptomEncounters</a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
  </a:s>
                  <a:s r="1426">
                     <a:s r="1425">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1426">
                        <a:s>GeneticCounselingEncounters</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1427" locator="274:3-275:42" xsi:type="Union">
            <signature localId="1428" xsi:type="ListTypeSpecifier">
               <elementType localId="1429" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="1430" xsi:type="ListTypeSpecifier">
               <elementType localId="1431" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="1424" locator="274:3-274:41" name="AllBreastSymptomEncounters" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1426" locator="275:3-275:42" name="GeneticCounselingEncounters" libraryName="DataElements" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="1419" locator="277:1-286:3" name="PertinentEncountersSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1419">
               <a:s>define PertinentEncountersSummary:
  </a:s>
               <a:s r="1478">
                  <a:s>
                     <a:s r="1420">
                        <a:s r="1432">
                           <a:s>(</a:s>
                           <a:s r="1432">
                              <a:s>PertinentEncounters</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1433">
                     <a:s>return </a:s>
                     <a:s r="1434">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1443">
                              <a:s r="1435">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1443">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1436">
                                    <a:s r="1438">
                                       <a:s r="1437">
                                          <a:s>E</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1438">
                                          <a:s>reasonCode</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1439">[0]</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1445">
                              <a:s r="1444">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1445">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="1468">
                              <a:s r="1458">
                                 <a:s r="1454">
                                    <a:s r="1448">
                                       <a:s>Common</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1454">
                                       <a:s>DateTimeText(</a:s>
                                       <a:s r="1453">
                                          <a:s r="1449">
                                             <a:s>(</a:s>
                                             <a:s r="1449">
                                                <a:s r="1451">
                                                   <a:s r="1450">
                                                      <a:s>E</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1451">
                                                      <a:s>period</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> as </a:s>
                                                <a:s r="1452">
                                                   <a:s>FHIR.Period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1453">
                                             <a:s>&quot;start&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> +
      </a:s>
                                 <a:s r="1455">
                                    <a:s>' to '</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> +
      </a:s>
                              <a:s r="1465">
                                 <a:s r="1459">
                                    <a:s>Common</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1465">
                                    <a:s>DateTimeText(</a:s>
                                    <a:s r="1464">
                                       <a:s r="1460">
                                          <a:s>(</a:s>
                                          <a:s r="1460">
                                             <a:s r="1462">
                                                <a:s r="1461">
                                                   <a:s>E</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1462">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="1463">
                                                <a:s>FHIR.Period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1464">
                                          <a:s>&quot;end&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1477">
                              <a:s r="1470">
                                 <a:s>'Encounter/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1472">
                                 <a:s r="1471">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1472">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1478" locator="278:3-286:3" xsi:type="Query">
            <source localId="1420" locator="278:3-278:25" alias="E">
               <expression localId="1432" locator="278:3-278:23" name="PertinentEncounters" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1433" locator="279:3-286:3">
               <expression localId="1434" locator="279:10-286:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1443" locator="280:11-280:45" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1436" locator="280:30-280:44" xsi:type="Indexer">
                           <signature localId="1440" xsi:type="ListTypeSpecifier">
                              <elementType localId="1441" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <signature localId="1442" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1438" locator="280:30-280:41" path="reasonCode" scope="E" xsi:type="Property"/>
                           <operand localId="1439" locator="280:43" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1445" locator="281:12-281:19" path="status" scope="E" xsi:type="Property"/>
                  </element>
                  <element name="date">
                     <value localId="1468" locator="282:11-284:58" xsi:type="Concatenate">
                        <operand localId="1458" locator="282:11-283:12" xsi:type="Concatenate">
                           <operand localId="1454" locator="282:11-282:64" name="DateTimeText" libraryName="Common" xsi:type="FunctionRef">
                              <operand localId="1453" locator="282:31-282:63" path="start" xsi:type="Property">
                                 <source localId="1449" locator="282:31-282:55" strict="false" xsi:type="As">
                                    <operand localId="1451" locator="282:32-282:39" path="period" scope="E" xsi:type="Property"/>
                                    <asTypeSpecifier localId="1452" locator="282:44-282:54" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand localId="1455" locator="283:7-283:12" valueType="t:String" value=" to " xsi:type="Literal"/>
                        </operand>
                        <operand localId="1465" locator="284:7-284:58" name="DateTimeText" libraryName="Common" xsi:type="FunctionRef">
                           <operand localId="1464" locator="284:27-284:57" path="end" xsi:type="Property">
                              <source localId="1460" locator="284:27-284:51" strict="false" xsi:type="As">
                                 <operand localId="1462" locator="284:28-284:35" path="period" scope="E" xsi:type="Property"/>
                                 <asTypeSpecifier localId="1463" locator="284:40-284:50" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                              </source>
                           </operand>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1477" locator="285:16-285:34" xsi:type="Concatenate">
                        <operand localId="1470" locator="285:16-285:27" valueType="t:String" value="Encounter/" xsi:type="Literal"/>
                        <operand localId="1473" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1474" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1472" locator="285:31-285:34" path="id" scope="E" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1484" locator="291:3-292:40" name="PertinentEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1484">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT EPISODES OF CARE
//------------------------------------------------------------------------------
  define PertinentEpisodesOfCare:
    </a:s>
               <a:s r="1486">
                  <a:s r="1485">
                     <a:s>DataElements</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1486">
                     <a:s>PregnancyEpisodesOfCare</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1486" locator="292:5-292:40" name="PregnancyEpisodesOfCare" libraryName="DataElements" xsi:type="ExpressionRef"/>
      </def>
      <def localId="1509" locator="404:1-408:29" name="displayStartDate" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1509">
               <a:s>define function displayStartDate(startDate String):
  </a:s>
               <a:s r="1948">
                  <a:s r="1948">
                     <a:s>if </a:s>
                     <a:s r="1951">
                        <a:s r="1949">
                           <a:s>startDate</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="1952">
                        <a:s>startDate</a:s>
                     </a:s>
                     <a:s>
  else
    </a:s>
                     <a:s r="1953">
                        <a:s>'no start date available'</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1948" locator="405:3-408:29" xsi:type="If">
            <condition localId="1951" locator="405:6-405:26" xsi:type="Not">
               <operand localId="1950" locator="405:6-405:26" xsi:type="IsNull">
                  <operand localId="1949" locator="405:6-405:14" name="startDate" xsi:type="OperandRef"/>
               </operand>
            </condition>
            <then localId="1952" locator="406:5-406:13" name="startDate" xsi:type="OperandRef"/>
            <else localId="1953" locator="408:5-408:29" valueType="t:String" value="no start date available" xsi:type="Literal"/>
         </expression>
         <operand localId="1511" name="startDate">
            <operandTypeSpecifier localId="1510" locator="404:44-404:49" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1528" locator="410:1-414:27" name="displayEndDate" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1528">
               <a:s>define function displayEndDate(endDate String):
  </a:s>
               <a:s r="1954">
                  <a:s r="1954">
                     <a:s>if </a:s>
                     <a:s r="1957">
                        <a:s r="1955">
                           <a:s>endDate</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="1958">
                        <a:s>endDate</a:s>
                     </a:s>
                     <a:s>
  else
    </a:s>
                     <a:s r="1959">
                        <a:s>'no end date available'</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1954" locator="411:3-414:27" xsi:type="If">
            <condition localId="1957" locator="411:6-411:24" xsi:type="Not">
               <operand localId="1956" locator="411:6-411:24" xsi:type="IsNull">
                  <operand localId="1955" locator="411:6-411:12" name="endDate" xsi:type="OperandRef"/>
               </operand>
            </condition>
            <then localId="1958" locator="412:5-412:11" name="endDate" xsi:type="OperandRef"/>
            <else localId="1959" locator="414:5-414:27" valueType="t:String" value="no end date available" xsi:type="Literal"/>
         </expression>
         <operand localId="1530" name="endDate">
            <operandTypeSpecifier localId="1529" locator="410:40-410:45" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1481" locator="294:1-306:31" name="PertinentEpisodesOfCareSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1481">
               <a:s>define PertinentEpisodesOfCareSummary:
  </a:s>
               <a:s r="1562">
                  <a:s>
                     <a:s r="1482">
                        <a:s r="1487">
                           <a:s>(</a:s>
                           <a:s r="1487">
                              <a:s>PertinentEpisodesOfCare</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1488">
                     <a:s>return </a:s>
                     <a:s r="1489">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1498">
                              <a:s r="1490">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1498">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1491">
                                    <a:s r="1493">
                                       <a:s r="1492">
                                          <a:s>E</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1493">
                                          <a:s>type</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1494">[0]</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1501">
                              <a:s r="1500">
                                 <a:s r="1499">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1500">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1501">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date:
      </a:s>
                           <a:s r="1540">
                              <a:s r="1522">
                                 <a:s r="1512">
                                    <a:s>displayStartDate(</a:s>
                                    <a:s r="1508">
                                       <a:s r="1507">
                                          <a:s r="1504">
                                             <a:s>Common</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1507">
                                             <a:s>PeriodObject(</a:s>
                                             <a:s r="1506">
                                                <a:s r="1505">
                                                   <a:s>E</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1506">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1508">
                                          <a:s>&quot;Start&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> +
      </a:s>
                                 <a:s r="1519">
                                    <a:s>' to '</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> +
      </a:s>
                              <a:s r="1531">
                                 <a:s>displayEndDate(</a:s>
                                 <a:s r="1527">
                                    <a:s r="1526">
                                       <a:s r="1523">
                                          <a:s>Common</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1526">
                                          <a:s>PeriodObject(</a:s>
                                          <a:s r="1525">
                                             <a:s r="1524">
                                                <a:s>E</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1525">
                                                <a:s>period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1527">
                                       <a:s>&quot;End&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1549">
                              <a:s r="1542">
                                 <a:s>'EpisodeOfCare/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1544">
                                 <a:s r="1543">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1544">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="1551">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="1550">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1556">
                     <a:s>sort by </a:s>
                     <a:s r="1555">
                        <a:s r="1552">
                           <a:s>(</a:s>
                           <a:s r="1552">
                              <a:s r="1553">
                                 <a:s>date</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1554">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1562" locator="295:3-306:31" xsi:type="Query">
            <source localId="1482" locator="295:3-295:29" alias="E">
               <expression localId="1487" locator="295:3-295:27" name="PertinentEpisodesOfCare" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1488" locator="296:3-305:3">
               <expression localId="1489" locator="296:10-305:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1498" locator="297:11-297:39" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1491" locator="297:30-297:38" xsi:type="Indexer">
                           <signature localId="1495" xsi:type="ListTypeSpecifier">
                              <elementType localId="1496" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <signature localId="1497" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1493" locator="297:30-297:35" path="type" scope="E" xsi:type="Property"/>
                           <operand localId="1494" locator="297:37" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1501" locator="298:12-298:25" path="value" xsi:type="Property">
                        <source localId="1500" locator="298:12-298:19" path="status" scope="E" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1540" locator="300:7-302:57" xsi:type="Concatenate">
                        <operand localId="1522" locator="300:7-301:12" xsi:type="Concatenate">
                           <operand localId="1512" locator="300:7-300:61" name="displayStartDate" xsi:type="FunctionRef">
                              <operand localId="1508" locator="300:24-300:60" path="Start" xsi:type="Property">
                                 <source localId="1507" locator="300:24-300:52" name="PeriodObject" libraryName="Common" xsi:type="FunctionRef">
                                    <operand localId="1506" locator="300:44-300:51" path="period" scope="E" xsi:type="Property"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand localId="1519" locator="301:7-301:12" valueType="t:String" value=" to " xsi:type="Literal"/>
                        </operand>
                        <operand localId="1531" locator="302:7-302:57" name="displayEndDate" xsi:type="FunctionRef">
                           <operand localId="1527" locator="302:22-302:56" path="End" xsi:type="Property">
                              <source localId="1526" locator="302:22-302:50" name="PeriodObject" libraryName="Common" xsi:type="FunctionRef">
                                 <operand localId="1525" locator="302:42-302:49" path="period" scope="E" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1549" locator="303:16-303:38" xsi:type="Concatenate">
                        <operand localId="1542" locator="303:16-303:31" valueType="t:String" value="EpisodeOfCare/" xsi:type="Literal"/>
                        <operand localId="1545" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1546" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1544" locator="303:35-303:38" path="id" scope="E" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1551" locator="304:13-304:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1550" locator="304:34" name="E" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="1556" locator="306:3-306:31">
               <by localId="1555" locator="306:11-306:31" direction="desc" xsi:type="ByExpression">
                  <expression localId="1552" locator="306:11-306:26" strict="false" xsi:type="As">
                     <operand localId="1553" locator="306:12-306:15" name="date" xsi:type="IdentifierRef"/>
                     <asTypeSpecifier localId="1554" locator="306:20-306:25" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="1567" locator="313:1-323:3" name="DueOrOverdueScreeningSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1567">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT REQUESTS
//------------------------------------------------------------------------------  

define DueOrOverdueScreeningSummary:
  </a:s>
               <a:s r="1589">
                  <a:s>
                     <a:s r="1568">
                        <a:s r="1570">
                           <a:s>(</a:s>
                           <a:s r="1570">
                              <a:s r="1569">
                                 <a:s>ScreeningDue</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1570">
                                 <a:s>DueOrOverdue</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1571">
                     <a:s>return
  </a:s>
                     <a:s r="1572">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1576">
                              <a:s r="1573">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1576">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1575">
                                    <a:s r="1574">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1575">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>intent: </a:s>
                           <a:s r="1578">
                              <a:s r="1577">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1578">
                                 <a:s>intent</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>, 
    </a:s>
                        <a:s>
                           <a:s>occurrence: </a:s>
                           <a:s r="1580">
                              <a:s r="1579">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1580">
                                 <a:s>nextDue</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1581">
                              <a:s r="1582">null as </a:s>
                              <a:s r="1583">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>flag: </a:s>
                           <a:s r="1586">
                              <a:s r="1585">
                                 <a:s r="1584">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1585">
                                    <a:s>flag</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1586">
                                 <a:s>display</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>plannedRepeat: </a:s>
                           <a:s r="1588">
                              <a:s r="1587">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1588">
                                 <a:s>plannedRepeat</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1589" locator="314:3-323:3" xsi:type="Query">
            <source localId="1568" locator="314:3-314:31" alias="R">
               <expression localId="1570" locator="314:3-314:29" name="DueOrOverdue" libraryName="ScreeningDue" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1571" locator="315:5-323:3">
               <expression localId="1572" locator="316:3-323:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1576" locator="317:11-317:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1575" locator="317:30-317:35" path="code" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="intent">
                     <value localId="1578" locator="318:13-318:20" path="intent" scope="R" xsi:type="Property"/>
                  </element>
                  <element name="occurrence">
                     <value localId="1580" locator="319:17-319:25" path="nextDue" scope="R" xsi:type="Property"/>
                  </element>
                  <element name="reference">
                     <value localId="1581" locator="320:16-320:29" strict="false" xsi:type="As">
                        <operand localId="1582" locator="320:16-320:19" xsi:type="Null"/>
                        <asTypeSpecifier localId="1583" locator="320:24-320:29" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </value>
                  </element>
                  <element name="flag">
                     <value localId="1586" locator="321:11-321:24" path="display" xsi:type="Property">
                        <source localId="1585" locator="321:11-321:16" path="flag" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="plannedRepeat">
                     <value localId="1588" locator="322:20-322:34" path="plannedRepeat" scope="R" xsi:type="Property"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1592" locator="325:1-335:3" name="IncompleteScreeningOrdersSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1592">
               <a:s>define IncompleteScreeningOrdersSummary:
  </a:s>
               <a:s r="1629">
                  <a:s>
                     <a:s r="1593">
                        <a:s r="1595">
                           <a:s>(</a:s>
                           <a:s r="1595">
                              <a:s r="1594">
                                 <a:s>ScreeningTestIncomplete</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1595">
                                 <a:s>IncompleteScreeningOrders</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1596">
                     <a:s>return
  </a:s>
                     <a:s r="1597">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1601">
                              <a:s r="1598">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1601">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1600">
                                    <a:s r="1599">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1600">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>intent: </a:s>
                           <a:s r="1605">
                              <a:s r="1602">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1605">
                                 <a:s>ToString(</a:s>
                                 <a:s r="1604">
                                    <a:s r="1603">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1604">
                                       <a:s>intent</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>, 
    </a:s>
                        <a:s>
                           <a:s>occurrence: </a:s>
                           <a:s r="1612">
                              <a:s r="1607">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1612">
                                 <a:s>ToDateTime(</a:s>
                                 <a:s r="1608">
                                    <a:s r="1610">
                                       <a:s r="1609">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1610">
                                          <a:s>occurrence</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="1611">
                                       <a:s>FHIR.dateTime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1622">
                              <a:s r="1615">
                                 <a:s>'ServiceRequest/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1617">
                                 <a:s r="1616">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1617">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>flag: </a:s>
                           <a:s r="1623">
                              <a:s r="1624">null as </a:s>
                              <a:s r="1625">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>plannedRepeat: </a:s>
                           <a:s r="1626">
                              <a:s r="1627">null as </a:s>
                              <a:s r="1628">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1629" locator="326:3-335:3" xsi:type="Query">
            <source localId="1593" locator="326:3-326:55" alias="R">
               <expression localId="1595" locator="326:3-326:53" name="IncompleteScreeningOrders" libraryName="ScreeningTestIncomplete" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1596" locator="327:5-335:3">
               <expression localId="1597" locator="328:3-335:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1601" locator="329:11-329:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1600" locator="329:30-329:35" path="code" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="intent">
                     <value localId="1605" locator="330:13-330:42" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1606" name="fhir:ServiceRequestIntent" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1604" locator="330:34-330:41" path="intent" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="occurrence">
                     <value localId="1612" locator="331:17-331:69" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1613" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1608" locator="331:40-331:68" strict="false" xsi:type="As">
                           <operand localId="1610" locator="331:40-331:51" path="occurrence" scope="R" xsi:type="Property"/>
                           <asTypeSpecifier localId="1611" locator="331:56-331:68" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1622" locator="332:16-332:39" xsi:type="Concatenate">
                        <operand localId="1615" locator="332:16-332:32" valueType="t:String" value="ServiceRequest/" xsi:type="Literal"/>
                        <operand localId="1618" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1619" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1617" locator="332:36-332:39" path="id" scope="R" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="flag">
                     <value localId="1623" locator="333:11-333:24" strict="false" xsi:type="As">
                        <operand localId="1624" locator="333:11-333:14" xsi:type="Null"/>
                        <asTypeSpecifier localId="1625" locator="333:19-333:24" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </value>
                  </element>
                  <element name="plannedRepeat">
                     <value localId="1626" locator="334:20-334:33" strict="false" xsi:type="As">
                        <operand localId="1627" locator="334:20-334:23" xsi:type="Null"/>
                        <asTypeSpecifier localId="1628" locator="334:28-334:33" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1661" locator="337:1-347:3" name="GeneticCounselingReferralOrdersSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1661">
               <a:s>define GeneticCounselingReferralOrdersSummary:
  </a:s>
               <a:s r="1698">
                  <a:s>
                     <a:s r="1662">
                        <a:s r="1664">
                           <a:s>(</a:s>
                           <a:s r="1664">
                              <a:s r="1663">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1664">
                                 <a:s>GeneticCounselingReferralOrders</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1665">
                     <a:s>return
  </a:s>
                     <a:s r="1666">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1670">
                              <a:s r="1667">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1670">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1669">
                                    <a:s r="1668">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1669">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>intent: </a:s>
                           <a:s r="1674">
                              <a:s r="1671">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1674">
                                 <a:s>ToString(</a:s>
                                 <a:s r="1673">
                                    <a:s r="1672">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1673">
                                       <a:s>intent</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>, 
    </a:s>
                        <a:s>
                           <a:s>occurrence: </a:s>
                           <a:s r="1681">
                              <a:s r="1676">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1681">
                                 <a:s>ToDateTime(</a:s>
                                 <a:s r="1677">
                                    <a:s r="1679">
                                       <a:s r="1678">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1679">
                                          <a:s>occurrence</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="1680">
                                       <a:s>FHIR.dateTime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1691">
                              <a:s r="1684">
                                 <a:s>'ServiceRequest/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1686">
                                 <a:s r="1685">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1686">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>flag: </a:s>
                           <a:s r="1692">
                              <a:s r="1693">null as </a:s>
                              <a:s r="1694">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>plannedRepeat: </a:s>
                           <a:s r="1695">
                              <a:s r="1696">null as </a:s>
                              <a:s r="1697">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1698" locator="338:3-347:3" xsi:type="Query">
            <source localId="1662" locator="338:3-338:50" alias="R">
               <expression localId="1664" locator="338:3-338:48" name="GeneticCounselingReferralOrders" libraryName="DataElements" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1665" locator="339:5-347:3">
               <expression localId="1666" locator="340:3-347:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1670" locator="341:11-341:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1669" locator="341:30-341:35" path="code" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="intent">
                     <value localId="1674" locator="342:13-342:42" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1675" name="fhir:ServiceRequestIntent" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1673" locator="342:34-342:41" path="intent" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="occurrence">
                     <value localId="1681" locator="343:17-343:69" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1682" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1677" locator="343:40-343:68" strict="false" xsi:type="As">
                           <operand localId="1679" locator="343:40-343:51" path="occurrence" scope="R" xsi:type="Property"/>
                           <asTypeSpecifier localId="1680" locator="343:56-343:68" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1691" locator="344:16-344:39" xsi:type="Concatenate">
                        <operand localId="1684" locator="344:16-344:32" valueType="t:String" value="ServiceRequest/" xsi:type="Literal"/>
                        <operand localId="1687" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1688" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1686" locator="344:36-344:39" path="id" scope="R" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="flag">
                     <value localId="1692" locator="345:11-345:24" strict="false" xsi:type="As">
                        <operand localId="1693" locator="345:11-345:14" xsi:type="Null"/>
                        <asTypeSpecifier localId="1694" locator="345:19-345:24" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </value>
                  </element>
                  <element name="plannedRepeat">
                     <value localId="1695" locator="346:20-346:33" strict="false" xsi:type="As">
                        <operand localId="1696" locator="346:20-346:23" xsi:type="Null"/>
                        <asTypeSpecifier localId="1697" locator="346:28-346:33" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1565" locator="349:1-352:40" name="PertinentRequestsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1565">
               <a:s>define PertinentRequestsSummary:
  </a:s>
               <a:s r="1700">
                  <a:s r="1631">
                     <a:s r="1590">
                        <a:s>DueOrOverdueScreeningSummary</a:s>
                     </a:s>
                     <a:s> union
  </a:s>
                     <a:s r="1630">
                        <a:s>IncompleteScreeningOrdersSummary</a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
  </a:s>
                  <a:s r="1699">
                     <a:s>GeneticCounselingReferralOrdersSummary</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1700" locator="350:3-352:40" xsi:type="Union">
            <signature localId="1701" xsi:type="ListTypeSpecifier">
               <elementType localId="1702" xsi:type="TupleTypeSpecifier">
                  <element localId="1703" name="name">
                     <elementType localId="1704" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1705" name="intent">
                     <elementType localId="1706" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1707" name="occurrence">
                     <elementType localId="1708" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1709" name="reference">
                     <elementType localId="1710" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1711" name="flag">
                     <elementType localId="1712" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1713" name="plannedRepeat">
                     <elementType localId="1714" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
               </elementType>
            </signature>
            <signature localId="1715" xsi:type="ListTypeSpecifier">
               <elementType localId="1716" xsi:type="TupleTypeSpecifier">
                  <element localId="1717" name="name">
                     <elementType localId="1718" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1719" name="intent">
                     <elementType localId="1720" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1721" name="occurrence">
                     <elementType localId="1722" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1723" name="reference">
                     <elementType localId="1724" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1725" name="flag">
                     <elementType localId="1726" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="1727" name="plannedRepeat">
                     <elementType localId="1728" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </element>
               </elementType>
            </signature>
            <operand localId="1631" locator="350:3-351:34" xsi:type="Union">
               <signature localId="1632" xsi:type="ListTypeSpecifier">
                  <elementType localId="1633" xsi:type="TupleTypeSpecifier">
                     <element localId="1634" name="name">
                        <elementType localId="1635" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1636" name="intent">
                        <elementType localId="1637" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1638" name="occurrence">
                        <elementType localId="1639" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1640" name="reference">
                        <elementType localId="1641" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1642" name="flag">
                        <elementType localId="1643" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1644" name="plannedRepeat">
                        <elementType localId="1645" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </elementType>
               </signature>
               <signature localId="1646" xsi:type="ListTypeSpecifier">
                  <elementType localId="1647" xsi:type="TupleTypeSpecifier">
                     <element localId="1648" name="name">
                        <elementType localId="1649" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1650" name="intent">
                        <elementType localId="1651" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1652" name="occurrence">
                        <elementType localId="1653" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1654" name="reference">
                        <elementType localId="1655" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1656" name="flag">
                        <elementType localId="1657" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1658" name="plannedRepeat">
                        <elementType localId="1659" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </elementType>
               </signature>
               <operand localId="1590" locator="350:3-350:30" name="DueOrOverdueScreeningSummary" xsi:type="ExpressionRef"/>
               <operand localId="1630" locator="351:3-351:34" name="IncompleteScreeningOrdersSummary" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="1699" locator="352:3-352:40" name="GeneticCounselingReferralOrdersSummary" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="240" locator="41:1-64:1" name="PertinentHistory" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="240">
               <a:s>define PertinentHistory:
</a:s>
               <a:s r="241">
                  <a:s>{
  </a:s>
                  <a:s>
                     <a:s>patientInfo: </a:s>
                     <a:s r="242">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="338">
                              <a:s>PatientName</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>id: </a:s>
                           <a:s r="340">
                              <a:s r="339">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="340">
                                 <a:s>identifier</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>isPregnant: </a:s>
                           <a:s r="342">
                              <a:s r="341">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="342">
                                 <a:s>Pregnant</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>dateOfBirth: </a:s>
                           <a:s r="344">
                              <a:s r="343">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="344">
                                 <a:s>birthDate</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>sexAtBirth: </a:s>
                           <a:s r="364">
                              <a:s>BirthSexText</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>age: </a:s>
                           <a:s r="369">
                              <a:s>AgeInYears()</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>gender: </a:s>
                           <a:s r="402">
                              <a:s>GenderText</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>primaryLanguage: </a:s>
                           <a:s r="545">
                              <a:s>LanguageText</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>race: </a:s>
                           <a:s r="664">
                              <a:s r="606">
                                 <a:s r="602">
                                    <a:s>RaceText</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="603">
                                    <a:s>'; '</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="661">
                                 <a:s>EthnicityText</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>,
  </a:s>
                  <a:s>
                     <a:s>patientHistory: </a:s>
                     <a:s r="665">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>conditions: </a:s>
                           <a:s r="793">
                              <a:s>PertinentConditionsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>familyMemberHistory: </a:s>
                           <a:s r="888">
                              <a:s>PertinentFamilyMemberHistorySummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>observations: </a:s>
                           <a:s r="1094">
                              <a:s>PertinentObservationsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>procedures: </a:s>
                           <a:s r="1149">
                              <a:s>PertinentProceduresSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>diagnosticReports: </a:s>
                           <a:s r="1417">
                              <a:s>PertinentDiagnosticReportsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>encounters: </a:s>
                           <a:s r="1479">
                              <a:s>PertinentEncountersSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>episodeOfCares: </a:s>
                           <a:s r="1563">
                              <a:s>PertinentEpisodesOfCareSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>requests: </a:s>
                           <a:s r="1729">
                              <a:s>PertinentRequestsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
}</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="241" locator="42:1-64:1" xsi:type="Tuple">
            <element name="patientInfo">
               <value localId="242" locator="43:16-53:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="338" locator="44:11-44:21" name="PatientName" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="id">
                     <value localId="340" locator="45:9-45:26" path="identifier" xsi:type="Property">
                        <source localId="339" locator="45:9-45:15" name="Patient" xsi:type="ExpressionRef"/>
                     </value>
                  </element>
                  <element name="isPregnant">
                     <value localId="342" locator="46:17-46:37" name="Pregnant" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="dateOfBirth">
                     <value localId="344" locator="47:18-47:34" path="birthDate" xsi:type="Property">
                        <source localId="343" locator="47:18-47:24" name="Patient" xsi:type="ExpressionRef"/>
                     </value>
                  </element>
                  <element name="sexAtBirth">
                     <value localId="364" locator="48:17-48:28" name="BirthSexText" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="age">
                     <value localId="369" locator="49:10-49:21" precision="Year" xsi:type="CalculateAge">
                        <signature localId="370" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="368" path="birthDate.value" xsi:type="Property">
                           <source localId="367" name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </value>
                  </element>
                  <element name="gender">
                     <value localId="402" locator="50:13-50:22" name="GenderText" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="primaryLanguage">
                     <value localId="545" locator="51:22-51:33" name="LanguageText" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="race">
                     <value localId="664" locator="52:11-52:41" xsi:type="Concatenate">
                        <operand localId="606" locator="52:11-52:25" xsi:type="Concatenate">
                           <operand localId="602" locator="52:11-52:18" name="RaceText" xsi:type="ExpressionRef"/>
                           <operand localId="603" locator="52:22-52:25" valueType="t:String" value="; " xsi:type="Literal"/>
                        </operand>
                        <operand localId="661" locator="52:29-52:41" name="EthnicityText" xsi:type="ExpressionRef"/>
                     </value>
                  </element>
               </value>
            </element>
            <element name="patientHistory">
               <value localId="665" locator="54:19-63:3" xsi:type="Tuple">
                  <element name="conditions">
                     <value localId="793" locator="55:17-55:42" name="PertinentConditionsSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="familyMemberHistory">
                     <value localId="888" locator="56:26-56:60" name="PertinentFamilyMemberHistorySummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="observations">
                     <value localId="1094" locator="57:19-57:46" name="PertinentObservationsSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="procedures">
                     <value localId="1149" locator="58:17-58:42" name="PertinentProceduresSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="diagnosticReports">
                     <value localId="1417" locator="59:24-59:56" name="PertinentDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="encounters">
                     <value localId="1479" locator="60:17-60:42" name="PertinentEncountersSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="episodeOfCares">
                     <value localId="1563" locator="61:21-61:50" name="PertinentEpisodesOfCareSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="requests">
                     <value localId="1729" locator="62:15-62:38" name="PertinentRequestsSummary" xsi:type="ExpressionRef"/>
                  </element>
               </value>
            </element>
         </expression>
      </def>
   </statements>
</library>
