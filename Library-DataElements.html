<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>DataElements - Breast Cancer Screening and Management (BCSM) Clinical Decision Support (CDS) Implementation Guide v1.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"7.57"}
    h3,h4,h5,h6{--heading-prefix:"7.57"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Breast Cancer Screening and Management (BCSM) Clinical Decision Support (CDS) Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - ci-build


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="background.html">Background</a>
  </li>
  <li>
    <a href="specification.html">Specification</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Artifacts
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">FHIR Artifacts</a>
      </li>
      <li>
        <a href="terminology.html">Terminology</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="examples.html">Examples</a>
  </li>
  <li>
    <a href="downloads.html">Downloads</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='artifacts.html'><b>Artifacts Summary</b></a></li><li><b>DataElements</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Breast Cancer Screening and Management (BCSM) Clinical Decision Support (CDS) Implementation Guide - Local Development build (v1.0.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="http://cancerscreeningcds.github.io/bcsm-cds/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  








<ul class="nav nav-tabs">

  <li class="active">
    <a href="#">Narrative Content</a>
  </li>



  
    <li>
      <a href="Library-DataElements.xml.html">XML</a>
    </li>
  


  
    <li>
      <a href="Library-DataElements.json.html">JSON</a>
    </li>
  


  
    <li>
      <a href="Library-DataElements.ttl.html">TTL</a>
    </li>
  



</ul>

  <a name="root"> </a>

  <h2 id="root">Library: DataElements

  </h2>

  <table class="colsd">

    <tr>
      <td colspan="4"><i>Official URL</i>: <span class="copy-text">http://cancerscreeningcds.github.io/bcsm-cds/Library/DataElements<button title="Click to copy URL" class="btn-copy" data-clipboard-text="http://cancerscreeningcds.github.io/bcsm-cds/Library/DataElements"/></span>
      </td>
      <td><i>Version</i>:
      <span class="copy-text">1.0.0<button title="Click to copy versioned URL" class="btn-copy" data-clipboard-text="http://cancerscreeningcds.github.io/bcsm-cds/Library/DataElements|1.0.0"/></span>
      </td>
    </tr>

    <tr>







      <td colspan="4">
        
          Draft
          
            as of 2025-02-28
          
        
      </td>



      <td><i>Computable Name</i>: <span style="font-family: monospace;">DataElements</span></td>
    </tr>




  </table>



  <!-- insert intro if present -->
  



<!--  <p>
  Formats: <a href="Library-DataElements.xml.html">XML</a>, <a href="Library-DataElements.json.html">JSON</a>, <a href="Library-DataElements.ttl.html">Turtle</a>
  </p>-->

  


  <div xmlns="http://www.w3.org/1999/xhtml">
<div>
    <table class="grid dict">
        
        

        
        
        <tr>
            <th scope="row"><b>Id: </b></th>
            <td style="padding-left: 4px;">DataElements</td>
        </tr>
        

        
        
        <tr>
            <th scope="row"><b>Version: </b></th>
            <td style="padding-left: 4px;">1.0.0</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Url: </b></th>
            <td style="padding-left: 4px;"><a href="Library-DataElements.html">DataElements</a></td>
        </tr>
        

        

        

        
        <tr>
            <th scope="row"><b>Status: </b></th>
            <td style="padding-left: 4px;">draft</td>
        </tr>
        

        

        
        <tr>
            <th scope="row"><b>Type: </b></th>
            <td style="padding-left: 4px;">
                
                    
                        
                        <p style="margin-bottom: 5px;">
                            <b>system: </b> <span><a href="http://terminology.hl7.org/6.2.0/CodeSystem-library-type.html">http://terminology.hl7.org/CodeSystem/library-type</a></span>
                        </p>
                        
                        
                        <p style="margin-bottom: 5px;">
                            <b>code: </b> <span>logic-library</span>
                        </p>
                        
                        
                    
                
                
            </td>
        </tr>
        

        

        
        <tr>
            <th scope="row"><b>Date: </b></th>
            <td style="padding-left: 4px;">2025-02-28 23:16:14+0000</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Publisher: </b></th>
            <td style="padding-left: 4px;">MITRE</td>
        </tr>
        

        

        

        

        

        

        

        

        

        

        

        

        
        <tr>
            <th scope="row"><b>Related Artifacts: </b></th>
            <td style="padding-left: 4px;">
                
                
                
                <p><b>Dependencies</b></p>
                <ul>
                  
                    <li><code>http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1</code></li>
                  
                    <li><a href="Library-CDSConnectCommonsforFHIRv401.html">CDS Connect Commons for FHIRv401version: null1.0.0)</a></li>
                  
                    <li><a href="Library-CSMCommonFunctions.html">CSM Common Functionsversion: null1.0.0)</a></li>
                  
                    <li><a href="Library-BCSMCommonFunctions.html">BCSM Common Functionsversion: null1.0.0)</a></li>
                  
                    <li><code>http://cancerscreeningcds.github.io/bcsm-cds/Library/FHIRHelpers|4.0.1</code></li>
                  
                    <li><a href="Library-Hospice.html">Hospiceversion: null1.0.0)</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-v3-loinc.html">Logical Observation Identifiers, Names and Codes (LOINC)</a></li>
                  
                    <li><a href="http://hl7.org/fhir/R4/codesystem-snomedct.html">SNOMED CT (all versions)</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-v3-rxNorm.html">RxNorm</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-ICD-9CM-procedurecodes.html">ICD-9-CM (procedure codes)</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-icd10CM.html">International Classification of Diseases, 10th Revision, Clinical Modification (ICD-10-CM)</a></li>
                  
                    <li><a href="http://hl7.org/fhir/R4/codesystem-gender-identity.html">Gender identity</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-condition-clinical.html">Condition Clinical Status Codes</a></li>
                  
                    <li><a href="http://hl7.org/fhir/R4/codesystem-administrative-gender.html">AdministrativeGender</a></li>
                  
                    <li><a href="CodeSystem-screening-observation-code-system.html">Screening Observation Code System</a></li>
                  
                    <li><a href="CodeSystem-plan-definition-action-code-system.html">Plan Definition Action Code System</a></li>
                  
                    <li><a href="CodeSystem-biopsy-result-observation-code-system.html">Biopsy Result Observation Code System</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-condition-ver-status.html">ConditionVerificationStatus</a></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.80</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1068</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1069</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1070</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1071</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1005</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1133</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1134</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.378</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.379</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.380</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.383</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.232</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.539</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.233</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.374</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.92</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.401</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.387</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.394</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.235</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</code></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584</code></li>
                  
                </ul>
                
                
                
                
                
            </td>
        </tr>
        

        
        <tr>
          <th scope="row"><b>Parameters: </b></th>
          <td style="padding-left: 4px;">
            <table class="grid-dict">
              <tr><th><b>Name</b></th><th><b>Type</b></th><th><b>Min</b></th><th><b>Max</b></th><th><b>In/Out</b></th></tr>
              
                <tr><th>encounter</th><th>string</th><th>0</th><th>1</th><th>In</th></tr>
              
                <tr><th>ObservationLookbackPeriod</th><th>Quantity</th><th>0</th><th>1</th><th>In</th></tr>
              
                <tr><th>SymptomaticLookBack</th><th>Quantity</th><th>0</th><th>1</th><th>In</th></tr>
              
                <tr><th>Measurement Period</th><th>Period</th><th>0</th><th>1</th><th>In</th></tr>
              
                <tr><th>Patient</th><th>Patient</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BirthSex</th><th>Extension</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>FemaleBirthSex</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BirthSexPresent</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>UnknownBirthSex</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BirthSexMissingOrUnknown</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FemaleGender</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>Female</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>GenderIdentityExtension</th><th>Extension</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>TransgenderMaleExtension</th><th>Extension</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>GenderIdentityObservation</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>TransgenderMaleObservation</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>TransgenderMale</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-female</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BirthSexCode</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>TransgenderFemaleExtension</th><th>Extension</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>TransgenderFemaleObservation</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>TransgenderFemale</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FemaleorTransgenderMale</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BreastCancerDiagnoses</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-breastca</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BilateralMastectomyConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BilateralMastectomyProcedures</th><th>Procedure</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BilateralMastectomy</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>LeftUnilateralMastectomyConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>LeftUnilateralMastectomyProcedures</th><th>Procedure</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>UnilateralMastectomyConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>LeftUnilateralMastectomy</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>RightUnilateralMastectomyConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>RightUnilateralMastectomyProcedures</th><th>Procedure</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>RightUnilateralMastectomy</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-mastectomy</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>NewOrWorseningBreastSymptomsObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentBreastSymptomObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BreastSymptomConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>EncounterBreastSymptomConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>AllBreastSymptomEncounters</th><th>Encounter</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>EncounterReasonBreastSymptoms</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-breastsymptoms</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>NewOrWorseningBreastFindingsObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentBreastFindingsObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-breastfindings</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ReducedLifeExpectancyObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentReducedLifeExpectancyObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-hospice</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-lifeexp</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>LactatingObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentLactatingObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>PregnancyEpisodesOfCare</th><th>EpisodeOfCare</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ActivePregnancyEpisodesOfCare</th><th>EpisodeOfCare</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>HasActivePregnancyEpisodesOfCare</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FinishedPregnancyEpisodesOfCare</th><th>EpisodeOfCare</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>HasFinishedPregnancyEpisodesOfCare</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>PregnancyDiagnoses</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>PregnancyObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>Pregnant</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentGeneticMarkerOrSyndromeObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>GeneticMarkerOrSyndromeCondition</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>GeneticMarkerOrSyndrome</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BRCA-1MutationConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BRCA-2MutationConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>Li-FraumeniSyndromeConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>CowdenSyndromeConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>Bannayan-Riley-RuvalcabaSyndromeConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-acsgeneticrisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-geneticrisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-chestxrt</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>HistoryOfChestRadiationAges10To30Observation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>HistoryOfChestRadiationAges10To30Condition</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-chestxrtage10to30</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>HistoryBreastCancerDiagnoses</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-hxbreastca</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BreastCancerWithin5YObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BreastCancerWithin5YEncounter</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BreastCancerWithin5YLookback</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-hxbreastcawithin5y</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>AtypicalBiopsyConditions</th><th>Condition</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>AllCompletedDiagnosticReport</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BiopsyObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>CompletedBreastBiopsyDiagnosticReports</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BiopsyDiagnosticReports</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>AtypicalBiopsyResults</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-atypicalbx</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentAtypicalBiopsyConditionDate</th><th>dateTime</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentAtypicalBiopsyResultDate</th><th>dateTime</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentAtypicalBiopsyDate</th><th>dateTime</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentLifetimeRiskAssessment</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentLifetimeRiskAssessmentResultHigh</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-highlifetimerisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentFirstDegRelativeGeneticObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BreastImagingObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>CompletedBreastImagingDiagnosticReports</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BreastImagingDiagnosticReports</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BreastImagingHeterogenouslyOrExtremelyDenseResults</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-breastdensitycord</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FamilialRiskAssessmentObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentFamilialRiskAssessmentObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentFamilialRiskAssessmentResult</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentFamilialRiskAssessmentResultHigh</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-fhxbreastcarisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FamilialRiskAssessmentExists</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FirstOrSecondDegreeRelatives</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>FirstOrSecondDegreeRelativesWithBreastCancer</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>FirstOrSecondDegreeRelativesWithOvarianCancer</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BreastCancerDiagnosedBefore50</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>BreastAndOvarianCancerInFamily</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BreastAndOvarianCancerInSameRelative</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>TwoIndependentBreastCancers</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MaleRelativeWithBreastCancer</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-fhxrisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FamilyGeneticHistoryAssessmentObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FamilyMemberGeneticMarkerOrSyndromeConditions</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>FamilyMemberGeneticMarkerOrSyndrome</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>de-fhxgeneinherited</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FirstDegRelativeGeneticMarkerOrSyndrome</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>KnownGeneticMarkerOrSyndromeStatusObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>de-knownvariantstatus</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentBRCAGeneAncestryObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FamilyHistoryBreastOvarianTubalPeritonealCancerObservations</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>FamilyHistoryBreastOvarianTubalPeritonealCancerObservation</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>FamilyMemberBreastOvarianTubalPeritonealCancerCondition</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>FamilyMemberBreastOvarianTubalPeritonealCancer</th><th>FamilyMemberHistory</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>GeneticCounselingEncounters</th><th>Encounter</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>GeneticCounselingReferralOrders</th><th>ServiceRequest</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecent5YrRiskAssessment</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecent5YrRiskAssessmentDate</th><th>dateTime</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>PersonalRiskFactorAssessments</th><th>Observation</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentPersonalRiskFactorAssessment</th><th>Observation</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>CompletedBreastCancerScreeningDiagnosticReports</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>MostRecentBreastImagingDiagnosticReport</th><th>DiagnosticReport</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentBreastImagingDiagnosticReportNoConclusionCodes</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ImagingDiagnosticReportsWithNoConclusionCodes</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentBreastBiopsyDiagnosticReport</th><th>DiagnosticReport</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>MostRecentBreastBiopsyDiagnosticReportNoConclusionCodes</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>BiopsyDiagnosticReportsWithNoConclusionCodes</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>IncompleteBreastBiopsyDiagnosticReports</th><th>DiagnosticReport</th><th>0</th><th>*</th><th>Out</th></tr>
              
            </table>
          </td>
        </tr>
        

        
        <tr>
          <th scope="row"><b>Data Requirements:</b></th>
          <td style="padding-left: 4px;">
            <table class="grid-dict">
              <tr><th><b>Type</b></th><th><b>Profile</b></th><th><b>MS</b></th><th><b>Code Filter</b></th></tr>
              
                <tr>
                  <th>Patient</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Patient</th>
                  <th>;;;</th>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>76691-5</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Gender identity</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>82810-3</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Pregnancy status</span>
                          </p>
                          
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>value</span>
                      </span>
                      
                      
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>GeneticMarkerOrSyndrome</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Genetic marker or syndrome associated with breast cancer</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>chestxrt</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>History of chest radiation ages 10-30 y</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>hxbreastcawithin5y</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Breast cancer within 5 years</span>
                          </p>
                          
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>encounter.reference</span>
                      </span>
                      
                      
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-plan-definition-action-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>lifetimeriskassessment</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Lifetime risk assessment</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>firstdeggenetic</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>First degree relative with genetic marker or syndrome</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-plan-definition-action-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>familialriskassessment</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Familial risk assessment</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-plan-definition-action-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>fhxrisktool</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Brief familial risk assessment tool</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>fhxgenetic</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Family history of inherited cancer susceptibility</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>KnownVariantStatus</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Known breast cancer variant status</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>brcageneancestry</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Ancestry associated with BRCA1/2 gene mutations</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>fhxbrcaovcatubalperit</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Family history of breast, ovarian, tubal, or peritoneal cancer</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-plan-definition-action-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>5yriskassessment</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>5 year risk assessment</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>PersonalRiskFactors</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Personal risk factors conferring increased risk of breast cancer</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>BreastSymptoms</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>New or worsening breast symptoms</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>BreastFindings</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>New or worsening breast exam findings</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>lifeexp</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Reduced life expectancy indicator</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>currentlylactating</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Currently lactating</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="CodeSystem-screening-observation-code-system.html">http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>hxbreastcawithin5y</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Breast cancer within 5 years</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>10193-1</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Physical findings of Breasts Narrative</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>66110-8</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Breast Pathology biopsy report</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1068</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1069</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1070</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1071</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.374</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.374</span>
                      </span>
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>encounter.reference</span>
                      </span>
                      
                      
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.80</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.378</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.379</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.380</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://browser.ihtsdotools.org/">http://snomed.info/sct</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>428850001</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Li-Fraumeni syndrome (disorder)</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://browser.ihtsdotools.org/">http://snomed.info/sct</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>58037000</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Cowden syndrome (disorder)</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://browser.ihtsdotools.org/">http://snomed.info/sct</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>234138005</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Bannayan syndrome (disorder)</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://browser.ihtsdotools.org/">http://snomed.info/sct</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>77941000119104</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>History of radiation therapy to chest</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.383</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.383</span>
                      </span>
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>clinicalStatus</span>
                      </span>
                      
                      
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367</span>
                      </span>
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>clinicalStatus</span>
                      </span>
                      
                      
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>clinicalStatus</span>
                      </span>
                      
                      
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>clinicalStatus</span>
                      </span>
                      
                      
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Procedure</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Procedure</th>
                  <th>;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1005</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Procedure</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Procedure</th>
                  <th>;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1133</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Procedure</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Procedure</th>
                  <th>;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1134</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Procedure</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Procedure</th>
                  <th>;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584</span>
                      </span>
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>status</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>completed</span>
                          </p>
                          
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Encounter</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Encounter</th>
                  <th>;;;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>type</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Encounter</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Encounter</th>
                  <th>;;;;;</th>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>ServiceRequest</th>
                  <th>http://hl7.org/fhir/StructureDefinition/ServiceRequest</th>
                  <th>;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584</span>
                      </span>
                      
                      
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>intent</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>order</span>
                          </p>
                          
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>ServiceRequest</th>
                  <th>http://hl7.org/fhir/StructureDefinition/ServiceRequest</th>
                  <th>;;</th>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>EpisodeOfCare</th>
                  <th>http://hl7.org/fhir/StructureDefinition/EpisodeOfCare</th>
                  <th>;</th>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>EpisodeOfCare</th>
                  <th>http://hl7.org/fhir/StructureDefinition/EpisodeOfCare</th>
                  <th>;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>status</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>active</span>
                          </p>
                          
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>EpisodeOfCare</th>
                  <th>http://hl7.org/fhir/StructureDefinition/EpisodeOfCare</th>
                  <th>;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>status</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>finished</span>
                          </p>
                          
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>DiagnosticReport</th>
                  <th>http://hl7.org/fhir/StructureDefinition/DiagnosticReport</th>
                  <th>;;;</th>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>DiagnosticReport</th>
                  <th>http://hl7.org/fhir/StructureDefinition/DiagnosticReport</th>
                  <th>;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.394</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>DiagnosticReport</th>
                  <th>http://hl7.org/fhir/StructureDefinition/DiagnosticReport</th>
                  <th>;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>66110-8</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Breast Pathology biopsy report</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>FamilyMemberHistory</th>
                  <th>http://hl7.org/fhir/StructureDefinition/FamilyMemberHistory</th>
                  <th>;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>condition.code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.232</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>FamilyMemberHistory</th>
                  <th>http://hl7.org/fhir/StructureDefinition/FamilyMemberHistory</th>
                  <th>;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>condition.code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>FamilyMemberHistory</th>
                  <th>http://hl7.org/fhir/StructureDefinition/FamilyMemberHistory</th>
                  <th>;;</th>
                  <th>
                    
                  </th>
                </tr>
              
            </table>
          </td>
        </tr>
        

        
        
        <tr>
          <td colspan="2">
            <table>
              <tr><th><a id="cql-content"><b>Content: </b></a> text/cql</th></tr>
              <tr><td><pre><code class="language-cql">/*  
  Author: CMS Alliance to Modernize Healthcare, operated by THE MITRE Corporation.

  (C) 2024 The MITRE Corporation. All Rights Reserved. 
  Approved for Public Release: 24-2711. 
  Distribution Unlimited.

  Unless otherwise noted, this work is available under an Apache 2.0 license. 
  It was produced by the MITRE Corporation for the Division of Cancer Prevention 
  and Control, Centers for Disease Control and Prevention in accordance with the 
  Statement of Work, contract number 75FCMC18D0047, task order number 75D30123F17931.
*/

library DataElements version '1.0.0'

using FHIR version '4.0.1'

include CDSConnectCommonsforFHIRv401 version '1.0.0' called C3F
include CSMCommonFunctions version '1.0.0' called Common
include BCSMCommonFunctions version '1.0.0' called BCSMCommon
include FHIRHelpers  version '4.0.1' called FHIRHelpers
include Hospice version '1.0.0' 

//------------------------------------------------------------------------------
// CODE SYSTEMS, VALUE SETS, AND CODES
//------------------------------------------------------------------------------

codesystem &quot;LOINC&quot;: 'http://loinc.org'
codesystem &quot;SNOMED-CT&quot;: 'http://snomed.info/sct'
codesystem &quot;RXNORM&quot;: 'http://www.nlm.nih.gov/research/umls/rxnorm'
codesystem &quot;ICD-9&quot;: 'http://hl7.org/fhir/sid/icd-9-cm'
codesystem &quot;ICD-10&quot;: 'http://hl7.org/fhir/sid/icd-10-cm'
codesystem &quot;GENDER-IDENTITY&quot;: 'http://hl7.org/fhir/gender-identity'
codesystem &quot;CONDCLINSTATUS&quot;: 'http://terminology.hl7.org/CodeSystem/condition-clinical'
codesystem &quot;AdministrativeGender&quot;: 'http://hl7.org/fhir/administrative-gender'
codesystem &quot;LOCAL&quot;: 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system'
codesystem &quot;ActCode&quot;: 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system'
codesystem &quot;BiopsyResultCS&quot;: 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/biopsy-result-observation-code-system'

code &quot;Condition inactive&quot;: 'inactive' from &quot;CONDCLINSTATUS&quot; display 'inactive'
code &quot;Condition remission&quot;: 'remission' from &quot;CONDCLINSTATUS&quot; display 'remission'
code &quot;Condition resolved&quot;: 'resolved' from &quot;CONDCLINSTATUS&quot; display 'resolved'
code &quot;Condition active&quot;: 'active' from &quot;CONDCLINSTATUS&quot; display 'active'

// Pregnancy
valueset &quot;Pregnancy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378'
valueset &quot;Pregnancy (New ICD10 codes published in 2018 and 2020)&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.80'
// Breast diagnoses, procedures, and observations
valueset &quot;Breast Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367' // TODO clinical validation: Keep secondary cancers?
valueset &quot;Bilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1068'
valueset &quot;Left Unilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1069'
valueset &quot;Right Unilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1070'
valueset &quot;Unilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1071'
valueset &quot;Bilateral Mastectomy Procedure&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1005'
valueset &quot;Left Unilateral Mastectomy Procedure&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1133'
valueset &quot;Right Unilateral Mastectomy Procedure&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1134'
valueset &quot;Genetic Marker of Susceptibility to Breast Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.378'
valueset &quot;BRCA1 Gene Mutation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.379' // TODO clinical validation: keep weird codes referencing specific BRCA mutations?
valueset &quot;BRCA2 Gene Mutation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.380' // TODO clinical validation: keep weird codes referencing specific BRCA mutations?
valueset &quot;History of Breast Cancer or Breast Cancer in Remission&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.383' // TODO clinical validation: include codes for partial remission?
valueset &quot;Biopsy Atypical Results&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392' // TODO clinical validation: Keep &quot;generic&quot; ICD-10-CM codes under which atypical hyperplasia is classified (but which are not specific to atypical hyperplasia)? Decided against it for similar situations in CRC.
valueset &quot;Ovarian Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.232'
valueset &quot;Tubal Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.539'
valueset &quot;Peritoneal Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.233'
valueset &quot;Breast Cancer Signs and Symptoms&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.374' // TODO clinical validation: check for overall accuracy.
valueset &quot;First Degree Family Member&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.92'
valueset &quot;Second Degree Family Member&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.401' // TODO clinical validation: keep cousins (could be second cousins according to definition)?
valueset &quot;Breast Cancer Biopsy Orders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.387' //TODO: add CPT, HCPCS, ICD-10-PCS. TODO clinical validation: check for overall accuracy.
valueset &quot;Breast Cancer Imaging Orders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.394' //TODO: add CPT, HCPCS, ICD-10-PCS. TODO clinical validation: Keep SNOMED codes for core compression, magnification and localization mammography? Keep mammary ductograms? Keep doppler US?
// TODO: replace placeholder value set OID
valueset &quot;GENETIC COUNSELING&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.235' 

// Standard codes
code &quot;Male&quot;: 'male' from &quot;AdministrativeGender&quot; display 'Male'
code &quot;Gender Identity&quot;: '76691-5' from &quot;LOINC&quot; display 'Gender identity'
code &quot;Transgender Male Code&quot;: 'transgender-male' from &quot;GENDER-IDENTITY&quot; display 'transgender male'
code &quot;Transgender Female Code&quot;: 'transgender-female' from &quot;GENDER-IDENTITY&quot; display 'transgender female'
code &quot;Female-to-male Transsexual&quot;: '407377005' from &quot;SNOMED-CT&quot; display 'Female-to-male transsexual (finding)'
code &quot;Male-to-female Transsexual&quot;: '407376001' from &quot;SNOMED-CT&quot; display 'Male-to-female transsexual (finding)'
code &quot;Left (qualifier value)&quot;: '7771000' from &quot;SNOMED-CT&quot; display 'Left (qualifier value)'
code &quot;Right (qualifier value)&quot;: '24028007' from &quot;SNOMED-CT&quot; display 'Right (qualifier value)'
code &quot;History of radiation therapy to chest&quot;: '77941000119104' from &quot;SNOMED-CT&quot; display 'History of radiation therapy to chest'
code &quot;Breast Pathology biopsy report&quot;: '66110-8' from &quot;LOINC&quot; display 'Breast Pathology biopsy report'
code &quot;Breast Imaging Report&quot;: '10193-1' from &quot;LOINC&quot; display 'Physical findings of Breasts Narrative' // Consider replacing with &quot;Breast Screening Cancer Imaging Orders&quot; value set when using to identify DiagnosticReport resources. All but a couple of the LOINC codes included can be used for both orders and observations/results.
code &quot;Heterogeneously dense&quot;: '129718006' from &quot;SNOMED-CT&quot; display 'Heterogeneously dense breast composition'
code &quot;Extremely dense&quot;: '129719003' from &quot;SNOMED-CT&quot; display 'Extremely dense breast composition'
code &quot;Pregnancy Status&quot;: '82810-3' from &quot;LOINC&quot; display 'Pregnancy status'
code &quot;Patient currently pregnant&quot;: '77386006' from &quot;SNOMED-CT&quot; display 'Patient currently pregnant (finding)'
code &quot;Pregnancy Episode Of Care&quot;: '424525001' from &quot;SNOMED-CT&quot; display 'Antenatal care (regime/therapy)'

// Non-standard codes
code &quot;Breast cancer within 5 years&quot;: 'hxbreastcawithin5y' from &quot;LOCAL&quot; display 'Breast cancer within 5 years'
code &quot;New or worsening breast symptoms&quot;: 'BreastSymptoms' from &quot;LOCAL&quot; display 'New or worsening breast symptoms'
code &quot;New or worsening breast exam findings&quot;: 'BreastFindings' from &quot;LOCAL&quot; display 'New or worsening breast exam findings'
code &quot;Reduced life expectancy indicator&quot;: 'lifeexp' from &quot;LOCAL&quot; display 'Reduced life expectancy indicator'
code &quot;Currently lactating&quot;: 'currentlylactating' from &quot;LOCAL&quot; display 'Currently lactating'
code &quot;Genetic marker or syndrome associated with breast cancer&quot;: 'GeneticMarkerOrSyndrome' from &quot;LOCAL&quot; display 'Genetic marker or syndrome associated with breast cancer'
code &quot;Li-Fraumeni Syndrome&quot;: '428850001' from &quot;SNOMED-CT&quot; display 'Li-Fraumeni syndrome (disorder)'
code &quot;Cowden Syndrome&quot;: '58037000' from &quot;SNOMED-CT&quot; display 'Cowden syndrome (disorder)'
code &quot;Bannayan-Riley-Ruvalcaba Syndrome&quot;: '234138005' from &quot;SNOMED-CT&quot; display 'Bannayan syndrome (disorder)'
code &quot;History of chest radiation ages 10-30 y&quot;: 'chestxrt' from &quot;LOCAL&quot; display 'History of chest radiation ages 10-30 y'
code &quot;Lifetime risk assessment&quot;: 'lifetimeriskassessment' from &quot;ActCode&quot; display 'Lifetime risk assessment'
code &quot;High lifetime risk&quot;: 'highlifetimerisk' from &quot;LOCAL&quot; display 'High lifetime risk'
code &quot;First degree relative with genetic marker or syndrome&quot;: 'firstdeggenetic' from &quot;LOCAL&quot; display 'First degree relative with genetic marker or syndrome'
code &quot;Family history of inherited cancer susceptibility&quot;: 'fhxgenetic' from &quot;LOCAL&quot; display 'Family history of inherited cancer susceptibility'
code &quot;Ancestry associated with BRCA1/2 gene mutations&quot;: 'brcageneancestry' from &quot;LOCAL&quot; display 'Ancestry associated with BRCA1/2 gene mutations'
code &quot;Familial risk assessment&quot;: 'familialriskassessment' from &quot;ActCode&quot; display 'Familial risk assessment'
code &quot;Brief familial risk assessment tool&quot;: 'fhxrisktool' from &quot;ActCode&quot; display 'Brief familial risk assessment tool'
code &quot;Informal familial risk assessment&quot;: 'fhxriskassess' from &quot;ActCode&quot; display 'Informal familial risk assessment'
code &quot;High familial risk&quot;: 'highfamilialrisk' from &quot;LOCAL&quot; display 'High familial risk'
code &quot;Known breast cancer variant status&quot;: 'KnownVariantStatus' from &quot;LOCAL&quot; display 'Known breast cancer variant status'
code &quot;Family history of breast, ovarian, tubal, or peritoneal cancer&quot;: 'fhxbrcaovcatubalperit' from &quot;LOCAL&quot; display 'Family history of breast, ovarian, tubal, or peritoneal cancer'
code &quot;5 year risk assessment&quot;: '5yriskassessment' from &quot;ActCode&quot; display '5 year risk assessment'
code &quot;Personal risk factors conferring increased risk of breast cancer&quot;: 'PersonalRiskFactors' from &quot;LOCAL&quot; display 'Personal risk factors conferring increased risk of breast cancer'
code &quot;Atypical&quot;: 'Atypical' from BiopsyResultCS display 'Atypical breast finding'

//------------------------------------------------------------------------------
// PARAMETERS
//------------------------------------------------------------------------------

parameter encounter String default null
parameter ObservationLookbackPeriod default 14 days
parameter SymptomaticLookBack default 1 days

/***** BEGIN CDS LOGIC ********************************************************/

context Patient   

//------------------------------------------------------------------------------
// Assigned female at birth
//------------------------------------------------------------------------------

define &quot;de-female&quot;:
  Female or TransgenderMale
    
define BirthSex:
  (Patient.extension) E
    where E.url = 'http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex'

define BirthSexPresent:
  Exists(BirthSex)

define FemaleBirthSex:
  Exists(
    (BirthSex) E
      where E.value = 'F'
  )

define UnknownBirthSex:
  exists(
    (BirthSex) E
      where (
        E.value = 'ASKU' or
        E.value = 'OTH' or
        E.value = 'UNK'
      )
  )

define BirthSexMissingOrUnknown:
  not BirthSexPresent or
  UnknownBirthSex

define BirthSexCode:
  if BirthSexMissingOrUnknown then 'Unknown'
  else Coalesce(BirthSex.value.value)

define FemaleGender:
  Patient.gender.value = 'female'

define Female:
  FemaleBirthSex or
  (BirthSexMissingOrUnknown and FemaleGender)

define GenderIdentityExtension:
  (Patient.extension) E
    where
      E.url = 'http://hl7.org/fhir/StructureDefinition/patient-genderIdentity' or
      E.url = 'http://hl7.org/fhir/us/core/StructureDefinition/us-core-genderIdentity'

define TransgenderMaleExtension:
  (GenderIdentityExtension) E
    where
      E.value as FHIR.CodeableConcept ~ &quot;Transgender Male Code&quot; or
      E.value as FHIR.CodeableConcept ~ &quot;Female-to-male Transsexual&quot;

define TransgenderFemaleExtension:
  (GenderIdentityExtension) E
    where
      E.value as FHIR.CodeableConcept ~ &quot;Transgender Female Code&quot; or
      E.value as FHIR.CodeableConcept ~ &quot;Male-to-female Transsexual&quot;      

define GenderIdentityObservation:
  [Observation: &quot;Gender Identity&quot;]

define TransgenderMaleObservation:
  (GenderIdentityObservation) O
  where O.value as FHIR.CodeableConcept ~ &quot;Transgender Male Code&quot;
  or O.value as FHIR.CodeableConcept ~ &quot;Female-to-male Transsexual&quot;

define TransgenderFemaleObservation:
  (GenderIdentityObservation) O
    where O.value as FHIR.CodeableConcept ~ &quot;Transgender Female Code&quot;
    or O.value as FHIR.CodeableConcept ~ &quot;Male-to-female Transsexual&quot;    

define TransgenderMale:
  Exists(TransgenderMaleExtension) or Exists(TransgenderMaleObservation)

define TransgenderFemale:
  Exists(TransgenderFemaleExtension) or Exists(TransgenderFemaleObservation)  

define FemaleorTransgenderMale:
  Female or TransgenderMale

//------------------------------------------------------------------------------
// Current breast cancer
//------------------------------------------------------------------------------

define &quot;de-breastca&quot;:
  BreastCancerDiagnoses C
    where C.clinicalStatus !~ &quot;Condition inactive&quot;
      and C.clinicalStatus !~ &quot;Condition remission&quot;
      and C.clinicalStatus !~ &quot;Condition resolved&quot;

define BreastCancerDiagnoses:
  Common.ValidCondition([Condition: &quot;Breast Cancer&quot;])

//------------------------------------------------------------------------------
// History of bilateral mastectomy
//------------------------------------------------------------------------------

define &quot;de-mastectomy&quot;:
  BilateralMastectomy or (LeftUnilateralMastectomy and RightUnilateralMastectomy)

define BilateralMastectomy:
  exists BilateralMastectomyConditions or 
  exists BilateralMastectomyProcedures

define LeftUnilateralMastectomy:
  exists LeftUnilateralMastectomyConditions or
  exists LeftUnilateralMastectomyProcedures or
  exists UnilateralMastectomyConditions C
    where
      exists C.bodySite bs where bs ~ &quot;Left (qualifier value)&quot; or
      exists (C.bodySite.extension E
        where E.url = 'http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality-qualifier'
          and E.value as CodeableConcept ~ &quot;Left (qualifier value)&quot;)           

define RightUnilateralMastectomy:
  exists RightUnilateralMastectomyConditions or
  exists RightUnilateralMastectomyProcedures or 
  exists UnilateralMastectomyConditions C
    where
      exists C.bodySite bs where bs ~ &quot;Right (qualifier value)&quot; or
      exists (C.bodySite.extension E
        where E.url = 'http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality-qualifier'
          and E.value as CodeableConcept ~ &quot;Right (qualifier value)&quot;)

define BilateralMastectomyConditions:
  Common.ValidCondition([Condition: &quot;Bilateral Mastectomy&quot;])     

define LeftUnilateralMastectomyConditions:
  Common.ValidCondition([Condition: &quot;Left Unilateral Mastectomy&quot;])

define RightUnilateralMastectomyConditions:
  Common.ValidCondition([Condition: &quot;Right Unilateral Mastectomy&quot;])  

define UnilateralMastectomyConditions:
  Common.ValidCondition([Condition: &quot;Unilateral Mastectomy&quot;])      

define BilateralMastectomyProcedures:
  C3F.Completed([Procedure: &quot;Bilateral Mastectomy Procedure&quot;])

define LeftUnilateralMastectomyProcedures:
  C3F.Completed([Procedure: &quot;Left Unilateral Mastectomy Procedure&quot;])

define RightUnilateralMastectomyProcedures:
  C3F.Completed([Procedure: &quot;Right Unilateral Mastectomy Procedure&quot;])

//------------------------------------------------------------------------------
// Breast symptoms
//------------------------------------------------------------------------------

define &quot;de-breastsymptoms&quot;:
  if MostRecentBreastSymptomObservation is not null 
    then FHIRHelpers.ToBoolean(MostRecentBreastSymptomObservation.value as boolean)
  else  
    exists EncounterBreastSymptomConditions or EncounterReasonBreastSymptoms

define EncounterReasonBreastSymptoms:
  encounter is not null and 
    exists AllBreastSymptomEncounters E where encounter = 'Encounter/' + E.id

define AllBreastSymptomEncounters:
  Common.RelevantEncounterStatus(
    [Encounter] E
      where
        E.reasonCode in &quot;Breast Cancer Signs and Symptoms&quot;      
  )

define EncounterBreastSymptomConditions:
  BreastSymptomConditions C
    where C.encounter.reference = encounter

define BreastSymptomConditions:
  Common.ValidCondition([Condition: &quot;Breast Cancer Signs and Symptoms&quot;])

define MostRecentBreastSymptomObservation:
  BCSMCommon.MostRecentLocalObservation(NewOrWorseningBreastSymptomsObservations,
    encounter, SymptomaticLookBack)

define NewOrWorseningBreastSymptomsObservations:
  [Observation: &quot;New or worsening breast symptoms&quot;]

//------------------------------------------------------------------------------
// Breast exam findings
//------------------------------------------------------------------------------

define &quot;de-breastfindings&quot;:
  if MostRecentBreastFindingsObservation is not null 
    then FHIRHelpers.ToBoolean(MostRecentBreastFindingsObservation.value as boolean)
  else false

define MostRecentBreastFindingsObservation:
  BCSMCommon.MostRecentLocalObservation(NewOrWorseningBreastFindingsObservations,
    encounter, SymptomaticLookBack)

define NewOrWorseningBreastFindingsObservations:
  [Observation: &quot;New or worsening breast exam findings&quot;]

//------------------------------------------------------------------------------
// Life expectancy
//------------------------------------------------------------------------------

define &quot;de-lifeexp&quot;:
  if MostRecentReducedLifeExpectancyObservation is not null 
    then FHIRHelpers.ToBoolean(MostRecentReducedLifeExpectancyObservation.value as boolean) 
  else &quot;de-hospice&quot;

define MostRecentReducedLifeExpectancyObservation:
  BCSMCommon.MostRecentLocalObservation(ReducedLifeExpectancyObservations, encounter, ObservationLookbackPeriod)

define ReducedLifeExpectancyObservations:  
  [Observation: &quot;Reduced life expectancy indicator&quot;]

define &quot;de-hospice&quot;:
  Hospice.&quot;Has Hospice&quot;

//------------------------------------------------------------------------------
// Lactating
//------------------------------------------------------------------------------

define MostRecentLactatingObservation:
  BCSMCommon.MostRecentLocalObservation(LactatingObservations, encounter, ObservationLookbackPeriod)

define LactatingObservations:
  [Observation: &quot;Currently lactating&quot;]

//------------------------------------------------------------------------------
// Pregnancy
//------------------------------------------------------------------------------

define Pregnant:
  // IF any Epsidose of care with status = active
  //    Pregnant = true
  // If any Episode of care with status = finished
  //    Pregnant = false
  // Use existing logic with conditions and observations
  if (HasActivePregnancyEpisodesOfCare) then
    true
  else if (HasFinishedPregnancyEpisodesOfCare) then
    false
  else
    Exists(PregnancyDiagnoses) or Exists(PregnancyObservations)

define PregnancyDiagnoses:
  C3F.Confirmed(
    C3F.ActiveCondition(
      C3F.ConditionLookBack(
        [Condition: &quot;Pregnancy&quot;] union [Condition: &quot;Pregnancy (New ICD10 codes published in 2018 and 2020)&quot;],
        42 weeks
      )
    )
  )

define PregnancyObservations:
  C3F.ObservationLookBack(
    C3F.Verified(
      [Observation: &quot;Pregnancy Status&quot;] P
        where P.value ~ &quot;Patient currently pregnant&quot;
    ),
    42 weeks
  )  

define PregnancyEpisodesOfCare:
  [EpisodeOfCare] E where
    AnyTrue(
      (E.type) t
        return t ~ &quot;Pregnancy Episode Of Care&quot;
    )

define ActivePregnancyEpisodesOfCare:
  PregnancyEpisodesOfCare P
  where P.status ~ 'active'

define FinishedPregnancyEpisodesOfCare:
  PregnancyEpisodesOfCare P
  where P.status ~ 'finished'

define HasActivePregnancyEpisodesOfCare:
  Exists(ActivePregnancyEpisodesOfCare)

define HasFinishedPregnancyEpisodesOfCare:
  Exists(FinishedPregnancyEpisodesOfCare)  

//------------------------------------------------------------------------------
// Genetic syndrome
//------------------------------------------------------------------------------

define &quot;de-geneticrisk&quot;:
  if MostRecentGeneticMarkerOrSyndromeObservation is not null
    then FHIRHelpers.ToBoolean(MostRecentGeneticMarkerOrSyndromeObservation.value as boolean) 
  else GeneticMarkerOrSyndrome is true or &quot;de-acsgeneticrisk&quot;

define GeneticMarkerOrSyndrome:
  MostRecentGeneticMarkerOrSyndromeObservation.value is true
    or exists GeneticMarkerOrSyndromeCondition

define MostRecentGeneticMarkerOrSyndromeObservation:
  C3F.MostRecent(
    [Observation: &quot;Genetic marker or syndrome associated with breast cancer&quot;]
  )

define GeneticMarkerOrSyndromeCondition:
  C3F.ActiveCondition(
    [Condition: &quot;Genetic Marker of Susceptibility to Breast Cancer&quot;]
  )  

define &quot;de-acsgeneticrisk&quot;:
  exists &quot;BRCA-1MutationConditions&quot; or exists &quot;BRCA-2MutationConditions&quot; or
    exists &quot;Li-FraumeniSyndromeConditions&quot; or exists CowdenSyndromeConditions or
    exists &quot;Bannayan-Riley-RuvalcabaSyndromeConditions&quot;

define &quot;BRCA-1MutationConditions&quot;:
  Common.ValidCondition([Condition: &quot;BRCA1 Gene Mutation&quot;])

define &quot;BRCA-2MutationConditions&quot;:
  Common.ValidCondition([Condition: &quot;BRCA2 Gene Mutation&quot;])

define &quot;Li-FraumeniSyndromeConditions&quot;:
  Common.ValidCondition([Condition: &quot;Li-Fraumeni Syndrome&quot;])

define CowdenSyndromeConditions:
  Common.ValidCondition([Condition: &quot;Cowden Syndrome&quot;])

define &quot;Bannayan-Riley-RuvalcabaSyndromeConditions&quot;:
  Common.ValidCondition([Condition: &quot;Bannayan-Riley-Ruvalcaba Syndrome&quot;])

//------------------------------------------------------------------------------
// Chest XRT
//------------------------------------------------------------------------------

define &quot;de-chestxrt&quot;:
  Common.ValidCondition([Condition: &quot;History of radiation therapy to chest&quot;])

define &quot;de-chestxrtage10to30&quot;:
  if HistoryOfChestRadiationAges10To30Observation is not null
    then FHIRHelpers.ToBoolean(HistoryOfChestRadiationAges10To30Observation.value as boolean) 
  else exists HistoryOfChestRadiationAges10To30Condition

define HistoryOfChestRadiationAges10To30Condition:    
  &quot;de-chestxrt&quot; C 
    where C.onset as Age is not null and C.onset.value &gt;= 10 and C.onset.value &lt;= 30 and C.onset.code = 'a'
    or C.abatement as Age is not null and C.abatement.value &gt;= 10 and C.abatement.value &lt;= 30 and C.abatement.code = 'a' 

define HistoryOfChestRadiationAges10To30Observation:
  C3F.MostRecent([Observation: &quot;History of chest radiation ages 10-30 y&quot;])

//------------------------------------------------------------------------------
// Previous breast cancer
//------------------------------------------------------------------------------

define &quot;de-hxbreastca&quot;:
  (BreastCancerDiagnoses C
    where C.clinicalStatus ~ &quot;Condition inactive&quot;
      or C.clinicalStatus ~ &quot;Condition remission&quot;
      or C.clinicalStatus ~ &quot;Condition resolved&quot;
  )
  union
  (HistoryBreastCancerDiagnoses C
    where C.clinicalStatus ~ &quot;Condition active&quot;
  )
  
define HistoryBreastCancerDiagnoses:
  Common.ValidCondition([Condition: &quot;History of Breast Cancer or Breast Cancer in Remission&quot;])

//------------------------------------------------------------------------------
// Breast cancer onset within 5 years
//------------------------------------------------------------------------------

define &quot;de-hxbreastcawithin5y&quot;:
  Coalesce(
    BreastCancerWithin5YEncounter.value as boolean,
    BreastCancerWithin5YLookback.value as boolean,
    (exists &quot;de-breastca&quot; C where Today() before (C.onset as FHIR.dateTime) + 5 years) or
    (exists &quot;de-hxbreastca&quot; P where Today() before (P.onset as FHIR.dateTime) + 5 years)
  ) 

define BreastCancerWithin5YEncounter:
  C3F.MostRecent(BreastCancerWithin5YObservations O where O.encounter.reference = encounter)

define BreastCancerWithin5YLookback:
  C3F.MostRecent(
    C3F.ObservationLookBack(
      BreastCancerWithin5YObservations,
      ObservationLookbackPeriod
    ) 
  )

define BreastCancerWithin5YObservations:
  [Observation: &quot;Breast cancer within 5 years&quot;]    

//------------------------------------------------------------------------------
// Atypical biopsy
//------------------------------------------------------------------------------      

define &quot;de-atypicalbx&quot;:
  exists AtypicalBiopsyConditions or
    exists AtypicalBiopsyResults

define MostRecentAtypicalBiopsyDate:
  if MostRecentAtypicalBiopsyConditionDate is null then MostRecentAtypicalBiopsyResultDate
  else if MostRecentAtypicalBiopsyResultDate is null then MostRecentAtypicalBiopsyConditionDate
  else Last(({MostRecentAtypicalBiopsyConditionDate, MostRecentAtypicalBiopsyResultDate}) E sort asc)

define MostRecentAtypicalBiopsyConditionDate:
  Common.ConditionDate(
    C3F.MostRecentCondition(AtypicalBiopsyConditions)
  )

define AtypicalBiopsyConditions:
  Common.ValidCondition([Condition: &quot;Biopsy Atypical Results&quot;])

define MostRecentAtypicalBiopsyResultDate:
  Common.DiagnosticReportDate(
    Common.MostRecentDiagnosticReport(AtypicalBiopsyResults)
  )

define AtypicalBiopsyResults:
  BiopsyDiagnosticReports D
    let cC: BCSMCommon.CollateConclusionCodes(D,BiopsyObservations)
    where cC in &quot;Biopsy Atypical Results&quot; 
      or Exists(cC.coding c where c ~ Atypical)

//------------------------------------------------------------------------------
// High lifetime risk
//------------------------------------------------------------------------------   

define &quot;de-highlifetimerisk&quot;:
  MostRecentLifetimeRiskAssessmentResultHigh is not null

define MostRecentLifetimeRiskAssessmentResultHigh:
  MostRecentLifetimeRiskAssessment R where 
    R.value as FHIR.Quantity is not null and C3F.QuantityValue(R).value &gt;20 or
    R.value as FHIR.CodeableConcept is not null and C3F.ConceptValue(R) ~ &quot;High lifetime risk&quot;

define MostRecentLifetimeRiskAssessment:
  C3F.MostRecent([Observation: &quot;Lifetime risk assessment&quot;])

//------------------------------------------------------------------------------
// First degree relative with genetic marker or syndrome
//------------------------------------------------------------------------------  

define &quot;MostRecentFirstDegRelativeGeneticObservation&quot;:
  C3F.MostRecent(
      [Observation: &quot;First degree relative with genetic marker or syndrome&quot;]
  ) 

//------------------------------------------------------------------------------
// BI-RADS breast density category C or D
//------------------------------------------------------------------------------  

define &quot;de-breastdensitycord&quot;:  
  exists BreastImagingHeterogenouslyOrExtremelyDenseResults

define BreastImagingHeterogenouslyOrExtremelyDenseResults:
  BreastImagingDiagnosticReports D
    let cC: BCSMCommon.CollateConclusionCodes(D,BreastImagingObservations)
    where exists(cC.coding C where FHIRHelpers.ToCode(C) ~ &quot;Heterogeneously dense&quot;) 
      or exists (cC.coding C where FHIRHelpers.ToCode(C) ~ &quot;Extremely dense&quot;)

//------------------------------------------------------------------------------
// Compelling family history of breast cancer
//------------------------------------------------------------------------------  

define &quot;de-fhxbreastcarisk&quot;:
  if MostRecentFamilialRiskAssessmentObservation is not null
    then FHIRHelpers.ToBoolean(MostRecentFamilialRiskAssessmentObservation.value as boolean) 
  else MostRecentFamilialRiskAssessmentResultHigh is not null

define FamilialRiskAssessmentExists:
  MostRecentFamilialRiskAssessmentObservation is not null or 
    MostRecentFamilialRiskAssessmentResult is not null

define MostRecentFamilialRiskAssessmentObservation:  
  C3F.MostRecent(FamilialRiskAssessmentObservations)

define FamilialRiskAssessmentObservations:  
  [Observation: &quot;Familial risk assessment&quot;] R    

// Output of validated brief familial risk assessment tool is positive or greater than 5%
define MostRecentFamilialRiskAssessmentResultHigh:
  MostRecentFamilialRiskAssessmentResult R where 
    R.value as FHIR.Quantity is not null and C3F.QuantityValue(R).value &gt;5 or
    R.value as FHIR.CodeableConcept is not null and C3F.ConceptValue(R) ~ &quot;High familial risk&quot;

define MostRecentFamilialRiskAssessmentResult:
  C3F.MostRecent([Observation: &quot;Brief familial risk assessment tool&quot;])

// 'Informal familial risk criteria' exist
define &quot;de-fhxrisk&quot;:
  Count(FirstOrSecondDegreeRelativesWithBreastCancer) &gt;= 2
  or Count(FirstOrSecondDegreeRelativesWithOvarianCancer) &gt;= 2
  or exists (BreastCancerDiagnosedBefore50)
  or BreastAndOvarianCancerInFamily
  or exists (BreastAndOvarianCancerInSameRelative)
  or exists (TwoIndependentBreastCancers)
  or exists (MaleRelativeWithBreastCancer) 

define &quot;FirstOrSecondDegreeRelativesWithBreastCancer&quot;:
  FirstOrSecondDegreeRelatives F
    where exists F.condition C where C.code in &quot;Breast Cancer&quot;

define &quot;FirstOrSecondDegreeRelativesWithOvarianCancer&quot;:
  FirstOrSecondDegreeRelatives F
    where exists F.condition C where C.code in &quot;Ovarian Cancer&quot;

define &quot;BreastCancerDiagnosedBefore50&quot;:
  FirstOrSecondDegreeRelatives F
    where exists (F.condition C where C.code in &quot;Breast Cancer&quot;
      and C.onset as Age &lt;= 50 years)

define &quot;BreastAndOvarianCancerInFamily&quot;:
  exists (FirstOrSecondDegreeRelativesWithBreastCancer)
    and exists (FirstOrSecondDegreeRelativesWithOvarianCancer)

define &quot;BreastAndOvarianCancerInSameRelative&quot;:
  FirstOrSecondDegreeRelatives F
    where exists F.condition C1 where C1.code in &quot;Breast Cancer&quot;
      and exists F.condition C2 where C2.code in &quot;Ovarian Cancer&quot;

// TODO: do we need to consider two independent conditions with the same code but different onsets?
define &quot;TwoIndependentBreastCancers&quot;:
  FirstOrSecondDegreeRelatives F
    where exists F.condition C1 where C1.code in &quot;Breast Cancer&quot;
      and exists F.condition C2 where C2.code in &quot;Breast Cancer&quot;
        and C1 != C2

define &quot;MaleRelativeWithBreastCancer&quot;:
  FirstOrSecondDegreeRelatives F
    where exists F.condition C where C.code in &quot;Breast Cancer&quot;
      and F.sex ~ &quot;Male&quot;

define &quot;FirstOrSecondDegreeRelatives&quot;:
  [FamilyMemberHistory] F
    where F.relationship in &quot;First Degree Family Member&quot; or F.relationship in &quot;Second Degree Family Member&quot;

//------------------------------------------------------------------------------
// Family history of inherited cancer susceptibility
//------------------------------------------------------------------------------  

define &quot;de-fhxgeneinherited&quot;:
  if FamilyGeneticHistoryAssessmentObservation is not null
    then FHIRHelpers.ToBoolean(FamilyGeneticHistoryAssessmentObservation.value as boolean) 
  else exists FamilyMemberGeneticMarkerOrSyndrome

define FamilyGeneticHistoryAssessmentObservation:  
  C3F.MostRecent(
      [Observation: &quot;Family history of inherited cancer susceptibility&quot;] R
  )

define &quot;FirstDegRelativeGeneticMarkerOrSyndrome&quot;:
  FamilyMemberGeneticMarkerOrSyndrome F
    where 
      F.relationship in &quot;First Degree Family Member&quot;

define &quot;FamilyMemberGeneticMarkerOrSyndrome&quot;:
  FamilyMemberGeneticMarkerOrSyndromeConditions F
    return F.familyMemberHistory

define &quot;FamilyMemberGeneticMarkerOrSyndromeConditions&quot;:
  [FamilyMemberHistory] F
    let
      GeneticConditions: F.condition C
        where
          C.code in &quot;Genetic Marker of Susceptibility to Breast Cancer&quot; or         
          C.code in &quot;BRCA1 Gene Mutation&quot; or 
          C.code in &quot;BRCA2 Gene Mutation&quot; or
          C.code ~ &quot;Li-Fraumeni Syndrome&quot; or 
          C.code ~ &quot;Cowden Syndrome&quot; or
          C.code ~ &quot;Bannayan-Riley-Ruvalcaba Syndrome&quot;
    where exists GeneticConditions
    return {
      familyMemberHistory: F,
      conditions: GeneticConditions
    }

//------------------------------------------------------------------------------
// Unknown variant status
//------------------------------------------------------------------------------  

define &quot;de-knownvariantstatus&quot;:
  if KnownGeneticMarkerOrSyndromeStatusObservation is not null
    then FHIRHelpers.ToBoolean(KnownGeneticMarkerOrSyndromeStatusObservation.value as boolean) 
  else false

define KnownGeneticMarkerOrSyndromeStatusObservation:  
  C3F.MostRecent(
      [Observation: &quot;Known breast cancer variant status&quot;] R
  ) 

// TODO: check for BRCA1 and BRCA2 DiagnosticReports with conclusion code and/or associated observations?

//------------------------------------------------------------------------------
// BRCA ancestry
//------------------------------------------------------------------------------ 

define &quot;MostRecentBRCAGeneAncestryObservation&quot;:
  C3F.MostRecent(
      [Observation: &quot;Ancestry associated with BRCA1/2 gene mutations&quot;] R
  )

//------------------------------------------------------------------------------
// Family history of breast, ovarian, tubal, or peritoneal cancer
//------------------------------------------------------------------------------  

define FamilyHistoryBreastOvarianTubalPeritonealCancerObservation:  
  C3F.MostRecent(FamilyHistoryBreastOvarianTubalPeritonealCancerObservations)

define FamilyHistoryBreastOvarianTubalPeritonealCancerObservations:  
  [Observation: &quot;Family history of breast, ovarian, tubal, or peritoneal cancer&quot;]  

define &quot;FamilyMemberBreastOvarianTubalPeritonealCancer&quot;:
  FamilyMemberBreastOvarianTubalPeritonealCancerCondition FMH
    return FMH.familyMemberHistory

define &quot;FamilyMemberBreastOvarianTubalPeritonealCancerCondition&quot;:
  [FamilyMemberHistory] F
    let
      CancerConditions: F.condition C
        where C.code in &quot;Breast Cancer&quot; or
              C.code in &quot;Ovarian Cancer&quot; or
              C.code in &quot;Tubal Cancer&quot; or
              C.code in &quot;Peritoneal Cancer&quot;
    where exists CancerConditions
    return {
      familyMemberHistory: F,
      conditions: CancerConditions
    }

//------------------------------------------------------------------------------
// Genetic risk referrals and encounters
//------------------------------------------------------------------------------  

define GeneticCounselingEncounters:
  Common.RelevantEncounterStatus(
    [Encounter] E
      where E.serviceType in &quot;GENETIC COUNSELING&quot; or E.reasonCode in &quot;GENETIC COUNSELING&quot;
  )

define GeneticCounselingReferralOrders:
  [ServiceRequest] O where 
    BCSMCommon.ServiceRequestWithOrderIntent(O) 
    and O.code in &quot;GENETIC COUNSELING&quot; or O.reasonCode in &quot;GENETIC COUNSELING&quot;

//------------------------------------------------------------------------------
// High risk referral factors
//------------------------------------------------------------------------------  

define MostRecent5YrRiskAssessment:
  C3F.MostRecent([Observation: &quot;5 year risk assessment&quot;])  

define MostRecent5YrRiskAssessmentDate:
  Common.ObservationDate(MostRecent5YrRiskAssessment)

define MostRecentPersonalRiskFactorAssessment:
  C3F.MostRecent(PersonalRiskFactorAssessments)  

define PersonalRiskFactorAssessments:
  [Observation: &quot;Personal risk factors conferring increased risk of breast cancer&quot;]

//------------------------------------------------------------------------------
// Latest screening test
//------------------------------------------------------------------------------  

define CompletedBreastCancerScreeningDiagnosticReports:
  CompletedBreastImagingDiagnosticReports union CompletedBreastBiopsyDiagnosticReports 

define AllCompletedDiagnosticReport:
  Common.CompletedDiagnosticReport([DiagnosticReport])    
  
// Imaging
define MostRecentBreastImagingDiagnosticReport:
  Common.MostRecentDiagnosticReport(BreastImagingDiagnosticReports)

define MostRecentBreastImagingDiagnosticReportNoConclusionCodes:
  MostRecentBreastImagingDiagnosticReport is not null and
    not Exists(BCSMCommon.CollateConclusionCodes(MostRecentBreastImagingDiagnosticReport,BreastImagingObservations))

define BreastImagingDiagnosticReports:
  distinct(
    (AllCompletedDiagnosticReport R
      where 
        Count(
          BCSMCommon.CollateConclusionCodes(R, BreastImagingObservations,&quot;Breast Imaging Report&quot;)        
      ) &gt; 0)
    union CompletedBreastImagingDiagnosticReports
  )

define ImagingDiagnosticReportsWithNoConclusionCodes:
  Exists(BreastImagingDiagnosticReports) and
    AnyTrue(
      (BiopsyDiagnosticReports) D 
      return not Exists(BCSMCommon.CollateConclusionCodes(D,BreastImagingObservations))
  )

define CompletedBreastImagingDiagnosticReports:
  Common.CompletedDiagnosticReport([DiagnosticReport: &quot;Breast Cancer Imaging Orders&quot;]) 

define BreastImagingObservations:
  [Observation: &quot;Breast Imaging Report&quot;]   

// Biopsy
define MostRecentBreastBiopsyDiagnosticReport:
  Common.MostRecentDiagnosticReport(BiopsyDiagnosticReports)

define MostRecentBreastBiopsyDiagnosticReportNoConclusionCodes:
  MostRecentBreastBiopsyDiagnosticReport is not null and
    not Exists(BCSMCommon.CollateConclusionCodes(
      MostRecentBreastBiopsyDiagnosticReport,BiopsyObservations))   

define BiopsyDiagnosticReports:
  distinct(
    (AllCompletedDiagnosticReport B
      where 
        Count(
          BCSMCommon.CollateConclusionCodes(B, BiopsyObservations,&quot;Breast Pathology biopsy report&quot;)
        ) &gt; 0 ) 
    union CompletedBreastBiopsyDiagnosticReports
  )

define BiopsyDiagnosticReportsWithNoConclusionCodes:
  Exists(BiopsyDiagnosticReports) and
    AnyTrue(
      (BiopsyDiagnosticReports) D 
      return not Exists(BCSMCommon.CollateConclusionCodes(D,BiopsyObservations))
  )

define CompletedBreastBiopsyDiagnosticReports:
  Common.CompletedDiagnosticReport([DiagnosticReport: &quot;Breast Pathology biopsy report&quot;])      

define IncompleteBreastBiopsyDiagnosticReports:
  [DiagnosticReport: &quot;Breast Pathology biopsy report&quot;] DR where
    DR.status in {'preliminary', 'registered', 'partial'}  

// TODO: should report observation code be a value set?
define BiopsyObservations:
  [Observation: &quot;Breast Pathology biopsy report&quot;]      </code></pre></td></tr>
            </table>
          </td>
        </tr>
        
        
        
        
        
        <tr>
          <td colspan="2">
            <table>
              <tr><th><b>Content: </b> application/elm+xml</th></tr>
              <tr><td><pre><code>Encoded data (734708 characters)</code></pre></td></tr>
            </table>
          </td>
        </tr>
        
        
        
        
        <tr>
          <td colspan="2">
            <table>
              <tr><th><b>Content: </b> application/elm+json</th></tr>
              <tr><td><pre><code>Encoded data (1396340 characters)</code></pre></td></tr>
            </table>
          </td>
        </tr>
        
        
    </table>
</div>
</div>

  <!-- insert notes if present -->
  



  

</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2025+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.mitre.org/">MITRE</a>.  Package cancerscreeningcds.fhir.us.bcsm-cds#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Feb 28, 2025 23:17+0000">2025-02-28</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

