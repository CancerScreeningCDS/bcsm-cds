<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1" localId="0">
   <annotation translatorVersion="3.11.0" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="1971">
         <a:s>/*  
  Author: CMS Alliance to Modernize Healthcare, operated by THE MITRE Corporation.

  (C) 2024 The MITRE Corporation. All Rights Reserved. 
  Approved for Public Release: 24-2711. 
  Distribution Unlimited.

  Unless otherwise noted, this work is available under an Apache 2.0 license. 
  It was produced by the MITRE Corporation for the Division of Cancer Prevention 
  and Control, Centers for Disease Control and Prevention in accordance with the 
  Statement of Work, contract number 75FCMC18D0047, task order number 75D30123F17931.
*/

library DataElements version '1.0.0'</a:s>
      </a:s>
   </annotation>
   <identifier id="DataElements" system="http://cancerscreeningcds.github.io/bcsm-cds" version="1.0.0"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localId="1" localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="206" locator="16:1-16:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="206">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="207" locator="18:1-18:63" localIdentifier="C3F" path="http://cancerscreeningcds.github.io/bcsm-cds/CDSConnectCommonsforFHIRv401" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="207">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CDSConnectCommonsforFHIRv401</a:s>
               </a:s>
               <a:s> version '1.0.0' called C3F</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="208" locator="19:1-19:56" localIdentifier="Common" path="http://cancerscreeningcds.github.io/bcsm-cds/CSMCommonFunctions" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CSMCommonFunctions</a:s>
               </a:s>
               <a:s> version '1.0.0' called Common</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="209" locator="20:1-20:61" localIdentifier="BCSMCommon" path="http://cancerscreeningcds.github.io/bcsm-cds/BCSMCommonFunctions" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>include </a:s>
               <a:s>
                  <a:s>BCSMCommonFunctions</a:s>
               </a:s>
               <a:s> version '1.0.0' called BCSMCommon</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="210" locator="21:1-21:55" localIdentifier="FHIRHelpers" path="http://cancerscreeningcds.github.io/bcsm-cds/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="210">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s>  version '4.0.1' called FHIRHelpers</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="211" locator="22:1-22:31" localIdentifier="Hospice" path="http://cancerscreeningcds.github.io/bcsm-cds/Hospice" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="211">
               <a:s>include </a:s>
               <a:s>
                  <a:s>Hospice</a:s>
               </a:s>
               <a:s> version '1.0.0'</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="335" locator="121:1-121:39" name="encounter" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="335">
               <a:s>//------------------------------------------------------------------------------
// PARAMETERS
//------------------------------------------------------------------------------

parameter encounter </a:s>
               <a:s r="337">
                  <a:s>String</a:s>
               </a:s>
               <a:s r="336"> default null</a:s>
            </a:s>
         </annotation>
         <default localId="338" asType="t:String" xsi:type="As">
            <operand localId="336" locator="121:36-121:39" xsi:type="Null"/>
         </default>
         <parameterTypeSpecifier localId="337" locator="121:21-121:26" name="t:String" xsi:type="NamedTypeSpecifier"/>
      </def>
      <def localId="339" locator="122:1-122:51" name="ObservationLookbackPeriod" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="339">
               <a:s>parameter ObservationLookbackPeriod default </a:s>
               <a:s r="340">
                  <a:s>14 days</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="340" locator="122:45-122:51" value="14" unit="days" xsi:type="Quantity"/>
      </def>
      <def localId="341" locator="123:1-123:44" name="SymptomaticLookBack" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="341">
               <a:s>parameter SymptomaticLookBack default </a:s>
               <a:s r="342">
                  <a:s>1 days</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="342" locator="123:39-123:44" value="1" unit="days" xsi:type="Quantity"/>
      </def>
   </parameters>
   <codeSystems>
      <def localId="212" locator="28:1-28:38" name="LOINC" id="http://loinc.org" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="212">
               <a:s>//------------------------------------------------------------------------------
// CODE SYSTEMS, VALUE SETS, AND CODES
//------------------------------------------------------------------------------

codesystem &quot;LOINC&quot;: 'http://loinc.org'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="213" locator="29:1-29:48" name="SNOMED-CT" id="http://snomed.info/sct" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="213">
               <a:s>codesystem &quot;SNOMED-CT&quot;: 'http://snomed.info/sct'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="214" locator="30:1-30:66" name="RXNORM" id="http://www.nlm.nih.gov/research/umls/rxnorm" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="214">
               <a:s>codesystem &quot;RXNORM&quot;: 'http://www.nlm.nih.gov/research/umls/rxnorm'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="215" locator="31:1-31:54" name="ICD-9" id="http://hl7.org/fhir/sid/icd-9-cm" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="215">
               <a:s>codesystem &quot;ICD-9&quot;: 'http://hl7.org/fhir/sid/icd-9-cm'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="216" locator="32:1-32:56" name="ICD-10" id="http://hl7.org/fhir/sid/icd-10-cm" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="216">
               <a:s>codesystem &quot;ICD-10&quot;: 'http://hl7.org/fhir/sid/icd-10-cm'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="217" locator="33:1-33:67" name="GENDER-IDENTITY" id="http://hl7.org/fhir/gender-identity" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="217">
               <a:s>codesystem &quot;GENDER-IDENTITY&quot;: 'http://hl7.org/fhir/gender-identity'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="218" locator="34:1-34:87" name="CONDCLINSTATUS" id="http://terminology.hl7.org/CodeSystem/condition-clinical" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="218">
               <a:s>codesystem &quot;CONDCLINSTATUS&quot;: 'http://terminology.hl7.org/CodeSystem/condition-clinical'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="219" locator="35:1-35:78" name="AdministrativeGender" id="http://hl7.org/fhir/administrative-gender" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="219">
               <a:s>codesystem &quot;AdministrativeGender&quot;: 'http://hl7.org/fhir/administrative-gender'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="220" locator="36:1-36:111" name="LOCAL" id="http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="220">
               <a:s>codesystem &quot;LOCAL&quot;: 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="221" locator="37:1-37:114" name="ActCode" id="http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="221">
               <a:s>codesystem &quot;ActCode&quot;: 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="222" locator="38:1-38:124" name="BiopsyResultCS" id="http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/biopsy-result-observation-code-system" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="222">
               <a:s>codesystem &quot;BiopsyResultCS&quot;: 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/biopsy-result-observation-code-system'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <valueSets>
      <def localId="231" locator="46:1-46:90" name="Pregnancy" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="231">
               <a:s>// Pregnancy
valueset &quot;Pregnancy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="232" locator="47:1-47:135" name="Pregnancy (New ICD10 codes published in 2018 and 2020)" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.80" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="232">
               <a:s>valueset &quot;Pregnancy (New ICD10 codes published in 2018 and 2020)&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.80'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="233" locator="49:1-49:95" name="Breast Cancer" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="233">
               <a:s>// Breast diagnoses, procedures, and observations
valueset &quot;Breast Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.367'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="234" locator="50:1-50:112" name="Bilateral Mastectomy" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1068" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="234">
               <a:s>// TODO clinical validation: Keep secondary cancers?
valueset &quot;Bilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1068'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="235" locator="51:1-51:118" name="Left Unilateral Mastectomy" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1069" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="235">
               <a:s>valueset &quot;Left Unilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1069'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="236" locator="52:1-52:119" name="Right Unilateral Mastectomy" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1070" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="236">
               <a:s>valueset &quot;Right Unilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1070'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="237" locator="53:1-53:113" name="Unilateral Mastectomy" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1071" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="237">
               <a:s>valueset &quot;Unilateral Mastectomy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1071'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="238" locator="54:1-54:122" name="Bilateral Mastectomy Procedure" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1005" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="238">
               <a:s>valueset &quot;Bilateral Mastectomy Procedure&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1005'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="239" locator="55:1-55:128" name="Left Unilateral Mastectomy Procedure" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1133" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="239">
               <a:s>valueset &quot;Left Unilateral Mastectomy Procedure&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1133'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="240" locator="56:1-56:129" name="Right Unilateral Mastectomy Procedure" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1134" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="240">
               <a:s>valueset &quot;Right Unilateral Mastectomy Procedure&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1134'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="241" locator="57:1-57:131" name="Genetic Marker of Susceptibility to Breast Cancer" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.378" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="241">
               <a:s>valueset &quot;Genetic Marker of Susceptibility to Breast Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.378'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="242" locator="58:1-58:101" name="BRCA1 Gene Mutation" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.379" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="242">
               <a:s>valueset &quot;BRCA1 Gene Mutation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.379'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="243" locator="59:1-59:101" name="BRCA2 Gene Mutation" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.380" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="243">
               <a:s>// TODO clinical validation: keep weird codes referencing specific BRCA mutations?
valueset &quot;BRCA2 Gene Mutation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.380'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="244" locator="60:1-60:136" name="History of Breast Cancer or Breast Cancer in Remission" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.383" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="244">
               <a:s>// TODO clinical validation: keep weird codes referencing specific BRCA mutations?
valueset &quot;History of Breast Cancer or Breast Cancer in Remission&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.383'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="245" locator="61:1-61:105" name="Biopsy Atypical Results" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="245">
               <a:s>// TODO clinical validation: include codes for partial remission?
valueset &quot;Biopsy Atypical Results&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="246" locator="62:1-62:96" name="Ovarian Cancer" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.232" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="246">
               <a:s>// TODO clinical validation: Keep &quot;generic&quot; ICD-10-CM codes under which atypical hyperplasia is classified (but which are not specific to atypical hyperplasia)? Decided against it for similar situations in CRC.
valueset &quot;Ovarian Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.232'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="247" locator="63:1-63:94" name="Tubal Cancer" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.539" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="247">
               <a:s>valueset &quot;Tubal Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.539'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="248" locator="64:1-64:99" name="Peritoneal Cancer" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.233" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="248">
               <a:s>valueset &quot;Peritoneal Cancer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.1444.5.233'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="249" locator="65:1-65:114" name="Breast Cancer Signs and Symptoms" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.374" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="249">
               <a:s>valueset &quot;Breast Cancer Signs and Symptoms&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.374'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="250" locator="66:1-66:107" name="First Degree Family Member" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.92" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="250">
               <a:s>// TODO clinical validation: check for overall accuracy.
valueset &quot;First Degree Family Member&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.92'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="251" locator="67:1-67:109" name="Second Degree Family Member" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.401" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="251">
               <a:s>valueset &quot;Second Degree Family Member&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.401'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="252" locator="68:1-68:109" name="Breast Cancer Biopsy Orders" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.387" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="252">
               <a:s>// TODO clinical validation: keep cousins (could be second cousins according to definition)?
valueset &quot;Breast Cancer Biopsy Orders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.387'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="253" locator="69:1-69:110" name="Breast Cancer Imaging Orders" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.394" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="253">
               <a:s>//TODO: add CPT, HCPCS, ICD-10-PCS. TODO clinical validation: check for overall accuracy.
valueset &quot;Breast Cancer Imaging Orders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.394'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="254" locator="71:1-71:100" name="GENETIC COUNSELING" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.235" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="254">
               <a:s>//TODO: add CPT, HCPCS, ICD-10-PCS. TODO clinical validation: Keep SNOMED codes for core compression, magnification and localization mammography? Keep mammary ductograms? Keep doppler US?
// TODO: replace placeholder value set OID
valueset &quot;GENETIC COUNSELING&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.235'</a:s>
            </a:s>
         </annotation>
      </def>
   </valueSets>
   <codes>
      <def localId="223" locator="40:1-40:78" name="Condition inactive" id="inactive" display="inactive" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="223">
               <a:s>code &quot;Condition inactive&quot;: 'inactive' from </a:s>
               <a:s r="224">
                  <a:s>&quot;CONDCLINSTATUS&quot;</a:s>
               </a:s>
               <a:s> display 'inactive'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="224" locator="40:44-40:59" name="CONDCLINSTATUS"/>
      </def>
      <def localId="225" locator="41:1-41:81" name="Condition remission" id="remission" display="remission" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="225">
               <a:s>code &quot;Condition remission&quot;: 'remission' from </a:s>
               <a:s r="226">
                  <a:s>&quot;CONDCLINSTATUS&quot;</a:s>
               </a:s>
               <a:s> display 'remission'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="226" locator="41:46-41:61" name="CONDCLINSTATUS"/>
      </def>
      <def localId="227" locator="42:1-42:78" name="Condition resolved" id="resolved" display="resolved" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="227">
               <a:s>code &quot;Condition resolved&quot;: 'resolved' from </a:s>
               <a:s r="228">
                  <a:s>&quot;CONDCLINSTATUS&quot;</a:s>
               </a:s>
               <a:s> display 'resolved'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="228" locator="42:44-42:59" name="CONDCLINSTATUS"/>
      </def>
      <def localId="229" locator="43:1-43:72" name="Condition active" id="active" display="active" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="229">
               <a:s>code &quot;Condition active&quot;: 'active' from </a:s>
               <a:s r="230">
                  <a:s>&quot;CONDCLINSTATUS&quot;</a:s>
               </a:s>
               <a:s> display 'active'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="230" locator="43:40-43:55" name="CONDCLINSTATUS"/>
      </def>
      <def localId="255" locator="74:1-74:62" name="Male" id="male" display="Male" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="255">
               <a:s>// Standard codes
code &quot;Male&quot;: 'male' from </a:s>
               <a:s r="256">
                  <a:s>&quot;AdministrativeGender&quot;</a:s>
               </a:s>
               <a:s> display 'Male'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="256" locator="74:26-74:47" name="AdministrativeGender"/>
      </def>
      <def localId="257" locator="75:1-75:72" name="Gender Identity" id="76691-5" display="Gender identity" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="257">
               <a:s>code &quot;Gender Identity&quot;: '76691-5' from </a:s>
               <a:s r="258">
                  <a:s>&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Gender identity'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="258" locator="75:40-75:46" name="LOINC"/>
      </def>
      <def localId="259" locator="76:1-76:98" name="Transgender Male Code" id="transgender-male" display="transgender male" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="259">
               <a:s>code &quot;Transgender Male Code&quot;: 'transgender-male' from </a:s>
               <a:s r="260">
                  <a:s>&quot;GENDER-IDENTITY&quot;</a:s>
               </a:s>
               <a:s> display 'transgender male'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="260" locator="76:55-76:71" name="GENDER-IDENTITY"/>
      </def>
      <def localId="261" locator="77:1-77:104" name="Transgender Female Code" id="transgender-female" display="transgender female" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="261">
               <a:s>code &quot;Transgender Female Code&quot;: 'transgender-female' from </a:s>
               <a:s r="262">
                  <a:s>&quot;GENDER-IDENTITY&quot;</a:s>
               </a:s>
               <a:s> display 'transgender female'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="262" locator="77:59-77:75" name="GENDER-IDENTITY"/>
      </def>
      <def localId="263" locator="78:1-78:110" name="Female-to-male Transsexual" id="407377005" display="Female-to-male transsexual (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="263">
               <a:s>code &quot;Female-to-male Transsexual&quot;: '407377005' from </a:s>
               <a:s r="264">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Female-to-male transsexual (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="264" locator="78:53-78:63" name="SNOMED-CT"/>
      </def>
      <def localId="265" locator="79:1-79:110" name="Male-to-female Transsexual" id="407376001" display="Male-to-female transsexual (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="265">
               <a:s>code &quot;Male-to-female Transsexual&quot;: '407376001' from </a:s>
               <a:s r="266">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Male-to-female transsexual (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="266" locator="79:53-79:63" name="SNOMED-CT"/>
      </def>
      <def localId="267" locator="80:1-80:90" name="Left (qualifier value)" id="7771000" display="Left (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="267">
               <a:s>code &quot;Left (qualifier value)&quot;: '7771000' from </a:s>
               <a:s r="268">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Left (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="268" locator="80:47-80:57" name="SNOMED-CT"/>
      </def>
      <def localId="269" locator="81:1-81:93" name="Right (qualifier value)" id="24028007" display="Right (qualifier value)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="269">
               <a:s>code &quot;Right (qualifier value)&quot;: '24028007' from </a:s>
               <a:s r="270">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Right (qualifier value)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="270" locator="81:49-81:59" name="SNOMED-CT"/>
      </def>
      <def localId="271" locator="82:1-82:127" name="History of radiation therapy to chest" id="77941000119104" display="History of radiation therapy to chest" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="271">
               <a:s>code &quot;History of radiation therapy to chest&quot;: '77941000119104' from </a:s>
               <a:s r="272">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'History of radiation therapy to chest'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="272" locator="82:69-82:79" name="SNOMED-CT"/>
      </def>
      <def localId="273" locator="83:1-83:102" name="Breast Pathology biopsy report" id="66110-8" display="Breast Pathology biopsy report" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="273">
               <a:s>code &quot;Breast Pathology biopsy report&quot;: '66110-8' from </a:s>
               <a:s r="274">
                  <a:s>&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Breast Pathology biopsy report'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="274" locator="83:55-83:61" name="LOINC"/>
      </def>
      <def localId="275" locator="84:1-84:101" name="Breast Imaging Report" id="10193-1" display="Physical findings of Breasts Narrative" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="275">
               <a:s>code &quot;Breast Imaging Report&quot;: '10193-1' from </a:s>
               <a:s r="276">
                  <a:s>&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Physical findings of Breasts Narrative'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="276" locator="84:46-84:52" name="LOINC"/>
      </def>
      <def localId="277" locator="85:1-85:109" name="Heterogeneously dense" id="129718006" display="Heterogeneously dense breast composition" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="277">
               <a:s>// Consider replacing with &quot;Breast Screening Cancer Imaging Orders&quot; value set when using to identify DiagnosticReport resources. All but a couple of the LOINC codes included can be used for both orders and observations/results.
code &quot;Heterogeneously dense&quot;: '129718006' from </a:s>
               <a:s r="278">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Heterogeneously dense breast composition'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="278" locator="85:48-85:58" name="SNOMED-CT"/>
      </def>
      <def localId="279" locator="86:1-86:97" name="Extremely dense" id="129719003" display="Extremely dense breast composition" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="279">
               <a:s>code &quot;Extremely dense&quot;: '129719003' from </a:s>
               <a:s r="280">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Extremely dense breast composition'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="280" locator="86:42-86:52" name="SNOMED-CT"/>
      </def>
      <def localId="281" locator="87:1-87:74" name="Pregnancy Status" id="82810-3" display="Pregnancy status" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="281">
               <a:s>code &quot;Pregnancy Status&quot;: '82810-3' from </a:s>
               <a:s r="282">
                  <a:s>&quot;LOINC&quot;</a:s>
               </a:s>
               <a:s> display 'Pregnancy status'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="282" locator="87:41-87:47" name="LOINC"/>
      </def>
      <def localId="283" locator="88:1-88:109" name="Patient currently pregnant" id="77386006" display="Patient currently pregnant (finding)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="283">
               <a:s>code &quot;Patient currently pregnant&quot;: '77386006' from </a:s>
               <a:s r="284">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Patient currently pregnant (finding)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="284" locator="88:52-88:62" name="SNOMED-CT"/>
      </def>
      <def localId="285" locator="89:1-89:104" name="Pregnancy Episode Of Care" id="424525001" display="Antenatal care (regime/therapy)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="285">
               <a:s>code &quot;Pregnancy Episode Of Care&quot;: '424525001' from </a:s>
               <a:s r="286">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Antenatal care (regime/therapy)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="286" locator="89:52-89:62" name="SNOMED-CT"/>
      </def>
      <def localId="287" locator="92:1-92:109" name="Breast cancer within 5 years" id="hxbreastcawithin5y" display="Breast cancer within 5 years" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="287">
               <a:s>// Non-standard codes
code &quot;Breast cancer within 5 years&quot;: 'hxbreastcawithin5y' from </a:s>
               <a:s r="288">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Breast cancer within 5 years'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="288" locator="92:64-92:70" name="LOCAL"/>
      </def>
      <def localId="289" locator="93:1-93:113" name="New or worsening breast symptoms" id="BreastSymptoms" display="New or worsening breast symptoms" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="289">
               <a:s>code &quot;New or worsening breast symptoms&quot;: 'BreastSymptoms' from </a:s>
               <a:s r="290">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'New or worsening breast symptoms'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="290" locator="93:64-93:70" name="LOCAL"/>
      </def>
      <def localId="291" locator="94:1-94:123" name="New or worsening breast exam findings" id="BreastFindings" display="New or worsening breast exam findings" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="291">
               <a:s>code &quot;New or worsening breast exam findings&quot;: 'BreastFindings' from </a:s>
               <a:s r="292">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'New or worsening breast exam findings'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="292" locator="94:69-94:75" name="LOCAL"/>
      </def>
      <def localId="293" locator="95:1-95:108" name="Reduced life expectancy indicator" id="lifeexp" display="Reduced life expectancy indicator" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="293">
               <a:s>code &quot;Reduced life expectancy indicator&quot;: 'lifeexp' from </a:s>
               <a:s r="294">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Reduced life expectancy indicator'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="294" locator="95:58-95:64" name="LOCAL"/>
      </def>
      <def localId="295" locator="96:1-96:91" name="Currently lactating" id="currentlylactating" display="Currently lactating" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="295">
               <a:s>code &quot;Currently lactating&quot;: 'currentlylactating' from </a:s>
               <a:s r="296">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Currently lactating'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="296" locator="96:55-96:61" name="LOCAL"/>
      </def>
      <def localId="297" locator="97:1-97:170" name="Genetic marker or syndrome associated with breast cancer" id="GeneticMarkerOrSyndrome" display="Genetic marker or syndrome associated with breast cancer" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="297">
               <a:s>code &quot;Genetic marker or syndrome associated with breast cancer&quot;: 'GeneticMarkerOrSyndrome' from </a:s>
               <a:s r="298">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Genetic marker or syndrome associated with breast cancer'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="298" locator="97:97-97:103" name="LOCAL"/>
      </def>
      <def localId="299" locator="98:1-98:99" name="Li-Fraumeni Syndrome" id="428850001" display="Li-Fraumeni syndrome (disorder)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="299">
               <a:s>code &quot;Li-Fraumeni Syndrome&quot;: '428850001' from </a:s>
               <a:s r="300">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Li-Fraumeni syndrome (disorder)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="300" locator="98:47-98:57" name="SNOMED-CT"/>
      </def>
      <def localId="301" locator="99:1-99:88" name="Cowden Syndrome" id="58037000" display="Cowden syndrome (disorder)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="301">
               <a:s>code &quot;Cowden Syndrome&quot;: '58037000' from </a:s>
               <a:s r="302">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Cowden syndrome (disorder)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="302" locator="99:41-99:51" name="SNOMED-CT"/>
      </def>
      <def localId="303" locator="100:1-100:109" name="Bannayan-Riley-Ruvalcaba Syndrome" id="234138005" display="Bannayan syndrome (disorder)" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="303">
               <a:s>code &quot;Bannayan-Riley-Ruvalcaba Syndrome&quot;: '234138005' from </a:s>
               <a:s r="304">
                  <a:s>&quot;SNOMED-CT&quot;</a:s>
               </a:s>
               <a:s> display 'Bannayan syndrome (disorder)'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="304" locator="100:60-100:70" name="SNOMED-CT"/>
      </def>
      <def localId="305" locator="101:1-101:121" name="History of chest radiation ages 10-30 y" id="chestxrt" display="History of chest radiation ages 10-30 y" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="305">
               <a:s>code &quot;History of chest radiation ages 10-30 y&quot;: 'chestxrt' from </a:s>
               <a:s r="306">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'History of chest radiation ages 10-30 y'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="306" locator="101:65-101:71" name="LOCAL"/>
      </def>
      <def localId="307" locator="102:1-102:107" name="Lifetime risk assessment" id="lifetimeriskassessment" display="Lifetime risk assessment" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="307">
               <a:s>code &quot;Lifetime risk assessment&quot;: 'lifetimeriskassessment' from </a:s>
               <a:s r="308">
                  <a:s>&quot;ActCode&quot;</a:s>
               </a:s>
               <a:s> display 'Lifetime risk assessment'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="308" locator="102:64-102:72" name="ActCode"/>
      </def>
      <def localId="309" locator="103:1-103:87" name="High lifetime risk" id="highlifetimerisk" display="High lifetime risk" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="309">
               <a:s>code &quot;High lifetime risk&quot;: 'highlifetimerisk' from </a:s>
               <a:s r="310">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'High lifetime risk'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="310" locator="103:52-103:58" name="LOCAL"/>
      </def>
      <def localId="311" locator="104:1-104:156" name="First degree relative with genetic marker or syndrome" id="firstdeggenetic" display="First degree relative with genetic marker or syndrome" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="311">
               <a:s>code &quot;First degree relative with genetic marker or syndrome&quot;: 'firstdeggenetic' from </a:s>
               <a:s r="312">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'First degree relative with genetic marker or syndrome'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="312" locator="104:86-104:92" name="LOCAL"/>
      </def>
      <def localId="313" locator="105:1-105:143" name="Family history of inherited cancer susceptibility" id="fhxgenetic" display="Family history of inherited cancer susceptibility" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="313">
               <a:s>code &quot;Family history of inherited cancer susceptibility&quot;: 'fhxgenetic' from </a:s>
               <a:s r="314">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Family history of inherited cancer susceptibility'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="314" locator="105:77-105:83" name="LOCAL"/>
      </def>
      <def localId="315" locator="106:1-106:145" name="Ancestry associated with BRCA1/2 gene mutations" id="brcageneancestry" display="Ancestry associated with BRCA1/2 gene mutations" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="315">
               <a:s>code &quot;Ancestry associated with BRCA1/2 gene mutations&quot;: 'brcageneancestry' from </a:s>
               <a:s r="316">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Ancestry associated with BRCA1/2 gene mutations'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="316" locator="106:81-106:87" name="LOCAL"/>
      </def>
      <def localId="317" locator="107:1-107:107" name="Familial risk assessment" id="familialriskassessment" display="Familial risk assessment" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="317">
               <a:s>code &quot;Familial risk assessment&quot;: 'familialriskassessment' from </a:s>
               <a:s r="318">
                  <a:s>&quot;ActCode&quot;</a:s>
               </a:s>
               <a:s> display 'Familial risk assessment'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="318" locator="107:64-107:72" name="ActCode"/>
      </def>
      <def localId="319" locator="108:1-108:118" name="Brief familial risk assessment tool" id="fhxrisktool" display="Brief familial risk assessment tool" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="319">
               <a:s>code &quot;Brief familial risk assessment tool&quot;: 'fhxrisktool' from </a:s>
               <a:s r="320">
                  <a:s>&quot;ActCode&quot;</a:s>
               </a:s>
               <a:s> display 'Brief familial risk assessment tool'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="320" locator="108:64-108:72" name="ActCode"/>
      </def>
      <def localId="321" locator="109:1-109:116" name="Informal familial risk assessment" id="fhxriskassess" display="Informal familial risk assessment" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="321">
               <a:s>code &quot;Informal familial risk assessment&quot;: 'fhxriskassess' from </a:s>
               <a:s r="322">
                  <a:s>&quot;ActCode&quot;</a:s>
               </a:s>
               <a:s> display 'Informal familial risk assessment'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="322" locator="109:64-109:72" name="ActCode"/>
      </def>
      <def localId="323" locator="110:1-110:87" name="High familial risk" id="highfamilialrisk" display="High familial risk" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="323">
               <a:s>code &quot;High familial risk&quot;: 'highfamilialrisk' from </a:s>
               <a:s r="324">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'High familial risk'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="324" locator="110:52-110:58" name="LOCAL"/>
      </def>
      <def localId="325" locator="111:1-111:121" name="Known breast cancer variant status" id="KnownVariantStatus" display="Known breast cancer variant status" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="325">
               <a:s>code &quot;Known breast cancer variant status&quot;: 'KnownVariantStatus' from </a:s>
               <a:s r="326">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Known breast cancer variant status'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="326" locator="111:70-111:76" name="LOCAL"/>
      </def>
      <def localId="327" locator="112:1-112:180" name="Family history of breast, ovarian, tubal, or peritoneal cancer" id="fhxbrcaovcatubalperit" display="Family history of breast, ovarian, tubal, or peritoneal cancer" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="327">
               <a:s>code &quot;Family history of breast, ovarian, tubal, or peritoneal cancer&quot;: 'fhxbrcaovcatubalperit' from </a:s>
               <a:s r="328">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Family history of breast, ovarian, tubal, or peritoneal cancer'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="328" locator="112:101-112:107" name="LOCAL"/>
      </def>
      <def localId="329" locator="113:1-113:97" name="5 year risk assessment" id="5yriskassessment" display="5 year risk assessment" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="329">
               <a:s>code &quot;5 year risk assessment&quot;: '5yriskassessment' from </a:s>
               <a:s r="330">
                  <a:s>&quot;ActCode&quot;</a:s>
               </a:s>
               <a:s> display '5 year risk assessment'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="330" locator="113:56-113:64" name="ActCode"/>
      </def>
      <def localId="331" locator="114:1-114:182" name="Personal risk factors conferring increased risk of breast cancer" id="PersonalRiskFactors" display="Personal risk factors conferring increased risk of breast cancer" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="331">
               <a:s>code &quot;Personal risk factors conferring increased risk of breast cancer&quot;: 'PersonalRiskFactors' from </a:s>
               <a:s r="332">
                  <a:s>&quot;LOCAL&quot;</a:s>
               </a:s>
               <a:s> display 'Personal risk factors conferring increased risk of breast cancer'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="332" locator="114:101-114:107" name="LOCAL"/>
      </def>
      <def localId="333" locator="115:1-115:81" name="Atypical" id="Atypical" display="Atypical breast finding" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="333">
               <a:s>code &quot;Atypical&quot;: 'Atypical' from </a:s>
               <a:s r="334">
                  <a:s>BiopsyResultCS</a:s>
               </a:s>
               <a:s> display 'Atypical breast finding'</a:s>
            </a:s>
         </annotation>
         <codeSystem localId="334" locator="115:34-115:47" name="BiopsyResultCS"/>
      </def>
   </codes>
   <contexts>
      <def localId="346" locator="127:1-127:15" name="Patient"/>
   </contexts>
   <statements>
      <def localId="344" locator="127:1-127:15" name="Patient" context="Patient">
         <expression localId="345" xsi:type="SingletonFrom">
            <operand localId="343" locator="127:1-127:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="357" locator="136:1-138:84" name="BirthSex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="357">
               <a:s>define BirthSex:
  </a:s>
               <a:s r="369">
                  <a:s>
                     <a:s r="358">
                        <a:s r="360">
                           <a:s>(</a:s>
                           <a:s r="360">
                              <a:s r="359">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="360">
                                 <a:s>extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="361">
                     <a:s>where </a:s>
                     <a:s r="361">
                        <a:s r="363">
                           <a:s r="362">
                              <a:s>E</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="363">
                              <a:s>url</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="364">
                           <a:s>'http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="369" locator="137:3-138:84" xsi:type="Query">
            <source localId="358" locator="137:3-137:23" alias="E">
               <expression localId="360" locator="137:3-137:21" path="extension" xsi:type="Property">
                  <source localId="359" locator="137:4-137:10" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="361" locator="138:5-138:84" xsi:type="Equal">
               <signature localId="367" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="368" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="365" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="366" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="363" locator="138:11-138:15" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="364" locator="138:19-138:84" valueType="t:String" value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="354" locator="143:1-147:3" name="FemaleBirthSex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="354">
               <a:s>define FemaleBirthSex:
  </a:s>
               <a:s r="432">
                  <a:s>Exists(
    </a:s>
                  <a:s r="429">
                     <a:s>
                        <a:s r="355">
                           <a:s r="370">
                              <a:s>(</a:s>
                              <a:s r="370">
                                 <a:s>BirthSex</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> E</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="371">
                        <a:s>where </a:s>
                        <a:s r="371">
                           <a:s r="373">
                              <a:s r="372">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="373">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="374">
                              <a:s>'F'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  )</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="432" locator="144:3-147:3" xsi:type="Exists">
            <operand localId="429" locator="145:5-146:25" xsi:type="Query">
               <source localId="355" locator="145:5-145:16" alias="E">
                  <expression localId="370" locator="145:5-145:14" name="BirthSex" xsi:type="ExpressionRef"/>
               </source>
               <where localId="371" locator="146:7-146:25" xsi:type="Equal">
                  <signature localId="427" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="428" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="378" xsi:type="Case">
                     <caseItem localId="379">
                        <when localId="380" isType="fhir:base64Binary" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="376" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="377" name="fhir:base64Binary" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="375" asType="fhir:base64Binary" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="381">
                        <when localId="382" isType="fhir:uri" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="384" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="385" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="383" asType="fhir:uri" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="386">
                        <when localId="387" isType="fhir:string" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="389" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="390" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="388" asType="fhir:string" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="391">
                        <when localId="392" isType="fhir:string" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="394" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="395" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="393" asType="fhir:string" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="396">
                        <when localId="397" isType="fhir:string" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="399" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="400" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="398" asType="fhir:string" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="401">
                        <when localId="402" isType="fhir:uri" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="404" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="405" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="403" asType="fhir:uri" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="406">
                        <when localId="407" isType="fhir:string" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="409" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="410" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="408" asType="fhir:string" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="411">
                        <when localId="412" isType="fhir:uri" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="414" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="415" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="413" asType="fhir:uri" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="416">
                        <when localId="417" isType="fhir:uri" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="419" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="420" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="418" asType="fhir:uri" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="421">
                        <when localId="422" isType="fhir:uri" xsi:type="Is">
                           <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                        </when>
                        <then localId="424" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="425" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="423" asType="fhir:uri" xsi:type="As">
                              <operand localId="373" locator="146:13-146:19" path="value" scope="E" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <else localId="426" xsi:type="Null"/>
                  </operand>
                  <operand localId="374" locator="146:23-146:25" valueType="t:String" value="F" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="440" locator="140:1-141:18" name="BirthSexPresent" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="440">
               <a:s>define BirthSexPresent:
  </a:s>
               <a:s r="444">
                  <a:s>Exists(</a:s>
                  <a:s r="441">
                     <a:s>BirthSex</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="444" locator="141:3-141:18" xsi:type="Exists">
            <operand localId="441" locator="141:10-141:17" name="BirthSex" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="447" locator="149:1-157:3" name="UnknownBirthSex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="447">
               <a:s>define UnknownBirthSex:
  </a:s>
               <a:s r="448">
                  <a:s>exists</a:s>
                  <a:s r="627">
                     <a:s>(
    </a:s>
                     <a:s r="627">
                        <a:s>
                           <a:s r="449">
                              <a:s r="450">
                                 <a:s>(</a:s>
                                 <a:s r="450">
                                    <a:s>BirthSex</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="451">
                           <a:s>where </a:s>
                           <a:s r="451">
                              <a:s>(
        </a:s>
                              <a:s r="451">
                                 <a:s r="452">
                                    <a:s r="453">
                                       <a:s r="455">
                                          <a:s r="454">
                                             <a:s>E</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="455">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="456">
                                          <a:s>'ASKU'</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> or
        </a:s>
                                    <a:s r="511">
                                       <a:s r="513">
                                          <a:s r="512">
                                             <a:s>E</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="513">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="514">
                                          <a:s>'OTH'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> or
        </a:s>
                                 <a:s r="569">
                                    <a:s r="571">
                                       <a:s r="570">
                                          <a:s>E</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="571">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="572">
                                       <a:s>'UNK'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="448" locator="150:3-157:3" xsi:type="Exists">
            <operand localId="627" locator="150:9-157:3" xsi:type="Query">
               <source localId="449" locator="151:5-151:16" alias="E">
                  <expression localId="450" locator="151:5-151:14" name="BirthSex" xsi:type="ExpressionRef"/>
               </source>
               <where localId="451" locator="152:7-156:7" xsi:type="Or">
                  <operand localId="452" locator="153:9-154:23" xsi:type="Or">
                     <operand localId="453" locator="153:9-153:24" xsi:type="Equal">
                        <signature localId="509" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="510" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="460" xsi:type="Case">
                           <caseItem localId="461">
                              <when localId="462" isType="fhir:base64Binary" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="458" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="459" name="fhir:base64Binary" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="457" asType="fhir:base64Binary" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="463">
                              <when localId="464" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="466" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="467" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="465" asType="fhir:uri" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="468">
                              <when localId="469" isType="fhir:string" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="471" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="472" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="470" asType="fhir:string" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="473">
                              <when localId="474" isType="fhir:string" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="476" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="477" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="475" asType="fhir:string" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="478">
                              <when localId="479" isType="fhir:string" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="481" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="482" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="480" asType="fhir:string" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="483">
                              <when localId="484" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="486" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="487" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="485" asType="fhir:uri" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="488">
                              <when localId="489" isType="fhir:string" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="491" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="492" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="490" asType="fhir:string" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="493">
                              <when localId="494" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="496" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="497" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="495" asType="fhir:uri" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="498">
                              <when localId="499" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="501" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="502" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="500" asType="fhir:uri" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="503">
                              <when localId="504" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="506" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="507" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="505" asType="fhir:uri" xsi:type="As">
                                    <operand localId="455" locator="153:9-153:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <else localId="508" xsi:type="Null"/>
                        </operand>
                        <operand localId="456" locator="153:19-153:24" valueType="t:String" value="ASKU" xsi:type="Literal"/>
                     </operand>
                     <operand localId="511" locator="154:9-154:23" xsi:type="Equal">
                        <signature localId="567" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="568" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="518" xsi:type="Case">
                           <caseItem localId="519">
                              <when localId="520" isType="fhir:base64Binary" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="516" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="517" name="fhir:base64Binary" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="515" asType="fhir:base64Binary" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="521">
                              <when localId="522" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="524" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="525" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="523" asType="fhir:uri" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="526">
                              <when localId="527" isType="fhir:string" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="529" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="530" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="528" asType="fhir:string" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="531">
                              <when localId="532" isType="fhir:string" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="534" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="535" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="533" asType="fhir:string" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="536">
                              <when localId="537" isType="fhir:string" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="539" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="540" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="538" asType="fhir:string" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="541">
                              <when localId="542" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="544" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="545" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="543" asType="fhir:uri" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="546">
                              <when localId="547" isType="fhir:string" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="549" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="550" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="548" asType="fhir:string" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="551">
                              <when localId="552" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="554" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="555" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="553" asType="fhir:uri" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="556">
                              <when localId="557" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="559" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="560" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="558" asType="fhir:uri" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <caseItem localId="561">
                              <when localId="562" isType="fhir:uri" xsi:type="Is">
                                 <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                              </when>
                              <then localId="564" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="565" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="563" asType="fhir:uri" xsi:type="As">
                                    <operand localId="513" locator="154:9-154:15" path="value" scope="E" xsi:type="Property"/>
                                 </operand>
                              </then>
                           </caseItem>
                           <else localId="566" xsi:type="Null"/>
                        </operand>
                        <operand localId="514" locator="154:19-154:23" valueType="t:String" value="OTH" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="569" locator="155:9-155:23" xsi:type="Equal">
                     <signature localId="625" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="626" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="576" xsi:type="Case">
                        <caseItem localId="577">
                           <when localId="578" isType="fhir:base64Binary" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="574" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="575" name="fhir:base64Binary" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="573" asType="fhir:base64Binary" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="579">
                           <when localId="580" isType="fhir:uri" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="582" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="583" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="581" asType="fhir:uri" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="584">
                           <when localId="585" isType="fhir:string" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="587" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="588" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="586" asType="fhir:string" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="589">
                           <when localId="590" isType="fhir:string" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="592" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="593" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="591" asType="fhir:string" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="594">
                           <when localId="595" isType="fhir:string" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="597" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="598" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="596" asType="fhir:string" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="599">
                           <when localId="600" isType="fhir:uri" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="602" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="603" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="601" asType="fhir:uri" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="604">
                           <when localId="605" isType="fhir:string" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="607" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="608" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="606" asType="fhir:string" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="609">
                           <when localId="610" isType="fhir:uri" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="612" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="613" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="611" asType="fhir:uri" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="614">
                           <when localId="615" isType="fhir:uri" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="617" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="618" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="616" asType="fhir:uri" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <caseItem localId="619">
                           <when localId="620" isType="fhir:uri" xsi:type="Is">
                              <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                           </when>
                           <then localId="622" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="623" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="621" asType="fhir:uri" xsi:type="As">
                                 <operand localId="571" locator="155:9-155:15" path="value" scope="E" xsi:type="Property"/>
                              </operand>
                           </then>
                        </caseItem>
                        <else localId="624" xsi:type="Null"/>
                     </operand>
                     <operand localId="572" locator="155:19-155:23" valueType="t:String" value="UNK" xsi:type="Literal"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="436" locator="159:1-161:17" name="BirthSexMissingOrUnknown" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="436">
               <a:s>define BirthSexMissingOrUnknown:
  </a:s>
               <a:s r="437">
                  <a:s r="438">
                     <a:s>not </a:s>
                     <a:s r="445">
                        <a:s>BirthSexPresent</a:s>
                     </a:s>
                  </a:s>
                  <a:s> or
  </a:s>
                  <a:s r="628">
                     <a:s>UnknownBirthSex</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="437" locator="160:3-161:17" xsi:type="Or">
            <operand localId="438" locator="160:3-160:21" xsi:type="Not">
               <operand localId="445" locator="160:7-160:21" name="BirthSexPresent" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="628" locator="161:3-161:17" name="UnknownBirthSex" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="631" locator="167:1-168:33" name="FemaleGender" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="631">
               <a:s>define FemaleGender:
  </a:s>
               <a:s r="632">
                  <a:s r="635">
                     <a:s r="634">
                        <a:s r="633">
                           <a:s>Patient</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="634">
                           <a:s>gender</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="635">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s> = </a:s>
                  <a:s r="636">
                     <a:s>'female'</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="632" locator="168:3-168:33" xsi:type="Equal">
            <signature localId="637" name="t:String" xsi:type="NamedTypeSpecifier"/>
            <signature localId="638" name="t:String" xsi:type="NamedTypeSpecifier"/>
            <operand localId="635" locator="168:3-168:22" path="value" xsi:type="Property">
               <source localId="634" locator="168:3-168:16" path="gender" xsi:type="Property">
                  <source localId="633" locator="168:3-168:9" name="Patient" xsi:type="ExpressionRef"/>
               </source>
            </operand>
            <operand localId="636" locator="168:26-168:33" valueType="t:String" value="female" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="351" locator="170:1-172:45" name="Female" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="351">
               <a:s>define Female:
  </a:s>
               <a:s r="352">
                  <a:s r="433">
                     <a:s>FemaleBirthSex</a:s>
                  </a:s>
                  <a:s> or
  </a:s>
                  <a:s r="434">
                     <a:s>(</a:s>
                     <a:s r="434">
                        <a:s r="629">
                           <a:s>BirthSexMissingOrUnknown</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="639">
                           <a:s>FemaleGender</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="352" locator="171:3-172:45" xsi:type="Or">
            <operand localId="433" locator="171:3-171:16" name="FemaleBirthSex" xsi:type="ExpressionRef"/>
            <operand localId="434" locator="172:3-172:45" xsi:type="And">
               <operand localId="629" locator="172:4-172:27" name="BirthSexMissingOrUnknown" xsi:type="ExpressionRef"/>
               <operand localId="639" locator="172:33-172:44" name="FemaleGender" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="648" locator="174:1-178:86" name="GenderIdentityExtension" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="648">
               <a:s>define GenderIdentityExtension:
  </a:s>
               <a:s r="669">
                  <a:s>
                     <a:s r="649">
                        <a:s r="651">
                           <a:s>(</a:s>
                           <a:s r="651">
                              <a:s r="650">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="651">
                                 <a:s>extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="652">
                     <a:s>where
      </a:s>
                     <a:s r="652">
                        <a:s r="653">
                           <a:s r="655">
                              <a:s r="654">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="655">
                                 <a:s>url</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="656">
                              <a:s>'http://hl7.org/fhir/StructureDefinition/patient-genderIdentity'</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
      </a:s>
                        <a:s r="661">
                           <a:s r="663">
                              <a:s r="662">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="663">
                                 <a:s>url</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="664">
                              <a:s>'http://hl7.org/fhir/us/core/StructureDefinition/us-core-genderIdentity'</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="669" locator="175:3-178:86" xsi:type="Query">
            <source localId="649" locator="175:3-175:23" alias="E">
               <expression localId="651" locator="175:3-175:21" path="extension" xsi:type="Property">
                  <source localId="650" locator="175:4-175:10" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="652" locator="176:5-178:86" xsi:type="Or">
               <operand localId="653" locator="177:7-177:78" xsi:type="Equal">
                  <signature localId="659" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="660" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="657" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="658" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="655" locator="177:7-177:11" path="url" scope="E" xsi:type="Property"/>
                  </operand>
                  <operand localId="656" locator="177:15-177:78" valueType="t:String" value="http://hl7.org/fhir/StructureDefinition/patient-genderIdentity" xsi:type="Literal"/>
               </operand>
               <operand localId="661" locator="178:7-178:86" xsi:type="Equal">
                  <signature localId="667" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="668" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="665" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="666" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="663" locator="178:7-178:11" path="url" scope="E" xsi:type="Property"/>
                  </operand>
                  <operand localId="664" locator="178:15-178:86" valueType="t:String" value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-genderIdentity" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="645" locator="180:1-184:68" name="TransgenderMaleExtension" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="645">
               <a:s>define TransgenderMaleExtension:
  </a:s>
               <a:s r="696">
                  <a:s>
                     <a:s r="646">
                        <a:s r="670">
                           <a:s>(</a:s>
                           <a:s r="670">
                              <a:s>GenderIdentityExtension</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="671">
                     <a:s>where
      </a:s>
                     <a:s r="671">
                        <a:s r="672">
                           <a:s r="673">
                              <a:s r="675">
                                 <a:s r="674">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="675">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="676">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="677">
                              <a:s>&quot;Transgender Male Code&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
      </a:s>
                        <a:s r="684">
                           <a:s r="685">
                              <a:s r="687">
                                 <a:s r="686">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="687">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="688">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="689">
                              <a:s>&quot;Female-to-male Transsexual&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="696" locator="181:3-184:68" xsi:type="Query">
            <source localId="646" locator="181:3-181:29" alias="E">
               <expression localId="670" locator="181:3-181:27" name="GenderIdentityExtension" xsi:type="ExpressionRef"/>
            </source>
            <where localId="671" locator="182:5-184:68" xsi:type="Or">
               <operand localId="672" locator="183:7-183:63" xsi:type="Equivalent">
                  <signature localId="682" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="683" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="678" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="673" locator="183:7-183:37" strict="false" xsi:type="As">
                        <operand localId="675" locator="183:7-183:13" path="value" scope="E" xsi:type="Property"/>
                        <asTypeSpecifier localId="676" locator="183:18-183:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="680" xsi:type="ToConcept">
                     <signature localId="681" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="677" locator="183:41-183:63" name="Transgender Male Code" xsi:type="CodeRef"/>
                  </operand>
               </operand>
               <operand localId="684" locator="184:7-184:68" xsi:type="Equivalent">
                  <signature localId="694" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="695" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="690" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="685" locator="184:7-184:37" strict="false" xsi:type="As">
                        <operand localId="687" locator="184:7-184:13" path="value" scope="E" xsi:type="Property"/>
                        <asTypeSpecifier localId="688" locator="184:18-184:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="692" xsi:type="ToConcept">
                     <signature localId="693" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="689" locator="184:41-184:68" name="Female-to-male Transsexual" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="705" locator="192:1-193:34" name="GenderIdentityObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="705">
               <a:s>define GenderIdentityObservation:
  </a:s>
               <a:s r="708">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Gender Identity&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="708" locator="193:3-193:34" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="716" xsi:type="ToList">
               <operand localId="707" locator="193:17-193:33" name="Gender Identity" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="702" locator="195:1-198:67" name="TransgenderMaleObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="702">
               <a:s>define TransgenderMaleObservation:
  </a:s>
               <a:s r="743">
                  <a:s>
                     <a:s r="703">
                        <a:s r="717">
                           <a:s>(</a:s>
                           <a:s r="717">
                              <a:s>GenderIdentityObservation</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="718">
                     <a:s>where </a:s>
                     <a:s r="718">
                        <a:s r="719">
                           <a:s r="720">
                              <a:s r="722">
                                 <a:s r="721">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="722">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="723">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="724">
                              <a:s>&quot;Transgender Male Code&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  or </a:s>
                        <a:s r="731">
                           <a:s r="732">
                              <a:s r="734">
                                 <a:s r="733">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="734">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="735">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="736">
                              <a:s>&quot;Female-to-male Transsexual&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="743" locator="196:3-198:67" xsi:type="Query">
            <source localId="703" locator="196:3-196:31" alias="O">
               <expression localId="717" locator="196:3-196:29" name="GenderIdentityObservation" xsi:type="ExpressionRef"/>
            </source>
            <where localId="718" locator="197:3-198:67" xsi:type="Or">
               <operand localId="719" locator="197:9-197:65" xsi:type="Equivalent">
                  <signature localId="729" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="730" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="725" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="720" locator="197:9-197:39" strict="false" xsi:type="As">
                        <operand localId="722" locator="197:9-197:15" path="value" scope="O" xsi:type="Property"/>
                        <asTypeSpecifier localId="723" locator="197:20-197:39" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="727" xsi:type="ToConcept">
                     <signature localId="728" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="724" locator="197:43-197:65" name="Transgender Male Code" xsi:type="CodeRef"/>
                  </operand>
               </operand>
               <operand localId="731" locator="198:6-198:67" xsi:type="Equivalent">
                  <signature localId="741" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="742" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="737" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="732" locator="198:6-198:36" strict="false" xsi:type="As">
                        <operand localId="734" locator="198:6-198:12" path="value" scope="O" xsi:type="Property"/>
                        <asTypeSpecifier localId="735" locator="198:17-198:36" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="739" xsi:type="ToConcept">
                     <signature localId="740" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="736" locator="198:40-198:67" name="Female-to-male Transsexual" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="642" locator="205:1-206:72" name="TransgenderMale" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="642">
               <a:s>define TransgenderMale:
  </a:s>
               <a:s r="643">
                  <a:s r="700">
                     <a:s>Exists(</a:s>
                     <a:s r="697">
                        <a:s>TransgenderMaleExtension</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> or </a:s>
                  <a:s r="749">
                     <a:s>Exists(</a:s>
                     <a:s r="744">
                        <a:s>TransgenderMaleObservation</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="643" locator="206:3-206:72" xsi:type="Or">
            <operand localId="700" locator="206:3-206:34" xsi:type="Exists">
               <operand localId="697" locator="206:10-206:33" name="TransgenderMaleExtension" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="749" locator="206:39-206:72" xsi:type="Exists">
               <signature localId="750" xsi:type="ListTypeSpecifier">
                  <elementType localId="751" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="744" locator="206:46-206:71" name="TransgenderMaleObservation" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="348" locator="133:1-134:27" name="de-female" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="348">
               <a:s>//------------------------------------------------------------------------------
// Assigned female at birth
//------------------------------------------------------------------------------

define &quot;de-female&quot;:
  </a:s>
               <a:s r="349">
                  <a:s r="640">
                     <a:s>Female</a:s>
                  </a:s>
                  <a:s> or </a:s>
                  <a:s r="752">
                     <a:s>TransgenderMale</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="349" locator="134:3-134:27" xsi:type="Or">
            <operand localId="640" locator="134:3-134:8" name="Female" xsi:type="ExpressionRef"/>
            <operand localId="752" locator="134:13-134:27" name="TransgenderMale" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="754" locator="163:1-165:37" name="BirthSexCode" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="754">
               <a:s>define BirthSexCode:
  </a:s>
               <a:s r="755">
                  <a:s>if </a:s>
                  <a:s r="756">
                     <a:s>BirthSexMissingOrUnknown</a:s>
                  </a:s>
                  <a:s> then </a:s>
                  <a:s r="757">
                     <a:s>'Unknown'</a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="779">
                     <a:s>Coalesce(</a:s>
                     <a:s r="775">
                        <a:s r="766">
                           <a:s r="758">
                              <a:s>BirthSex</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="766">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="775">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="755" locator="164:3-165:37" xsi:type="If">
            <condition localId="756" locator="164:6-164:29" name="BirthSexMissingOrUnknown" xsi:type="ExpressionRef"/>
            <then localId="757" locator="164:36-164:44" valueType="t:String" value="Unknown" xsi:type="Literal"/>
            <else localId="780" asType="t:String" xsi:type="As">
               <operand localId="779" locator="165:8-165:37" xsi:type="Coalesce">
                  <operand localId="775" locator="165:17-165:36" xsi:type="Query">
                     <source localId="774" alias="$this">
                        <expression localId="766" locator="165:17-165:30" xsi:type="Query">
                           <source localId="765" alias="$this">
                              <expression localId="758" locator="165:17-165:24" name="BirthSex" xsi:type="ExpressionRef"/>
                           </source>
                           <where localId="762" xsi:type="Not">
                              <operand localId="761" xsi:type="IsNull">
                                 <operand localId="760" path="value" xsi:type="Property">
                                    <source localId="759" name="$this" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                           <return localId="767" distinct="false">
                              <expression localId="764" path="value" xsi:type="Property">
                                 <source localId="763" name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="771" xsi:type="Not">
                        <operand localId="770" xsi:type="IsNull">
                           <operand localId="769" path="value" xsi:type="Property">
                              <source localId="768" name="$this" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </where>
                     <return localId="776" distinct="false">
                        <expression localId="773" path="value" xsi:type="Property">
                           <source localId="772" name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </operand>
               </operand>
            </else>
         </expression>
      </def>
      <def localId="782" locator="186:1-190:68" name="TransgenderFemaleExtension" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="782">
               <a:s>define TransgenderFemaleExtension:
  </a:s>
               <a:s r="810">
                  <a:s>
                     <a:s r="783">
                        <a:s r="784">
                           <a:s>(</a:s>
                           <a:s r="784">
                              <a:s>GenderIdentityExtension</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="785">
                     <a:s>where
      </a:s>
                     <a:s r="785">
                        <a:s r="786">
                           <a:s r="787">
                              <a:s r="789">
                                 <a:s r="788">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="789">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="790">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="791">
                              <a:s>&quot;Transgender Female Code&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
      </a:s>
                        <a:s r="798">
                           <a:s r="799">
                              <a:s r="801">
                                 <a:s r="800">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="801">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="802">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="803">
                              <a:s>&quot;Male-to-female Transsexual&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="810" locator="187:3-190:68" xsi:type="Query">
            <source localId="783" locator="187:3-187:29" alias="E">
               <expression localId="784" locator="187:3-187:27" name="GenderIdentityExtension" xsi:type="ExpressionRef"/>
            </source>
            <where localId="785" locator="188:5-190:68" xsi:type="Or">
               <operand localId="786" locator="189:7-189:65" xsi:type="Equivalent">
                  <signature localId="796" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="797" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="792" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="787" locator="189:7-189:37" strict="false" xsi:type="As">
                        <operand localId="789" locator="189:7-189:13" path="value" scope="E" xsi:type="Property"/>
                        <asTypeSpecifier localId="790" locator="189:18-189:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="794" xsi:type="ToConcept">
                     <signature localId="795" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="791" locator="189:41-189:65" name="Transgender Female Code" xsi:type="CodeRef"/>
                  </operand>
               </operand>
               <operand localId="798" locator="190:7-190:68" xsi:type="Equivalent">
                  <signature localId="808" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="809" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="804" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="799" locator="190:7-190:37" strict="false" xsi:type="As">
                        <operand localId="801" locator="190:7-190:13" path="value" scope="E" xsi:type="Property"/>
                        <asTypeSpecifier localId="802" locator="190:18-190:37" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="806" xsi:type="ToConcept">
                     <signature localId="807" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="803" locator="190:41-190:68" name="Male-to-female Transsexual" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="812" locator="200:1-203:69" name="TransgenderFemaleObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="812">
               <a:s>define TransgenderFemaleObservation:
  </a:s>
               <a:s r="840">
                  <a:s>
                     <a:s r="813">
                        <a:s r="814">
                           <a:s>(</a:s>
                           <a:s r="814">
                              <a:s>GenderIdentityObservation</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="815">
                     <a:s>where </a:s>
                     <a:s r="815">
                        <a:s r="816">
                           <a:s r="817">
                              <a:s r="819">
                                 <a:s r="818">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="819">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="820">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="821">
                              <a:s>&quot;Transgender Female Code&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    or </a:s>
                        <a:s r="828">
                           <a:s r="829">
                              <a:s r="831">
                                 <a:s r="830">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="831">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="832">
                                 <a:s>FHIR.CodeableConcept</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="833">
                              <a:s>&quot;Male-to-female Transsexual&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="840" locator="201:3-203:69" xsi:type="Query">
            <source localId="813" locator="201:3-201:31" alias="O">
               <expression localId="814" locator="201:3-201:29" name="GenderIdentityObservation" xsi:type="ExpressionRef"/>
            </source>
            <where localId="815" locator="202:5-203:69" xsi:type="Or">
               <operand localId="816" locator="202:11-202:69" xsi:type="Equivalent">
                  <signature localId="826" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="827" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="822" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="817" locator="202:11-202:41" strict="false" xsi:type="As">
                        <operand localId="819" locator="202:11-202:17" path="value" scope="O" xsi:type="Property"/>
                        <asTypeSpecifier localId="820" locator="202:22-202:41" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="824" xsi:type="ToConcept">
                     <signature localId="825" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="821" locator="202:45-202:69" name="Transgender Female Code" xsi:type="CodeRef"/>
                  </operand>
               </operand>
               <operand localId="828" locator="203:8-203:69" xsi:type="Equivalent">
                  <signature localId="838" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="839" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="834" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="829" locator="203:8-203:38" strict="false" xsi:type="As">
                        <operand localId="831" locator="203:8-203:14" path="value" scope="O" xsi:type="Property"/>
                        <asTypeSpecifier localId="832" locator="203:19-203:38" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="836" xsi:type="ToConcept">
                     <signature localId="837" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="833" locator="203:42-203:69" name="Male-to-female Transsexual" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="842" locator="208:1-209:76" name="TransgenderFemale" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="842">
               <a:s>define TransgenderFemale:
  </a:s>
               <a:s r="843">
                  <a:s r="849">
                     <a:s>Exists(</a:s>
                     <a:s r="844">
                        <a:s>TransgenderFemaleExtension</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> or </a:s>
                  <a:s r="857">
                     <a:s>Exists(</a:s>
                     <a:s r="852">
                        <a:s>TransgenderFemaleObservation</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="843" locator="209:3-209:76" xsi:type="Or">
            <operand localId="849" locator="209:3-209:36" xsi:type="Exists">
               <signature localId="850" xsi:type="ListTypeSpecifier">
                  <elementType localId="851" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="844" locator="209:10-209:35" name="TransgenderFemaleExtension" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="857" locator="209:41-209:76" xsi:type="Exists">
               <signature localId="858" xsi:type="ListTypeSpecifier">
                  <elementType localId="859" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="852" locator="209:48-209:75" name="TransgenderFemaleObservation" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="861" locator="211:1-212:27" name="FemaleorTransgenderMale" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="861">
               <a:s>define FemaleorTransgenderMale:
  </a:s>
               <a:s r="862">
                  <a:s r="863">
                     <a:s>Female</a:s>
                  </a:s>
                  <a:s> or </a:s>
                  <a:s r="864">
                     <a:s>TransgenderMale</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="862" locator="212:3-212:27" xsi:type="Or">
            <operand localId="863" locator="212:3-212:8" name="Female" xsi:type="ExpressionRef"/>
            <operand localId="864" locator="212:13-212:27" name="TransgenderMale" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="869" locator="224:1-225:53" name="BreastCancerDiagnoses" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="869">
               <a:s>define BreastCancerDiagnoses:
  </a:s>
               <a:s r="877">
                  <a:s r="870">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="877">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="873">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Breast Cancer&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="877" locator="225:3-225:53" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="873" locator="225:25-225:52" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="872" locator="225:37-225:51" name="Breast Cancer" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="866" locator="218:1-222:50" name="de-breastca" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="866">
               <a:s>//------------------------------------------------------------------------------
// Current breast cancer
//------------------------------------------------------------------------------

define &quot;de-breastca&quot;:
  </a:s>
               <a:s r="914">
                  <a:s>
                     <a:s r="867">
                        <a:s r="878">
                           <a:s>
                              <a:s>BreastCancerDiagnoses</a:s>
                           </a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="879">
                     <a:s>where </a:s>
                     <a:s r="879">
                        <a:s r="880">
                           <a:s r="891">
                              <a:s r="883">
                                 <a:s r="882">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="883">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> !~ </a:s>
                              <a:s r="884">
                                 <a:s>&quot;Condition inactive&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="902">
                              <a:s r="894">
                                 <a:s r="893">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="894">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> !~ </a:s>
                              <a:s r="895">
                                 <a:s>&quot;Condition remission&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="913">
                           <a:s r="905">
                              <a:s r="904">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="905">
                                 <a:s>clinicalStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> !~ </a:s>
                           <a:s r="906">
                              <a:s>&quot;Condition resolved&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="914" locator="219:3-222:50" xsi:type="Query">
            <source localId="867" locator="219:3-219:25" alias="C">
               <expression localId="878" locator="219:3-219:23" name="BreastCancerDiagnoses" xsi:type="ExpressionRef"/>
            </source>
            <where localId="879" locator="220:5-222:50" xsi:type="And">
               <operand localId="880" locator="220:11-221:51" xsi:type="And">
                  <operand localId="891" locator="220:11-220:50" xsi:type="Not">
                     <operand localId="881" locator="220:11-220:50" xsi:type="Equivalent">
                        <signature localId="889" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="890" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="885" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="883" locator="220:11-220:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand localId="887" xsi:type="ToConcept">
                           <signature localId="888" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="884" locator="220:31-220:50" name="Condition inactive" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="902" locator="221:11-221:51" xsi:type="Not">
                     <operand localId="892" locator="221:11-221:51" xsi:type="Equivalent">
                        <signature localId="900" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="901" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="896" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="894" locator="221:11-221:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand localId="898" xsi:type="ToConcept">
                           <signature localId="899" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="895" locator="221:31-221:51" name="Condition remission" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
               </operand>
               <operand localId="913" locator="222:11-222:50" xsi:type="Not">
                  <operand localId="903" locator="222:11-222:50" xsi:type="Equivalent">
                     <signature localId="911" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="912" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="907" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="905" locator="222:11-222:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                     </operand>
                     <operand localId="909" xsi:type="ToConcept">
                        <signature localId="910" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="906" locator="222:31-222:50" name="Condition resolved" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="923" locator="258:1-259:60" name="BilateralMastectomyConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="923">
               <a:s>define BilateralMastectomyConditions:
  </a:s>
               <a:s r="931">
                  <a:s r="924">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="931">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="927">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Bilateral Mastectomy&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="931" locator="259:3-259:60" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="927" locator="259:25-259:59" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="926" locator="259:37-259:58" name="Bilateral Mastectomy" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="937" locator="270:1-271:62" name="BilateralMastectomyProcedures" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="937">
               <a:s>define BilateralMastectomyProcedures:
  </a:s>
               <a:s r="945">
                  <a:s r="938">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="945">
                     <a:s>Completed(</a:s>
                     <a:s r="941">
                        <a:s>[Procedure: </a:s>
                        <a:s>
                           <a:s>&quot;Bilateral Mastectomy Procedure&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="945" locator="271:3-271:62" name="Completed" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="941" locator="271:17-271:61" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="940" locator="271:29-271:60" name="Bilateral Mastectomy Procedure" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="919" locator="234:1-236:38" name="BilateralMastectomy" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="919">
               <a:s>define BilateralMastectomy:
  </a:s>
               <a:s r="920">
                  <a:s r="921">
                     <a:s>exists </a:s>
                     <a:s r="932">
                        <a:s>BilateralMastectomyConditions</a:s>
                     </a:s>
                  </a:s>
                  <a:s> or 
  </a:s>
                  <a:s r="935">
                     <a:s>exists </a:s>
                     <a:s r="946">
                        <a:s>BilateralMastectomyProcedures</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="920" locator="235:3-236:38" xsi:type="Or">
            <operand localId="921" locator="235:3-235:38" xsi:type="Exists">
               <signature localId="933" xsi:type="ListTypeSpecifier">
                  <elementType localId="934" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="932" locator="235:10-235:38" name="BilateralMastectomyConditions" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="935" locator="236:3-236:38" xsi:type="Exists">
               <signature localId="947" xsi:type="ListTypeSpecifier">
                  <elementType localId="948" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="946" locator="236:10-236:38" name="BilateralMastectomyProcedures" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="957" locator="261:1-262:66" name="LeftUnilateralMastectomyConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="957">
               <a:s>define LeftUnilateralMastectomyConditions:
  </a:s>
               <a:s r="965">
                  <a:s r="958">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="965">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="961">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Left Unilateral Mastectomy&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="965" locator="262:3-262:66" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="961" locator="262:25-262:65" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="960" locator="262:37-262:64" name="Left Unilateral Mastectomy" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="971" locator="273:1-274:68" name="LeftUnilateralMastectomyProcedures" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="971">
               <a:s>define LeftUnilateralMastectomyProcedures:
  </a:s>
               <a:s r="979">
                  <a:s r="972">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="979">
                     <a:s>Completed(</a:s>
                     <a:s r="975">
                        <a:s>[Procedure: </a:s>
                        <a:s>
                           <a:s>&quot;Left Unilateral Mastectomy Procedure&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="979" locator="274:3-274:68" name="Completed" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="975" locator="274:17-274:67" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="974" locator="274:29-274:66" name="Left Unilateral Mastectomy Procedure" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="986" locator="267:1-268:61" name="UnilateralMastectomyConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="986">
               <a:s>define UnilateralMastectomyConditions:
  </a:s>
               <a:s r="994">
                  <a:s r="987">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="994">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="990">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Unilateral Mastectomy&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="994" locator="268:3-268:61" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="990" locator="268:25-268:60" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="989" locator="268:37-268:59" name="Unilateral Mastectomy" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="952" locator="238:1-246:68" name="LeftUnilateralMastectomy" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="952">
               <a:s>define LeftUnilateralMastectomy:
  </a:s>
               <a:s r="953">
                  <a:s r="954">
                     <a:s r="955">
                        <a:s>exists </a:s>
                        <a:s r="966">
                           <a:s>LeftUnilateralMastectomyConditions</a:s>
                        </a:s>
                     </a:s>
                     <a:s> or
  </a:s>
                     <a:s r="969">
                        <a:s>exists </a:s>
                        <a:s r="980">
                           <a:s>LeftUnilateralMastectomyProcedures</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> or
  </a:s>
                  <a:s r="983">
                     <a:s>exists </a:s>
                     <a:s r="1051">
                        <a:s>
                           <a:s r="984">
                              <a:s r="995">
                                 <a:s>
                                    <a:s>UnilateralMastectomyConditions</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="996">
                           <a:s>where
      </a:s>
                           <a:s r="996">
                              <a:s>exists </a:s>
                              <a:s r="1048">
                                 <a:s>
                                    <a:s r="997">
                                       <a:s r="999">
                                          <a:s>
                                             <a:s>C.bodySite</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> bs</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="1000">
                                    <a:s>where </a:s>
                                    <a:s r="1000">
                                       <a:s r="1001">
                                          <a:s r="1002">
                                             <a:s>bs</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1003">
                                             <a:s>&quot;Left (qualifier value)&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or
      </a:s>
                                       <a:s r="1010">
                                          <a:s>exists </a:s>
                                          <a:s r="1045">
                                             <a:s>(</a:s>
                                             <a:s r="1045">
                                                <a:s>
                                                   <a:s r="1011">
                                                      <a:s r="1023">
                                                         <a:s>
                                                            <a:s>C.bodySite.extension</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> E</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
        </a:s>
                                                <a:s r="1024">
                                                   <a:s>where </a:s>
                                                   <a:s r="1024">
                                                      <a:s r="1025">
                                                         <a:s r="1027">
                                                            <a:s r="1026">
                                                               <a:s>E</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="1027">
                                                               <a:s>url</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> = </a:s>
                                                         <a:s r="1028">
                                                            <a:s>'http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality-qualifier'</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>
          and </a:s>
                                                      <a:s r="1033">
                                                         <a:s r="1034">
                                                            <a:s r="1036">
                                                               <a:s r="1035">
                                                                  <a:s>E</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="1036">
                                                                  <a:s>value</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> as </a:s>
                                                            <a:s r="1037">
                                                               <a:s>CodeableConcept</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> ~ </a:s>
                                                         <a:s r="1038">
                                                            <a:s>&quot;Left (qualifier value)&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="953" locator="239:3-246:68" xsi:type="Or">
            <operand localId="954" locator="239:3-240:43" xsi:type="Or">
               <operand localId="955" locator="239:3-239:43" xsi:type="Exists">
                  <signature localId="967" xsi:type="ListTypeSpecifier">
                     <elementType localId="968" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="966" locator="239:10-239:43" name="LeftUnilateralMastectomyConditions" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="969" locator="240:3-240:43" xsi:type="Exists">
                  <signature localId="981" xsi:type="ListTypeSpecifier">
                     <elementType localId="982" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="980" locator="240:10-240:43" name="LeftUnilateralMastectomyProcedures" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="983" locator="241:3-246:68" xsi:type="Exists">
               <signature localId="1052" xsi:type="ListTypeSpecifier">
                  <elementType localId="1053" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1051" locator="241:10-246:68" xsi:type="Query">
                  <source localId="984" locator="241:10-241:41" alias="C">
                     <expression localId="995" locator="241:10-241:39" name="UnilateralMastectomyConditions" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="996" locator="242:5-246:68" xsi:type="Exists">
                     <signature localId="1049" xsi:type="ListTypeSpecifier">
                        <elementType localId="1050" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="1048" locator="243:14-246:68" xsi:type="Query">
                        <source localId="997" locator="243:14-243:26" alias="bs">
                           <expression localId="999" locator="243:14-243:23" path="bodySite" scope="C" xsi:type="Property"/>
                        </source>
                        <where localId="1000" locator="243:28-246:68" xsi:type="Or">
                           <operand localId="1001" locator="243:34-243:62" xsi:type="Equivalent">
                              <signature localId="1008" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="1009" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1004" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1002" locator="243:34-243:35" name="bs" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="1006" xsi:type="ToConcept">
                                 <signature localId="1007" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="1003" locator="243:39-243:62" name="Left (qualifier value)" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                           <operand localId="1010" locator="244:7-246:68" xsi:type="Exists">
                              <signature localId="1046" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1047" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <operand localId="1045" locator="244:14-246:68" xsi:type="Query">
                                 <source localId="1011" locator="244:15-244:36" alias="E">
                                    <expression localId="1023" locator="244:15-244:34" xsi:type="Flatten">
                                       <operand localId="1021" xsi:type="Query">
                                          <source localId="1020" alias="$this">
                                             <expression localId="1013" path="bodySite" scope="C" xsi:type="Property"/>
                                          </source>
                                          <where localId="1017" xsi:type="Not">
                                             <operand localId="1016" xsi:type="IsNull">
                                                <operand localId="1015" path="extension" xsi:type="Property">
                                                   <source localId="1014" name="$this" xsi:type="AliasRef"/>
                                                </operand>
                                             </operand>
                                          </where>
                                          <return localId="1022" distinct="false">
                                             <expression localId="1019" path="extension" xsi:type="Property">
                                                <source localId="1018" name="$this" xsi:type="AliasRef"/>
                                             </expression>
                                          </return>
                                       </operand>
                                    </expression>
                                 </source>
                                 <where localId="1024" locator="245:9-246:67" xsi:type="And">
                                    <operand localId="1025" locator="245:15-245:99" xsi:type="Equal">
                                       <signature localId="1031" name="t:String" xsi:type="NamedTypeSpecifier"/>
                                       <signature localId="1032" name="t:String" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="1029" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <signature localId="1030" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="1027" locator="245:15-245:19" path="url" scope="E" xsi:type="Property"/>
                                       </operand>
                                       <operand localId="1028" locator="245:23-245:99" valueType="t:String" value="http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality-qualifier" xsi:type="Literal"/>
                                    </operand>
                                    <operand localId="1033" locator="246:15-246:67" xsi:type="Equivalent">
                                       <signature localId="1043" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                       <signature localId="1044" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="1039" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="1034" locator="246:15-246:40" strict="false" xsi:type="As">
                                             <operand localId="1036" locator="246:15-246:21" path="value" scope="E" xsi:type="Property"/>
                                             <asTypeSpecifier localId="1037" locator="246:26-246:40" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand localId="1041" xsi:type="ToConcept">
                                          <signature localId="1042" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="1038" locator="246:44-246:67" name="Left (qualifier value)" xsi:type="CodeRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                              </operand>
                           </operand>
                        </where>
                     </operand>
                  </where>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="1061" locator="264:1-265:67" name="RightUnilateralMastectomyConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1061">
               <a:s>define RightUnilateralMastectomyConditions:
  </a:s>
               <a:s r="1069">
                  <a:s r="1062">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1069">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1065">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Right Unilateral Mastectomy&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1069" locator="265:3-265:67" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1065" locator="265:25-265:66" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1064" locator="265:37-265:65" name="Right Unilateral Mastectomy" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1075" locator="276:1-277:69" name="RightUnilateralMastectomyProcedures" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1075">
               <a:s>define RightUnilateralMastectomyProcedures:
  </a:s>
               <a:s r="1083">
                  <a:s r="1076">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1083">
                     <a:s>Completed(</a:s>
                     <a:s r="1079">
                        <a:s>[Procedure: </a:s>
                        <a:s>
                           <a:s>&quot;Right Unilateral Mastectomy Procedure&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1083" locator="277:3-277:69" name="Completed" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1079" locator="277:17-277:68" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1078" locator="277:29-277:67" name="Right Unilateral Mastectomy Procedure" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1056" locator="248:1-256:69" name="RightUnilateralMastectomy" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1056">
               <a:s>define RightUnilateralMastectomy:
  </a:s>
               <a:s r="1057">
                  <a:s r="1058">
                     <a:s r="1059">
                        <a:s>exists </a:s>
                        <a:s r="1070">
                           <a:s>RightUnilateralMastectomyConditions</a:s>
                        </a:s>
                     </a:s>
                     <a:s> or
  </a:s>
                     <a:s r="1073">
                        <a:s>exists </a:s>
                        <a:s r="1084">
                           <a:s>RightUnilateralMastectomyProcedures</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> or 
  </a:s>
                  <a:s r="1087">
                     <a:s>exists </a:s>
                     <a:s r="1145">
                        <a:s>
                           <a:s r="1088">
                              <a:s r="1089">
                                 <a:s>
                                    <a:s>UnilateralMastectomyConditions</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1090">
                           <a:s>where
      </a:s>
                           <a:s r="1090">
                              <a:s>exists </a:s>
                              <a:s r="1142">
                                 <a:s>
                                    <a:s r="1091">
                                       <a:s r="1093">
                                          <a:s>
                                             <a:s>C.bodySite</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> bs</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="1094">
                                    <a:s>where </a:s>
                                    <a:s r="1094">
                                       <a:s r="1095">
                                          <a:s r="1096">
                                             <a:s>bs</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1097">
                                             <a:s>&quot;Right (qualifier value)&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or
      </a:s>
                                       <a:s r="1104">
                                          <a:s>exists </a:s>
                                          <a:s r="1139">
                                             <a:s>(</a:s>
                                             <a:s r="1139">
                                                <a:s>
                                                   <a:s r="1105">
                                                      <a:s r="1117">
                                                         <a:s>
                                                            <a:s>C.bodySite.extension</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> E</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
        </a:s>
                                                <a:s r="1118">
                                                   <a:s>where </a:s>
                                                   <a:s r="1118">
                                                      <a:s r="1119">
                                                         <a:s r="1121">
                                                            <a:s r="1120">
                                                               <a:s>E</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="1121">
                                                               <a:s>url</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> = </a:s>
                                                         <a:s r="1122">
                                                            <a:s>'http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality-qualifier'</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>
          and </a:s>
                                                      <a:s r="1127">
                                                         <a:s r="1128">
                                                            <a:s r="1130">
                                                               <a:s r="1129">
                                                                  <a:s>E</a:s>
                                                               </a:s>
                                                               <a:s>.</a:s>
                                                               <a:s r="1130">
                                                                  <a:s>value</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> as </a:s>
                                                            <a:s r="1131">
                                                               <a:s>CodeableConcept</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> ~ </a:s>
                                                         <a:s r="1132">
                                                            <a:s>&quot;Right (qualifier value)&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1057" locator="249:3-256:69" xsi:type="Or">
            <operand localId="1058" locator="249:3-250:44" xsi:type="Or">
               <operand localId="1059" locator="249:3-249:44" xsi:type="Exists">
                  <signature localId="1071" xsi:type="ListTypeSpecifier">
                     <elementType localId="1072" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1070" locator="249:10-249:44" name="RightUnilateralMastectomyConditions" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="1073" locator="250:3-250:44" xsi:type="Exists">
                  <signature localId="1085" xsi:type="ListTypeSpecifier">
                     <elementType localId="1086" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1084" locator="250:10-250:44" name="RightUnilateralMastectomyProcedures" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="1087" locator="251:3-256:69" xsi:type="Exists">
               <signature localId="1146" xsi:type="ListTypeSpecifier">
                  <elementType localId="1147" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1145" locator="251:10-256:69" xsi:type="Query">
                  <source localId="1088" locator="251:10-251:41" alias="C">
                     <expression localId="1089" locator="251:10-251:39" name="UnilateralMastectomyConditions" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="1090" locator="252:5-256:69" xsi:type="Exists">
                     <signature localId="1143" xsi:type="ListTypeSpecifier">
                        <elementType localId="1144" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="1142" locator="253:14-256:69" xsi:type="Query">
                        <source localId="1091" locator="253:14-253:26" alias="bs">
                           <expression localId="1093" locator="253:14-253:23" path="bodySite" scope="C" xsi:type="Property"/>
                        </source>
                        <where localId="1094" locator="253:28-256:69" xsi:type="Or">
                           <operand localId="1095" locator="253:34-253:63" xsi:type="Equivalent">
                              <signature localId="1102" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="1103" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1098" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1096" locator="253:34-253:35" name="bs" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="1100" xsi:type="ToConcept">
                                 <signature localId="1101" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="1097" locator="253:39-253:63" name="Right (qualifier value)" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                           <operand localId="1104" locator="254:7-256:69" xsi:type="Exists">
                              <signature localId="1140" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1141" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <operand localId="1139" locator="254:14-256:69" xsi:type="Query">
                                 <source localId="1105" locator="254:15-254:36" alias="E">
                                    <expression localId="1117" locator="254:15-254:34" xsi:type="Flatten">
                                       <operand localId="1115" xsi:type="Query">
                                          <source localId="1114" alias="$this">
                                             <expression localId="1107" path="bodySite" scope="C" xsi:type="Property"/>
                                          </source>
                                          <where localId="1111" xsi:type="Not">
                                             <operand localId="1110" xsi:type="IsNull">
                                                <operand localId="1109" path="extension" xsi:type="Property">
                                                   <source localId="1108" name="$this" xsi:type="AliasRef"/>
                                                </operand>
                                             </operand>
                                          </where>
                                          <return localId="1116" distinct="false">
                                             <expression localId="1113" path="extension" xsi:type="Property">
                                                <source localId="1112" name="$this" xsi:type="AliasRef"/>
                                             </expression>
                                          </return>
                                       </operand>
                                    </expression>
                                 </source>
                                 <where localId="1118" locator="255:9-256:68" xsi:type="And">
                                    <operand localId="1119" locator="255:15-255:99" xsi:type="Equal">
                                       <signature localId="1125" name="t:String" xsi:type="NamedTypeSpecifier"/>
                                       <signature localId="1126" name="t:String" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="1123" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <signature localId="1124" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="1121" locator="255:15-255:19" path="url" scope="E" xsi:type="Property"/>
                                       </operand>
                                       <operand localId="1122" locator="255:23-255:99" valueType="t:String" value="http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality-qualifier" xsi:type="Literal"/>
                                    </operand>
                                    <operand localId="1127" locator="256:15-256:68" xsi:type="Equivalent">
                                       <signature localId="1137" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                       <signature localId="1138" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="1133" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="1128" locator="256:15-256:40" strict="false" xsi:type="As">
                                             <operand localId="1130" locator="256:15-256:21" path="value" scope="E" xsi:type="Property"/>
                                             <asTypeSpecifier localId="1131" locator="256:26-256:40" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                       <operand localId="1135" xsi:type="ToConcept">
                                          <signature localId="1136" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="1132" locator="256:44-256:68" name="Right (qualifier value)" xsi:type="CodeRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                              </operand>
                           </operand>
                        </where>
                     </operand>
                  </where>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="916" locator="231:1-232:81" name="de-mastectomy" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="916">
               <a:s>//------------------------------------------------------------------------------
// History of bilateral mastectomy
//------------------------------------------------------------------------------

define &quot;de-mastectomy&quot;:
  </a:s>
               <a:s r="917">
                  <a:s r="949">
                     <a:s>BilateralMastectomy</a:s>
                  </a:s>
                  <a:s> or </a:s>
                  <a:s r="950">
                     <a:s>(</a:s>
                     <a:s r="950">
                        <a:s r="1054">
                           <a:s>LeftUnilateralMastectomy</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="1148">
                           <a:s>RightUnilateralMastectomy</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="917" locator="232:3-232:81" xsi:type="Or">
            <operand localId="949" locator="232:3-232:21" name="BilateralMastectomy" xsi:type="ExpressionRef"/>
            <operand localId="950" locator="232:26-232:81" xsi:type="And">
               <operand localId="1054" locator="232:27-232:50" name="LeftUnilateralMastectomy" xsi:type="ExpressionRef"/>
               <operand localId="1148" locator="232:56-232:80" name="RightUnilateralMastectomy" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1156" locator="311:1-312:51" name="NewOrWorseningBreastSymptomsObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1156">
               <a:s>define NewOrWorseningBreastSymptomsObservations:
  </a:s>
               <a:s r="1159">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;New or worsening breast symptoms&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1159" locator="312:3-312:51" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="1167" xsi:type="ToList">
               <operand localId="1158" locator="312:17-312:50" name="New or worsening breast symptoms" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="1153" locator="307:1-309:35" name="MostRecentBreastSymptomObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1153">
               <a:s>define MostRecentBreastSymptomObservation:
  </a:s>
               <a:s r="1171">
                  <a:s r="1154">
                     <a:s>BCSMCommon</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1171">
                     <a:s>MostRecentLocalObservation(</a:s>
                     <a:s r="1168">
                        <a:s>NewOrWorseningBreastSymptomsObservations</a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="1169">
                        <a:s>encounter</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="1170">
                        <a:s>SymptomaticLookBack</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1171" locator="308:3-309:35" name="MostRecentLocalObservation" libraryName="BCSMCommon" xsi:type="FunctionRef">
            <operand localId="1168" locator="308:41-308:80" name="NewOrWorseningBreastSymptomsObservations" xsi:type="ExpressionRef"/>
            <operand localId="1169" locator="309:5-309:13" name="encounter" xsi:type="ParameterRef"/>
            <operand localId="1170" locator="309:16-309:34" name="SymptomaticLookBack" xsi:type="ParameterRef"/>
         </expression>
      </def>
      <def localId="1187" locator="304:1-305:72" name="BreastSymptomConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1187">
               <a:s>define BreastSymptomConditions:
  </a:s>
               <a:s r="1195">
                  <a:s r="1188">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1195">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1191">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Breast Cancer Signs and Symptoms&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1195" locator="305:3-305:72" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1191" locator="305:25-305:71" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1190" locator="305:37-305:70" name="Breast Cancer Signs and Symptoms" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1184" locator="300:1-302:43" name="EncounterBreastSymptomConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1184">
               <a:s>define EncounterBreastSymptomConditions:
  </a:s>
               <a:s r="1206">
                  <a:s>
                     <a:s r="1185">
                        <a:s r="1196">
                           <a:s>
                              <a:s>BreastSymptomConditions</a:s>
                           </a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1197">
                     <a:s>where </a:s>
                     <a:s r="1197">
                        <a:s r="1200">
                           <a:s r="1199">
                              <a:s r="1198">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1199">
                                 <a:s>encounter</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1200">
                              <a:s>reference</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="1201">
                           <a:s>encounter</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1206" locator="301:3-302:43" xsi:type="Query">
            <source localId="1185" locator="301:3-301:27" alias="C">
               <expression localId="1196" locator="301:3-301:25" name="BreastSymptomConditions" xsi:type="ExpressionRef"/>
            </source>
            <where localId="1197" locator="302:5-302:43" xsi:type="Equal">
               <signature localId="1204" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1205" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="1202" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="1203" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1200" locator="302:11-302:31" path="reference" xsi:type="Property">
                     <source localId="1199" locator="302:11-302:21" path="encounter" scope="C" xsi:type="Property"/>
                  </operand>
               </operand>
               <operand localId="1201" locator="302:35-302:43" name="encounter" xsi:type="ParameterRef"/>
            </where>
         </expression>
      </def>
      <def localId="1219" locator="293:1-298:3" name="AllBreastSymptomEncounters" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1219">
               <a:s>define AllBreastSymptomEncounters:
  </a:s>
               <a:s r="1235">
                  <a:s r="1220">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1235">
                     <a:s>RelevantEncounterStatus(
    </a:s>
                     <a:s r="1234">
                        <a:s>
                           <a:s r="1221">
                              <a:s r="1222">
                                 <a:s r="1222">
                                    <a:s>[Encounter]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="1226">
                           <a:s>where
        </a:s>
                           <a:s r="1226">
                              <a:s r="1224">
                                 <a:s r="1223">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1224">
                                    <a:s>reasonCode</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="1225">
                                 <a:s>&quot;Breast Cancer Signs and Symptoms&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>      
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1235" locator="294:3-298:3" name="RelevantEncounterStatus" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1234" locator="295:5-297:58" xsi:type="Query">
               <source localId="1221" locator="295:5-295:17" alias="E">
                  <expression localId="1222" locator="295:5-295:15" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" xsi:type="Retrieve"/>
               </source>
               <where localId="1226" locator="296:7-297:58" xsi:type="AnyInValueSet">
                  <signature localId="1232" xsi:type="ListTypeSpecifier">
                     <elementType localId="1233" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <codes localId="1227" xsi:type="Query">
                     <source localId="1228" alias="X">
                        <expression localId="1224" locator="297:9-297:20" path="reasonCode" scope="E" xsi:type="Property"/>
                     </source>
                     <return localId="1229" distinct="false">
                        <expression localId="1231" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1230" name="X" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </codes>
                  <valueset localId="1225" locator="297:25-297:58" name="Breast Cancer Signs and Symptoms" preserve="true"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1211" locator="289:1-291:77" name="EncounterReasonBreastSymptoms" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1211">
               <a:s>define EncounterReasonBreastSymptoms:
  </a:s>
               <a:s r="1212">
                  <a:s r="1215">
                     <a:s r="1213">
                        <a:s>encounter</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and 
    </a:s>
                  <a:s r="1216">
                     <a:s>exists </a:s>
                     <a:s r="1250">
                        <a:s>
                           <a:s r="1217">
                              <a:s r="1236">
                                 <a:s>
                                    <a:s>AllBreastSymptomEncounters</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="1237">
                           <a:s>where </a:s>
                           <a:s r="1237">
                              <a:s r="1238">
                                 <a:s>encounter</a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1247">
                                 <a:s r="1240">
                                    <a:s>'Encounter/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="1242">
                                    <a:s r="1241">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1242">
                                       <a:s>id</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1212" locator="290:3-291:77" xsi:type="And">
            <operand localId="1215" locator="290:3-290:23" xsi:type="Not">
               <operand localId="1214" locator="290:3-290:23" xsi:type="IsNull">
                  <operand localId="1213" locator="290:3-290:11" name="encounter" xsi:type="ParameterRef"/>
               </operand>
            </operand>
            <operand localId="1216" locator="291:5-291:77" xsi:type="Exists">
               <signature localId="1251" xsi:type="ListTypeSpecifier">
                  <elementType localId="1252" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1250" locator="291:12-291:77" xsi:type="Query">
                  <source localId="1217" locator="291:12-291:39" alias="E">
                     <expression localId="1236" locator="291:12-291:37" name="AllBreastSymptomEncounters" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="1237" locator="291:41-291:77" xsi:type="Equal">
                     <signature localId="1248" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1249" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1238" locator="291:47-291:55" name="encounter" xsi:type="ParameterRef"/>
                     <operand localId="1247" locator="291:59-291:77" xsi:type="Concatenate">
                        <operand localId="1240" locator="291:59-291:70" valueType="t:String" value="Encounter/" xsi:type="Literal"/>
                        <operand localId="1243" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1244" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1242" locator="291:74-291:77" path="id" scope="E" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </where>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="1150" locator="283:1-287:76" name="de-breastsymptoms" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1150">
               <a:s>//------------------------------------------------------------------------------
// Breast symptoms
//------------------------------------------------------------------------------

define &quot;de-breastsymptoms&quot;:
  </a:s>
               <a:s r="1151">
                  <a:s>if </a:s>
                  <a:s r="1174">
                     <a:s r="1172">
                        <a:s>MostRecentBreastSymptomObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> 
    then </a:s>
                  <a:s r="1180">
                     <a:s r="1175">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1180">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="1176">
                           <a:s r="1178">
                              <a:s r="1177">
                                 <a:s>MostRecentBreastSymptomObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1178">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1179">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  else  
    </a:s>
                  <a:s r="1181">
                     <a:s r="1182">
                        <a:s>exists </a:s>
                        <a:s r="1207">
                           <a:s>EncounterBreastSymptomConditions</a:s>
                        </a:s>
                     </a:s>
                     <a:s> or </a:s>
                     <a:s r="1253">
                        <a:s>EncounterReasonBreastSymptoms</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1151" locator="284:3-287:76" xsi:type="If">
            <condition localId="1174" locator="284:6-284:51" xsi:type="Not">
               <operand localId="1173" locator="284:6-284:51" xsi:type="IsNull">
                  <operand localId="1172" locator="284:6-284:39" name="MostRecentBreastSymptomObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="1180" locator="285:10-285:83" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1176" locator="285:32-285:82" strict="false" xsi:type="As">
                  <operand localId="1178" locator="285:32-285:71" path="value" xsi:type="Property">
                     <source localId="1177" locator="285:32-285:65" name="MostRecentBreastSymptomObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1179" locator="285:76-285:82" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="1181" locator="287:5-287:76" xsi:type="Or">
               <operand localId="1182" locator="287:5-287:43" xsi:type="Exists">
                  <signature localId="1208" xsi:type="ListTypeSpecifier">
                     <elementType localId="1209" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1207" locator="287:12-287:43" name="EncounterBreastSymptomConditions" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="1253" locator="287:48-287:76" name="EncounterReasonBreastSymptoms" xsi:type="ExpressionRef"/>
            </else>
         </expression>
      </def>
      <def localId="1261" locator="327:1-328:56" name="NewOrWorseningBreastFindingsObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1261">
               <a:s>define NewOrWorseningBreastFindingsObservations:
  </a:s>
               <a:s r="1264">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;New or worsening breast exam findings&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1264" locator="328:3-328:56" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="1272" xsi:type="ToList">
               <operand localId="1263" locator="328:17-328:55" name="New or worsening breast exam findings" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="1258" locator="323:1-325:35" name="MostRecentBreastFindingsObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1258">
               <a:s>define MostRecentBreastFindingsObservation:
  </a:s>
               <a:s r="1276">
                  <a:s r="1259">
                     <a:s>BCSMCommon</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1276">
                     <a:s>MostRecentLocalObservation(</a:s>
                     <a:s r="1273">
                        <a:s>NewOrWorseningBreastFindingsObservations</a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="1274">
                        <a:s>encounter</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="1275">
                        <a:s>SymptomaticLookBack</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1276" locator="324:3-325:35" name="MostRecentLocalObservation" libraryName="BCSMCommon" xsi:type="FunctionRef">
            <operand localId="1273" locator="324:41-324:80" name="NewOrWorseningBreastFindingsObservations" xsi:type="ExpressionRef"/>
            <operand localId="1274" locator="325:5-325:13" name="encounter" xsi:type="ParameterRef"/>
            <operand localId="1275" locator="325:16-325:34" name="SymptomaticLookBack" xsi:type="ParameterRef"/>
         </expression>
      </def>
      <def localId="1255" locator="318:1-321:12" name="de-breastfindings" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1255">
               <a:s>//------------------------------------------------------------------------------
// Breast exam findings
//------------------------------------------------------------------------------

define &quot;de-breastfindings&quot;:
  </a:s>
               <a:s r="1256">
                  <a:s>if </a:s>
                  <a:s r="1279">
                     <a:s r="1277">
                        <a:s>MostRecentBreastFindingsObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> 
    then </a:s>
                  <a:s r="1285">
                     <a:s r="1280">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1285">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="1281">
                           <a:s r="1283">
                              <a:s r="1282">
                                 <a:s>MostRecentBreastFindingsObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1283">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1284">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="1286">
  else false</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1256" locator="319:3-321:12" xsi:type="If">
            <condition localId="1279" locator="319:6-319:52" xsi:type="Not">
               <operand localId="1278" locator="319:6-319:52" xsi:type="IsNull">
                  <operand localId="1277" locator="319:6-319:40" name="MostRecentBreastFindingsObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="1285" locator="320:10-320:84" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1281" locator="320:32-320:83" strict="false" xsi:type="As">
                  <operand localId="1283" locator="320:32-320:72" path="value" xsi:type="Property">
                     <source localId="1282" locator="320:32-320:66" name="MostRecentBreastFindingsObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1284" locator="320:77-320:83" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="1286" locator="321:8-321:12" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1294" locator="342:1-343:52" name="ReducedLifeExpectancyObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1294">
               <a:s>define ReducedLifeExpectancyObservations:  
  </a:s>
               <a:s r="1297">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Reduced life expectancy indicator&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1297" locator="343:3-343:52" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="1305" xsi:type="ToList">
               <operand localId="1296" locator="343:17-343:51" name="Reduced life expectancy indicator" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="1291" locator="339:1-340:112" name="MostRecentReducedLifeExpectancyObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1291">
               <a:s>define MostRecentReducedLifeExpectancyObservation:
  </a:s>
               <a:s r="1309">
                  <a:s r="1292">
                     <a:s>BCSMCommon</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1309">
                     <a:s>MostRecentLocalObservation(</a:s>
                     <a:s r="1306">
                        <a:s>ReducedLifeExpectancyObservations</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="1307">
                        <a:s>encounter</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="1308">
                        <a:s>ObservationLookbackPeriod</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1309" locator="340:3-340:112" name="MostRecentLocalObservation" libraryName="BCSMCommon" xsi:type="FunctionRef">
            <operand localId="1306" locator="340:41-340:73" name="ReducedLifeExpectancyObservations" xsi:type="ExpressionRef"/>
            <operand localId="1307" locator="340:76-340:84" name="encounter" xsi:type="ParameterRef"/>
            <operand localId="1308" locator="340:87-340:111" name="ObservationLookbackPeriod" xsi:type="ParameterRef"/>
         </expression>
      </def>
      <def localId="1320" locator="345:1-346:23" name="de-hospice" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1320">
               <a:s>define &quot;de-hospice&quot;:
  </a:s>
               <a:s r="1322">
                  <a:s r="1321">
                     <a:s>Hospice</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1322">
                     <a:s>&quot;Has Hospice&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1322" locator="346:3-346:23" name="Has Hospice" libraryName="Hospice" xsi:type="ExpressionRef"/>
      </def>
      <def localId="1288" locator="334:1-337:19" name="de-lifeexp" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1288">
               <a:s>//------------------------------------------------------------------------------
// Life expectancy
//------------------------------------------------------------------------------

define &quot;de-lifeexp&quot;:
  </a:s>
               <a:s r="1289">
                  <a:s>if </a:s>
                  <a:s r="1312">
                     <a:s r="1310">
                        <a:s>MostRecentReducedLifeExpectancyObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> 
    then </a:s>
                  <a:s r="1318">
                     <a:s r="1313">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1318">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="1314">
                           <a:s r="1316">
                              <a:s r="1315">
                                 <a:s>MostRecentReducedLifeExpectancyObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1316">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1317">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  else </a:s>
                  <a:s r="1323">
                     <a:s>&quot;de-hospice&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1289" locator="335:3-337:19" xsi:type="If">
            <condition localId="1312" locator="335:6-335:59" xsi:type="Not">
               <operand localId="1311" locator="335:6-335:59" xsi:type="IsNull">
                  <operand localId="1310" locator="335:6-335:47" name="MostRecentReducedLifeExpectancyObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="1318" locator="336:10-336:91" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1314" locator="336:32-336:90" strict="false" xsi:type="As">
                  <operand localId="1316" locator="336:32-336:79" path="value" xsi:type="Property">
                     <source localId="1315" locator="336:32-336:73" name="MostRecentReducedLifeExpectancyObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1317" locator="336:84-336:90" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="1323" locator="337:8-337:19" name="de-hospice" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="1328" locator="355:1-356:38" name="LactatingObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1328">
               <a:s>define LactatingObservations:
  </a:s>
               <a:s r="1331">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Currently lactating&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1331" locator="356:3-356:38" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="1339" xsi:type="ToList">
               <operand localId="1330" locator="356:17-356:37" name="Currently lactating" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="1325" locator="352:1-353:100" name="MostRecentLactatingObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1325">
               <a:s>//------------------------------------------------------------------------------
// Lactating
//------------------------------------------------------------------------------

define MostRecentLactatingObservation:
  </a:s>
               <a:s r="1343">
                  <a:s r="1326">
                     <a:s>BCSMCommon</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1343">
                     <a:s>MostRecentLocalObservation(</a:s>
                     <a:s r="1340">
                        <a:s>LactatingObservations</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="1341">
                        <a:s>encounter</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="1342">
                        <a:s>ObservationLookbackPeriod</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1343" locator="353:3-353:100" name="MostRecentLocalObservation" libraryName="BCSMCommon" xsi:type="FunctionRef">
            <operand localId="1340" locator="353:41-353:61" name="LactatingObservations" xsi:type="ExpressionRef"/>
            <operand localId="1341" locator="353:64-353:72" name="encounter" xsi:type="ParameterRef"/>
            <operand localId="1342" locator="353:75-353:99" name="ObservationLookbackPeriod" xsi:type="ParameterRef"/>
         </expression>
      </def>
      <def localId="1353" locator="394:1-399:5" name="PregnancyEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1353">
               <a:s>define PregnancyEpisodesOfCare:
  </a:s>
               <a:s r="1373">
                  <a:s>
                     <a:s r="1354">
                        <a:s r="1355">
                           <a:s r="1355">
                              <a:s>[EpisodeOfCare]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="1372">
                     <a:s>where
    </a:s>
                     <a:s r="1372">
                        <a:s>AnyTrue(
      </a:s>
                        <a:s r="1369">
                           <a:s>
                              <a:s r="1356">
                                 <a:s r="1358">
                                    <a:s>(</a:s>
                                    <a:s r="1358">
                                       <a:s r="1357">
                                          <a:s>E</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1358">
                                          <a:s>type</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> t</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        </a:s>
                           <a:s r="1359">
                              <a:s>return </a:s>
                              <a:s r="1360">
                                 <a:s r="1361">
                                    <a:s>t</a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1362">
                                    <a:s>&quot;Pregnancy Episode Of Care&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1373" locator="395:3-399:5" xsi:type="Query">
            <source localId="1354" locator="395:3-395:19" alias="E">
               <expression localId="1355" locator="395:3-395:17" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
            </source>
            <where localId="1372" locator="395:21-399:5" xsi:type="AnyTrue">
               <source localId="1369" locator="397:7-398:46" xsi:type="Query">
                  <source localId="1356" locator="397:7-397:16" alias="t">
                     <expression localId="1358" locator="397:7-397:14" path="type" scope="E" xsi:type="Property"/>
                  </source>
                  <return localId="1359" locator="398:9-398:46">
                     <expression localId="1360" locator="398:16-398:46" xsi:type="Equivalent">
                        <signature localId="1367" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1368" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1363" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1361" locator="398:16" name="t" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="1365" xsi:type="ToConcept">
                           <signature localId="1366" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1362" locator="398:20-398:46" name="Pregnancy Episode Of Care" xsi:type="CodeRef"/>
                        </operand>
                     </expression>
                  </return>
               </source>
            </where>
         </expression>
      </def>
      <def localId="1350" locator="401:1-403:27" name="ActivePregnancyEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1350">
               <a:s>define ActivePregnancyEpisodesOfCare:
  </a:s>
               <a:s r="1383">
                  <a:s>
                     <a:s r="1351">
                        <a:s r="1374">
                           <a:s>
                              <a:s>PregnancyEpisodesOfCare</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1375">
                     <a:s>where </a:s>
                     <a:s r="1375">
                        <a:s r="1377">
                           <a:s r="1376">
                              <a:s>P</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1377">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> ~ </a:s>
                        <a:s r="1378">
                           <a:s>'active'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1383" locator="402:3-403:27" xsi:type="Query">
            <source localId="1351" locator="402:3-402:27" alias="P">
               <expression localId="1374" locator="402:3-402:25" name="PregnancyEpisodesOfCare" xsi:type="ExpressionRef"/>
            </source>
            <where localId="1375" locator="403:3-403:27" xsi:type="Equivalent">
               <signature localId="1381" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1382" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="1379" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="1380" name="fhir:EpisodeOfCareStatus" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1377" locator="403:9-403:16" path="status" scope="P" xsi:type="Property"/>
               </operand>
               <operand localId="1378" locator="403:20-403:27" valueType="t:String" value="active" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="1348" locator="409:1-410:39" name="HasActivePregnancyEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1348">
               <a:s>define HasActivePregnancyEpisodesOfCare:
  </a:s>
               <a:s r="1389">
                  <a:s>Exists(</a:s>
                  <a:s r="1384">
                     <a:s>ActivePregnancyEpisodesOfCare</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1389" locator="410:3-410:39" xsi:type="Exists">
            <signature localId="1390" xsi:type="ListTypeSpecifier">
               <elementType localId="1391" name="fhir:EpisodeOfCare" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="1384" locator="410:10-410:38" name="ActivePregnancyEpisodesOfCare" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="1398" locator="405:1-407:29" name="FinishedPregnancyEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1398">
               <a:s>define FinishedPregnancyEpisodesOfCare:
  </a:s>
               <a:s r="1409">
                  <a:s>
                     <a:s r="1399">
                        <a:s r="1400">
                           <a:s>
                              <a:s>PregnancyEpisodesOfCare</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1401">
                     <a:s>where </a:s>
                     <a:s r="1401">
                        <a:s r="1403">
                           <a:s r="1402">
                              <a:s>P</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1403">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> ~ </a:s>
                        <a:s r="1404">
                           <a:s>'finished'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1409" locator="406:3-407:29" xsi:type="Query">
            <source localId="1399" locator="406:3-406:27" alias="P">
               <expression localId="1400" locator="406:3-406:25" name="PregnancyEpisodesOfCare" xsi:type="ExpressionRef"/>
            </source>
            <where localId="1401" locator="407:3-407:29" xsi:type="Equivalent">
               <signature localId="1407" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="1408" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="1405" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="1406" name="fhir:EpisodeOfCareStatus" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1403" locator="407:9-407:16" path="status" scope="P" xsi:type="Property"/>
               </operand>
               <operand localId="1404" locator="407:20-407:29" valueType="t:String" value="finished" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="1396" locator="412:1-413:41" name="HasFinishedPregnancyEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1396">
               <a:s>define HasFinishedPregnancyEpisodesOfCare:
  </a:s>
               <a:s r="1415">
                  <a:s>Exists(</a:s>
                  <a:s r="1410">
                     <a:s>FinishedPregnancyEpisodesOfCare</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1415" locator="413:3-413:41" xsi:type="Exists">
            <signature localId="1416" xsi:type="ListTypeSpecifier">
               <elementType localId="1417" name="fhir:EpisodeOfCare" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="1410" locator="413:10-413:40" name="FinishedPregnancyEpisodesOfCare" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="1422" locator="375:1-383:3" name="PregnancyDiagnoses" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1422">
               <a:s>define PregnancyDiagnoses:
  </a:s>
               <a:s r="1442">
                  <a:s r="1423">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1442">
                     <a:s>Confirmed(
    </a:s>
                     <a:s r="1441">
                        <a:s r="1424">
                           <a:s>C3F</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1441">
                           <a:s>ActiveCondition(
      </a:s>
                           <a:s r="1440">
                              <a:s r="1425">
                                 <a:s>C3F</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1440">
                                 <a:s>ConditionLookBack(
        </a:s>
                                 <a:s r="1438">
                                    <a:s r="1428">
                                       <a:s>[Condition: </a:s>
                                       <a:s>
                                          <a:s>&quot;Pregnancy&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                    <a:s> union </a:s>
                                    <a:s r="1434">
                                       <a:s>[Condition: </a:s>
                                       <a:s>
                                          <a:s>&quot;Pregnancy (New ICD10 codes published in 2018 and 2020)&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
        </a:s>
                                 <a:s r="1439">
                                    <a:s>42 weeks</a:s>
                                 </a:s>
                                 <a:s>
      )</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    )</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1442" locator="376:3-383:3" name="Confirmed" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1441" locator="377:5-382:5" name="ActiveCondition" libraryName="C3F" xsi:type="FunctionRef">
               <operand localId="1440" locator="378:7-381:7" name="ConditionLookBack" libraryName="C3F" xsi:type="FunctionRef">
                  <operand localId="1438" locator="379:9-379:108" xsi:type="Union">
                     <operand localId="1428" locator="379:9-379:32" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                        <codes localId="1427" locator="379:21-379:31" name="Pregnancy" preserve="true" xsi:type="ValueSetRef"/>
                     </operand>
                     <operand localId="1434" locator="379:40-379:108" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                        <codes localId="1433" locator="379:52-379:107" name="Pregnancy (New ICD10 codes published in 2018 and 2020)" preserve="true" xsi:type="ValueSetRef"/>
                     </operand>
                  </operand>
                  <operand localId="1439" locator="380:9-380:16" value="42" unit="weeks" xsi:type="Quantity"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="1452" locator="385:1-392:3" name="PregnancyObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1452">
               <a:s>define PregnancyObservations:
  </a:s>
               <a:s r="1481">
                  <a:s r="1453">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1481">
                     <a:s>ObservationLookBack(
    </a:s>
                     <a:s r="1479">
                        <a:s r="1454">
                           <a:s>C3F</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1479">
                           <a:s>Verified(
      </a:s>
                           <a:s r="1478">
                              <a:s>
                                 <a:s r="1455">
                                    <a:s r="1458">
                                       <a:s r="1458">
                                          <a:s>[Observation: </a:s>
                                          <a:s>
                                             <a:s>&quot;Pregnancy Status&quot;</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> P</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        </a:s>
                              <a:s r="1467">
                                 <a:s>where </a:s>
                                 <a:s r="1467">
                                    <a:s r="1469">
                                       <a:s r="1468">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1469">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="1470">
                                       <a:s>&quot;Patient currently pregnant&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    )</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="1480">
                        <a:s>42 weeks</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1481" locator="386:3-392:3" name="ObservationLookBack" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1479" locator="387:5-390:5" name="Verified" libraryName="C3F" xsi:type="FunctionRef">
               <operand localId="1478" locator="388:7-389:52" xsi:type="Query">
                  <source localId="1455" locator="388:7-388:41" alias="P">
                     <expression localId="1458" locator="388:7-388:39" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                        <codes localId="1466" xsi:type="ToList">
                           <operand localId="1457" locator="388:21-388:38" name="Pregnancy Status" xsi:type="CodeRef"/>
                        </codes>
                     </expression>
                  </source>
                  <where localId="1467" locator="389:9-389:52" xsi:type="Equivalent">
                     <signature localId="1476" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1477" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1472" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1471" asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1469" locator="389:15-389:21" path="value" scope="P" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="1474" xsi:type="ToConcept">
                        <signature localId="1475" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1470" locator="389:25-389:52" name="Patient currently pregnant" xsi:type="CodeRef"/>
                     </operand>
                  </where>
               </operand>
            </operand>
            <operand localId="1480" locator="391:5-391:12" value="42" unit="weeks" xsi:type="Quantity"/>
         </expression>
      </def>
      <def localId="1345" locator="362:1-373:63" name="Pregnant" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1345">
               <a:s>//------------------------------------------------------------------------------
// Pregnancy
//------------------------------------------------------------------------------

define Pregnant:
  // IF any Epsidose of care with status = active
  //    Pregnant = true
  // If any Episode of care with status = finished
  //    Pregnant = false
  // Use existing logic with conditions and observations
  </a:s>
               <a:s r="1346">
                  <a:s>if </a:s>
                  <a:s r="1392">
                     <a:s>(</a:s>
                     <a:s r="1392">
                        <a:s>HasActivePregnancyEpisodesOfCare</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s r="1393"> then
    true
  else </a:s>
                  <a:s r="1394">
                     <a:s>if </a:s>
                     <a:s r="1418">
                        <a:s>(</a:s>
                        <a:s r="1418">
                           <a:s>HasFinishedPregnancyEpisodesOfCare</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s r="1419"> then
    false
  else
    </a:s>
                     <a:s r="1420">
                        <a:s r="1448">
                           <a:s>Exists(</a:s>
                           <a:s r="1443">
                              <a:s>PregnancyDiagnoses</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> or </a:s>
                        <a:s r="1487">
                           <a:s>Exists(</a:s>
                           <a:s r="1482">
                              <a:s>PregnancyObservations</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1346" locator="368:3-373:63" xsi:type="If">
            <condition localId="1392" locator="368:6-368:39" name="HasActivePregnancyEpisodesOfCare" xsi:type="ExpressionRef"/>
            <then localId="1393" locator="369:5-369:8" valueType="t:Boolean" value="true" xsi:type="Literal"/>
            <else localId="1394" locator="370:8-373:63" xsi:type="If">
               <condition localId="1418" locator="370:11-370:46" name="HasFinishedPregnancyEpisodesOfCare" xsi:type="ExpressionRef"/>
               <then localId="1419" locator="371:5-371:9" valueType="t:Boolean" value="false" xsi:type="Literal"/>
               <else localId="1420" locator="373:5-373:63" xsi:type="Or">
                  <operand localId="1448" locator="373:5-373:30" xsi:type="Exists">
                     <signature localId="1449" xsi:type="ListTypeSpecifier">
                        <elementType localId="1450" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="1443" locator="373:12-373:29" name="PregnancyDiagnoses" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="1487" locator="373:35-373:63" xsi:type="Exists">
                     <signature localId="1488" xsi:type="ListTypeSpecifier">
                        <elementType localId="1489" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="1482" locator="373:42-373:62" name="PregnancyObservations" xsi:type="ExpressionRef"/>
                  </operand>
               </else>
            </else>
         </expression>
      </def>
      <def localId="1494" locator="428:1-431:3" name="MostRecentGeneticMarkerOrSyndromeObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1494">
               <a:s>define MostRecentGeneticMarkerOrSyndromeObservation:
  </a:s>
               <a:s r="1507">
                  <a:s r="1495">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1507">
                     <a:s>MostRecent(
    </a:s>
                     <a:s r="1498">
                        <a:s>[Observation: </a:s>
                        <a:s>
                           <a:s>&quot;Genetic marker or syndrome associated with breast cancer&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1507" locator="429:3-431:3" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1498" locator="430:5-430:77" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="1506" xsi:type="ToList">
                  <operand localId="1497" locator="430:19-430:76" name="Genetic marker or syndrome associated with breast cancer" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1528" locator="433:1-436:3" name="GeneticMarkerOrSyndromeCondition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1528">
               <a:s>define GeneticMarkerOrSyndromeCondition:
  </a:s>
               <a:s r="1536">
                  <a:s r="1529">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1536">
                     <a:s>ActiveCondition(
    </a:s>
                     <a:s r="1532">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Genetic Marker of Susceptibility to Breast Cancer&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1536" locator="434:3-436:3" name="ActiveCondition" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1532" locator="435:5-435:68" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1531" locator="435:17-435:67" name="Genetic Marker of Susceptibility to Breast Cancer" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1519" locator="424:1-426:46" name="GeneticMarkerOrSyndrome" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1519">
               <a:s>define GeneticMarkerOrSyndrome:
  </a:s>
               <a:s r="1520">
                  <a:s r="1523">
                     <a:s r="1522">
                        <a:s r="1521">
                           <a:s>MostRecentGeneticMarkerOrSyndromeObservation</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1522">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s> is true</a:s>
                  </a:s>
                  <a:s>
    or </a:s>
                  <a:s r="1526">
                     <a:s>exists </a:s>
                     <a:s r="1537">
                        <a:s>GeneticMarkerOrSyndromeCondition</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1520" locator="425:3-426:46" xsi:type="Or">
            <operand localId="1523" locator="425:3-425:60" xsi:type="IsTrue">
               <operand localId="1525" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="1524" asType="fhir:boolean" xsi:type="As">
                     <operand localId="1522" locator="425:3-425:52" path="value" xsi:type="Property">
                        <source localId="1521" locator="425:3-425:46" name="MostRecentGeneticMarkerOrSyndromeObservation" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
               </operand>
            </operand>
            <operand localId="1526" locator="426:8-426:46" xsi:type="Exists">
               <signature localId="1538" xsi:type="ListTypeSpecifier">
                  <elementType localId="1539" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1537" locator="426:15-426:46" name="GeneticMarkerOrSyndromeCondition" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1550" locator="443:1-444:59" name="BRCA-1MutationConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1550">
               <a:s>define &quot;BRCA-1MutationConditions&quot;:
  </a:s>
               <a:s r="1558">
                  <a:s r="1551">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1558">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1554">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;BRCA1 Gene Mutation&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1558" locator="444:3-444:59" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1554" locator="444:25-444:58" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1553" locator="444:37-444:57" name="BRCA1 Gene Mutation" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1564" locator="446:1-447:59" name="BRCA-2MutationConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1564">
               <a:s>define &quot;BRCA-2MutationConditions&quot;:
  </a:s>
               <a:s r="1572">
                  <a:s r="1565">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1572">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1568">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;BRCA2 Gene Mutation&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1572" locator="447:3-447:59" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1568" locator="447:25-447:58" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1567" locator="447:37-447:57" name="BRCA2 Gene Mutation" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1578" locator="449:1-450:60" name="Li-FraumeniSyndromeConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1578">
               <a:s>define &quot;Li-FraumeniSyndromeConditions&quot;:
  </a:s>
               <a:s r="1591">
                  <a:s r="1579">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1591">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1582">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Li-Fraumeni Syndrome&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1591" locator="450:3-450:60" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1582" locator="450:25-450:59" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="1590" xsi:type="ToList">
                  <operand localId="1581" locator="450:37-450:58" name="Li-Fraumeni Syndrome" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1597" locator="452:1-453:55" name="CowdenSyndromeConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1597">
               <a:s>define CowdenSyndromeConditions:
  </a:s>
               <a:s r="1610">
                  <a:s r="1598">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1610">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1601">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Cowden Syndrome&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1610" locator="453:3-453:55" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1601" locator="453:25-453:54" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="1609" xsi:type="ToList">
                  <operand localId="1600" locator="453:37-453:53" name="Cowden Syndrome" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1616" locator="455:1-456:73" name="Bannayan-Riley-RuvalcabaSyndromeConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1616">
               <a:s>define &quot;Bannayan-Riley-RuvalcabaSyndromeConditions&quot;:
  </a:s>
               <a:s r="1629">
                  <a:s r="1617">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1629">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1620">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Bannayan-Riley-Ruvalcaba Syndrome&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1629" locator="456:3-456:73" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1620" locator="456:25-456:72" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="1628" xsi:type="ToList">
                  <operand localId="1619" locator="456:37-456:71" name="Bannayan-Riley-Ruvalcaba Syndrome" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1543" locator="438:1-441:55" name="de-acsgeneticrisk" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1543">
               <a:s>define &quot;de-acsgeneticrisk&quot;:
  </a:s>
               <a:s r="1544">
                  <a:s r="1545">
                     <a:s r="1546">
                        <a:s r="1547">
                           <a:s r="1548">
                              <a:s>exists </a:s>
                              <a:s r="1559">
                                 <a:s>&quot;BRCA-1MutationConditions&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> or </a:s>
                           <a:s r="1562">
                              <a:s>exists </a:s>
                              <a:s r="1573">
                                 <a:s>&quot;BRCA-2MutationConditions&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
    </a:s>
                        <a:s r="1576">
                           <a:s>exists </a:s>
                           <a:s r="1592">
                              <a:s>&quot;Li-FraumeniSyndromeConditions&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> or </a:s>
                     <a:s r="1595">
                        <a:s>exists </a:s>
                        <a:s r="1611">
                           <a:s>CowdenSyndromeConditions</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> or
    </a:s>
                  <a:s r="1614">
                     <a:s>exists </a:s>
                     <a:s r="1630">
                        <a:s>&quot;Bannayan-Riley-RuvalcabaSyndromeConditions&quot;</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1544" locator="439:3-441:55" xsi:type="Or">
            <operand localId="1545" locator="439:3-440:77" xsi:type="Or">
               <operand localId="1546" locator="439:3-440:42" xsi:type="Or">
                  <operand localId="1547" locator="439:3-439:72" xsi:type="Or">
                     <operand localId="1548" locator="439:3-439:35" xsi:type="Exists">
                        <signature localId="1560" xsi:type="ListTypeSpecifier">
                           <elementType localId="1561" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="1559" locator="439:10-439:35" name="BRCA-1MutationConditions" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="1562" locator="439:40-439:72" xsi:type="Exists">
                        <signature localId="1574" xsi:type="ListTypeSpecifier">
                           <elementType localId="1575" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="1573" locator="439:47-439:72" name="BRCA-2MutationConditions" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="1576" locator="440:5-440:42" xsi:type="Exists">
                     <signature localId="1593" xsi:type="ListTypeSpecifier">
                        <elementType localId="1594" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="1592" locator="440:12-440:42" name="Li-FraumeniSyndromeConditions" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="1595" locator="440:47-440:77" xsi:type="Exists">
                  <signature localId="1612" xsi:type="ListTypeSpecifier">
                     <elementType localId="1613" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1611" locator="440:54-440:77" name="CowdenSyndromeConditions" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="1614" locator="441:5-441:55" xsi:type="Exists">
               <signature localId="1631" xsi:type="ListTypeSpecifier">
                  <elementType localId="1632" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1630" locator="441:12-441:55" name="Bannayan-Riley-RuvalcabaSyndromeConditions" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1491" locator="419:1-422:61" name="de-geneticrisk" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1491">
               <a:s>//------------------------------------------------------------------------------
// Genetic syndrome
//------------------------------------------------------------------------------

define &quot;de-geneticrisk&quot;:
  </a:s>
               <a:s r="1492">
                  <a:s>if </a:s>
                  <a:s r="1510">
                     <a:s r="1508">
                        <a:s>MostRecentGeneticMarkerOrSyndromeObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s>
    then </a:s>
                  <a:s r="1516">
                     <a:s r="1511">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1516">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="1512">
                           <a:s r="1514">
                              <a:s r="1513">
                                 <a:s>MostRecentGeneticMarkerOrSyndromeObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1514">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1515">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  else </a:s>
                  <a:s r="1517">
                     <a:s r="1541">
                        <a:s r="1540">
                           <a:s>GeneticMarkerOrSyndrome</a:s>
                        </a:s>
                        <a:s> is true</a:s>
                     </a:s>
                     <a:s> or </a:s>
                     <a:s r="1633">
                        <a:s>&quot;de-acsgeneticrisk&quot;</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1492" locator="420:3-422:61" xsi:type="If">
            <condition localId="1510" locator="420:6-420:61" xsi:type="Not">
               <operand localId="1509" locator="420:6-420:61" xsi:type="IsNull">
                  <operand localId="1508" locator="420:6-420:49" name="MostRecentGeneticMarkerOrSyndromeObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="1516" locator="421:10-421:93" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1512" locator="421:32-421:92" strict="false" xsi:type="As">
                  <operand localId="1514" locator="421:32-421:81" path="value" xsi:type="Property">
                     <source localId="1513" locator="421:32-421:75" name="MostRecentGeneticMarkerOrSyndromeObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1515" locator="421:86-421:92" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="1517" locator="422:8-422:61" xsi:type="Or">
               <operand localId="1541" locator="422:8-422:38" xsi:type="IsTrue">
                  <operand localId="1540" locator="422:8-422:30" name="GeneticMarkerOrSyndrome" xsi:type="ExpressionRef"/>
               </operand>
               <operand localId="1633" locator="422:43-422:61" name="de-acsgeneticrisk" xsi:type="ExpressionRef"/>
            </else>
         </expression>
      </def>
      <def localId="1635" locator="462:1-463:77" name="de-chestxrt" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1635">
               <a:s>//------------------------------------------------------------------------------
// Chest XRT
//------------------------------------------------------------------------------

define &quot;de-chestxrt&quot;:
  </a:s>
               <a:s r="1648">
                  <a:s r="1636">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1648">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1639">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;History of radiation therapy to chest&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1648" locator="463:3-463:77" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1639" locator="463:25-463:76" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="1647" xsi:type="ToList">
                  <operand localId="1638" locator="463:37-463:75" name="History of radiation therapy to chest" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1653" locator="475:1-476:74" name="HistoryOfChestRadiationAges10To30Observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1653">
               <a:s>define HistoryOfChestRadiationAges10To30Observation:
  </a:s>
               <a:s r="1666">
                  <a:s r="1654">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1666">
                     <a:s>MostRecent(</a:s>
                     <a:s r="1657">
                        <a:s>[Observation: </a:s>
                        <a:s>
                           <a:s>&quot;History of chest radiation ages 10-30 y&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1666" locator="476:3-476:74" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1657" locator="476:18-476:73" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="1665" xsi:type="ToList">
                  <operand localId="1656" locator="476:32-476:72" name="History of chest radiation ages 10-30 y" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1678" locator="470:1-473:120" name="HistoryOfChestRadiationAges10To30Condition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1678">
               <a:s>define HistoryOfChestRadiationAges10To30Condition:    
  </a:s>
               <a:s r="1766">
                  <a:s>
                     <a:s r="1679">
                        <a:s r="1680">
                           <a:s>
                              <a:s>&quot;de-chestxrt&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="1681">
                     <a:s>where </a:s>
                     <a:s r="1681">
                        <a:s r="1682">
                           <a:s r="1683">
                              <a:s r="1684">
                                 <a:s r="1690">
                                    <a:s r="1685">
                                       <a:s r="1687">
                                          <a:s r="1686">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1687">
                                             <a:s>onset</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="1688">
                                          <a:s>Age</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is not null</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="1691">
                                    <a:s r="1694">
                                       <a:s r="1693">
                                          <a:s r="1692">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1693">
                                             <a:s>onset</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1694">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1695"> >= 10</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1703">
                                 <a:s r="1706">
                                    <a:s r="1705">
                                       <a:s r="1704">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1705">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1706">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="1707"> &lt;= 30</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="1715">
                              <a:s r="1718">
                                 <a:s r="1717">
                                    <a:s r="1716">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1717">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1718">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1719">
                                 <a:s>'a'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    or </a:s>
                        <a:s r="1724">
                           <a:s r="1725">
                              <a:s r="1726">
                                 <a:s r="1732">
                                    <a:s r="1727">
                                       <a:s r="1729">
                                          <a:s r="1728">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1729">
                                             <a:s>abatement</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="1730">
                                          <a:s>Age</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is not null</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="1733">
                                    <a:s r="1736">
                                       <a:s r="1735">
                                          <a:s r="1734">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1735">
                                             <a:s>abatement</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1736">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1737"> >= 10</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1745">
                                 <a:s r="1748">
                                    <a:s r="1747">
                                       <a:s r="1746">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1747">
                                          <a:s>abatement</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1748">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="1749"> &lt;= 30</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="1757">
                              <a:s r="1760">
                                 <a:s r="1759">
                                    <a:s r="1758">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1759">
                                       <a:s>abatement</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1760">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1761">
                                 <a:s>'a'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1766" locator="471:3-473:120" xsi:type="Query">
            <source localId="1679" locator="471:3-471:17" alias="C">
               <expression localId="1680" locator="471:3-471:15" name="de-chestxrt" xsi:type="ExpressionRef"/>
            </source>
            <where localId="1681" locator="472:5-473:120" xsi:type="Or">
               <operand localId="1682" locator="472:11-472:107" xsi:type="And">
                  <operand localId="1683" locator="472:11-472:84" xsi:type="And">
                     <operand localId="1684" locator="472:11-472:60" xsi:type="And">
                        <operand localId="1690" locator="472:11-472:36" xsi:type="Not">
                           <operand localId="1689" locator="472:11-472:36" xsi:type="IsNull">
                              <operand localId="1685" locator="472:11-472:24" strict="false" xsi:type="As">
                                 <operand localId="1687" locator="472:11-472:17" path="onset" scope="C" xsi:type="Property"/>
                                 <asTypeSpecifier localId="1688" locator="472:22-472:24" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="1691" locator="472:42-472:60" xsi:type="GreaterOrEqual">
                           <signature localId="1701" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="1702" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1697" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1696" asType="fhir:decimal" xsi:type="As">
                                 <operand localId="1694" locator="472:42-472:54" path="value" xsi:type="Property">
                                    <source localId="1693" locator="472:42-472:48" path="onset" scope="C" xsi:type="Property"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="1699" xsi:type="ToDecimal">
                              <signature localId="1700" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1695" locator="472:59-472:60" valueType="t:Integer" value="10" xsi:type="Literal"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1703" locator="472:66-472:84" xsi:type="LessOrEqual">
                        <signature localId="1713" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1714" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1709" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1708" asType="fhir:decimal" xsi:type="As">
                              <operand localId="1706" locator="472:66-472:78" path="value" xsi:type="Property">
                                 <source localId="1705" locator="472:66-472:72" path="onset" scope="C" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="1711" xsi:type="ToDecimal">
                           <signature localId="1712" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1707" locator="472:83-472:84" valueType="t:Integer" value="30" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1715" locator="472:90-472:107" xsi:type="Equal">
                     <signature localId="1722" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1723" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1720" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1721" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1718" locator="472:90-472:101" path="code" xsi:type="Property">
                           <source localId="1717" locator="472:90-472:96" path="onset" scope="C" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="1719" locator="472:105-472:107" valueType="t:String" value="a" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="1724" locator="473:8-473:120" xsi:type="And">
                  <operand localId="1725" locator="473:8-473:93" xsi:type="And">
                     <operand localId="1726" locator="473:8-473:65" xsi:type="And">
                        <operand localId="1732" locator="473:8-473:37" xsi:type="Not">
                           <operand localId="1731" locator="473:8-473:37" xsi:type="IsNull">
                              <operand localId="1727" locator="473:8-473:25" strict="false" xsi:type="As">
                                 <operand localId="1729" locator="473:8-473:18" path="abatement" scope="C" xsi:type="Property"/>
                                 <asTypeSpecifier localId="1730" locator="473:23-473:25" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="1733" locator="473:43-473:65" xsi:type="GreaterOrEqual">
                           <signature localId="1743" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="1744" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1739" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1738" asType="fhir:decimal" xsi:type="As">
                                 <operand localId="1736" locator="473:43-473:59" path="value" xsi:type="Property">
                                    <source localId="1735" locator="473:43-473:53" path="abatement" scope="C" xsi:type="Property"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="1741" xsi:type="ToDecimal">
                              <signature localId="1742" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1737" locator="473:64-473:65" valueType="t:Integer" value="10" xsi:type="Literal"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1745" locator="473:71-473:93" xsi:type="LessOrEqual">
                        <signature localId="1755" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1756" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1751" name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1750" asType="fhir:decimal" xsi:type="As">
                              <operand localId="1748" locator="473:71-473:87" path="value" xsi:type="Property">
                                 <source localId="1747" locator="473:71-473:81" path="abatement" scope="C" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="1753" xsi:type="ToDecimal">
                           <signature localId="1754" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1749" locator="473:92-473:93" valueType="t:Integer" value="30" xsi:type="Literal"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1757" locator="473:99-473:120" xsi:type="Equal">
                     <signature localId="1764" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1765" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1762" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="1763" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1760" locator="473:99-473:114" path="code" xsi:type="Property">
                           <source localId="1759" locator="473:99-473:109" path="abatement" scope="C" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand localId="1761" locator="473:118-473:120" valueType="t:String" value="a" xsi:type="Literal"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="1650" locator="465:1-468:56" name="de-chestxrtage10to30" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1650">
               <a:s>define &quot;de-chestxrtage10to30&quot;:
  </a:s>
               <a:s r="1651">
                  <a:s>if </a:s>
                  <a:s r="1669">
                     <a:s r="1667">
                        <a:s>HistoryOfChestRadiationAges10To30Observation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s>
    then </a:s>
                  <a:s r="1675">
                     <a:s r="1670">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1675">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="1671">
                           <a:s r="1673">
                              <a:s r="1672">
                                 <a:s>HistoryOfChestRadiationAges10To30Observation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1673">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="1674">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  else </a:s>
                  <a:s r="1676">
                     <a:s>exists </a:s>
                     <a:s r="1767">
                        <a:s>HistoryOfChestRadiationAges10To30Condition</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1651" locator="466:3-468:56" xsi:type="If">
            <condition localId="1669" locator="466:6-466:61" xsi:type="Not">
               <operand localId="1668" locator="466:6-466:61" xsi:type="IsNull">
                  <operand localId="1667" locator="466:6-466:49" name="HistoryOfChestRadiationAges10To30Observation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="1675" locator="467:10-467:93" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1671" locator="467:32-467:92" strict="false" xsi:type="As">
                  <operand localId="1673" locator="467:32-467:81" path="value" xsi:type="Property">
                     <source localId="1672" locator="467:32-467:75" name="HistoryOfChestRadiationAges10To30Observation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1674" locator="467:86-467:92" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="1676" locator="468:8-468:56" xsi:type="Exists">
               <signature localId="1768" xsi:type="ListTypeSpecifier">
                  <elementType localId="1769" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1767" locator="468:15-468:56" name="HistoryOfChestRadiationAges10To30Condition" xsi:type="ExpressionRef"/>
            </else>
         </expression>
      </def>
      <def localId="1809" locator="493:1-494:94" name="HistoryBreastCancerDiagnoses" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1809">
               <a:s>define HistoryBreastCancerDiagnoses:
  </a:s>
               <a:s r="1817">
                  <a:s r="1810">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1817">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1813">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;History of Breast Cancer or Breast Cancer in Remission&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1817" locator="494:3-494:94" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1813" locator="494:25-494:93" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1812" locator="494:37-494:92" name="History of Breast Cancer or Breast Cancer in Remission" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1771" locator="482:1-491:3" name="de-hxbreastca" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1771">
               <a:s>//------------------------------------------------------------------------------
// Previous breast cancer
//------------------------------------------------------------------------------

define &quot;de-hxbreastca&quot;:
  </a:s>
               <a:s r="1830">
                  <a:s r="1806">
                     <a:s>(</a:s>
                     <a:s r="1806">
                        <a:s>
                           <a:s r="1772">
                              <a:s r="1773">
                                 <a:s>
                                    <a:s>BreastCancerDiagnoses</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1774">
                           <a:s>where </a:s>
                           <a:s r="1774">
                              <a:s r="1775">
                                 <a:s r="1776">
                                    <a:s r="1778">
                                       <a:s r="1777">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1778">
                                          <a:s>clinicalStatus</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="1779">
                                       <a:s>&quot;Condition inactive&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      or </a:s>
                                 <a:s r="1786">
                                    <a:s r="1788">
                                       <a:s r="1787">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1788">
                                          <a:s>clinicalStatus</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="1789">
                                       <a:s>&quot;Condition remission&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      or </a:s>
                              <a:s r="1796">
                                 <a:s r="1798">
                                    <a:s r="1797">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1798">
                                       <a:s>clinicalStatus</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1799">
                                    <a:s>&quot;Condition resolved&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
                  <a:s>
  union
  </a:s>
                  <a:s r="1829">
                     <a:s>(</a:s>
                     <a:s r="1829">
                        <a:s>
                           <a:s r="1807">
                              <a:s r="1818">
                                 <a:s>
                                    <a:s>HistoryBreastCancerDiagnoses</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1819">
                           <a:s>where </a:s>
                           <a:s r="1819">
                              <a:s r="1821">
                                 <a:s r="1820">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1821">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="1822">
                                 <a:s>&quot;Condition active&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1830" locator="483:3-491:3" xsi:type="Union">
            <operand localId="1806" locator="483:3-487:3" xsi:type="Query">
               <source localId="1772" locator="483:4-483:26" alias="C">
                  <expression localId="1773" locator="483:4-483:24" name="BreastCancerDiagnoses" xsi:type="ExpressionRef"/>
               </source>
               <where localId="1774" locator="484:5-486:48" xsi:type="Or">
                  <operand localId="1775" locator="484:11-485:49" xsi:type="Or">
                     <operand localId="1776" locator="484:11-484:49" xsi:type="Equivalent">
                        <signature localId="1784" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1785" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1780" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1778" locator="484:11-484:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand localId="1782" xsi:type="ToConcept">
                           <signature localId="1783" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1779" locator="484:30-484:49" name="Condition inactive" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                     <operand localId="1786" locator="485:10-485:49" xsi:type="Equivalent">
                        <signature localId="1794" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1795" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1790" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1788" locator="485:10-485:25" path="clinicalStatus" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand localId="1792" xsi:type="ToConcept">
                           <signature localId="1793" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1789" locator="485:29-485:49" name="Condition remission" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1796" locator="486:10-486:48" xsi:type="Equivalent">
                     <signature localId="1804" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1805" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1800" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1798" locator="486:10-486:25" path="clinicalStatus" scope="C" xsi:type="Property"/>
                     </operand>
                     <operand localId="1802" xsi:type="ToConcept">
                        <signature localId="1803" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1799" locator="486:29-486:48" name="Condition resolved" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
            <operand localId="1829" locator="489:3-491:3" xsi:type="Query">
               <source localId="1807" locator="489:4-489:33" alias="C">
                  <expression localId="1818" locator="489:4-489:31" name="HistoryBreastCancerDiagnoses" xsi:type="ExpressionRef"/>
               </source>
               <where localId="1819" locator="490:5-490:47" xsi:type="Equivalent">
                  <signature localId="1827" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1828" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1823" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1821" locator="490:11-490:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                  </operand>
                  <operand localId="1825" xsi:type="ToConcept">
                     <signature localId="1826" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1822" locator="490:30-490:47" name="Condition active" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1839" locator="519:1-520:47" name="BreastCancerWithin5YObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1839">
               <a:s>define BreastCancerWithin5YObservations:
  </a:s>
               <a:s r="1842">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Breast cancer within 5 years&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1842" locator="520:3-520:47" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="1850" xsi:type="ToList">
               <operand localId="1841" locator="520:17-520:46" name="Breast cancer within 5 years" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="1835" locator="508:1-509:92" name="BreastCancerWithin5YEncounter" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1835">
               <a:s>define BreastCancerWithin5YEncounter:
  </a:s>
               <a:s r="1862">
                  <a:s r="1836">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1862">
                     <a:s>MostRecent(</a:s>
                     <a:s r="1861">
                        <a:s>
                           <a:s r="1837">
                              <a:s r="1851">
                                 <a:s>
                                    <a:s>BreastCancerWithin5YObservations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="1852">
                           <a:s>where </a:s>
                           <a:s r="1852">
                              <a:s r="1855">
                                 <a:s r="1854">
                                    <a:s r="1853">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1854">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1855">
                                    <a:s>reference</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1856">
                                 <a:s>encounter</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1862" locator="509:3-509:92" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1861" locator="509:18-509:91" xsi:type="Query">
               <source localId="1837" locator="509:18-509:51" alias="O">
                  <expression localId="1851" locator="509:18-509:49" name="BreastCancerWithin5YObservations" xsi:type="ExpressionRef"/>
               </source>
               <where localId="1852" locator="509:53-509:91" xsi:type="Equal">
                  <signature localId="1859" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1860" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1857" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="1858" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1855" locator="509:59-509:79" path="reference" xsi:type="Property">
                        <source localId="1854" locator="509:59-509:69" path="encounter" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="1856" locator="509:83-509:91" name="encounter" xsi:type="ParameterRef"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1868" locator="511:1-517:3" name="BreastCancerWithin5YLookback" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1868">
               <a:s>define BreastCancerWithin5YLookback:
  </a:s>
               <a:s r="1874">
                  <a:s r="1869">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1874">
                     <a:s>MostRecent(
    </a:s>
                     <a:s r="1873">
                        <a:s r="1870">
                           <a:s>C3F</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1873">
                           <a:s>ObservationLookBack(
      </a:s>
                           <a:s r="1871">
                              <a:s>BreastCancerWithin5YObservations</a:s>
                           </a:s>
                           <a:s>,
      </a:s>
                           <a:s r="1872">
                              <a:s>ObservationLookbackPeriod</a:s>
                           </a:s>
                           <a:s>
    )</a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1874" locator="512:3-517:3" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="1873" locator="513:5-516:5" name="ObservationLookBack" libraryName="C3F" xsi:type="FunctionRef">
               <operand localId="1871" locator="514:7-514:38" name="BreastCancerWithin5YObservations" xsi:type="ExpressionRef"/>
               <operand localId="1872" locator="515:7-515:31" name="ObservationLookbackPeriod" xsi:type="ParameterRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1832" locator="500:1-506:3" name="de-hxbreastcawithin5y" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1832">
               <a:s>//------------------------------------------------------------------------------
// Breast cancer onset within 5 years
//------------------------------------------------------------------------------

define &quot;de-hxbreastcawithin5y&quot;:
  </a:s>
               <a:s r="1933">
                  <a:s>Coalesce(
    </a:s>
                  <a:s r="1833">
                     <a:s r="1864">
                        <a:s r="1863">
                           <a:s>BreastCancerWithin5YEncounter</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1864">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s> as </a:s>
                     <a:s r="1865">
                        <a:s>boolean</a:s>
                     </a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1866">
                     <a:s r="1876">
                        <a:s r="1875">
                           <a:s>BreastCancerWithin5YLookback</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1876">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s> as </a:s>
                     <a:s r="1877">
                        <a:s>boolean</a:s>
                     </a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1878">
                     <a:s r="1879">
                        <a:s>(</a:s>
                        <a:s r="1879">
                           <a:s>exists </a:s>
                           <a:s r="1901">
                              <a:s>
                                 <a:s r="1880">
                                    <a:s r="1881">
                                       <a:s>
                                          <a:s>&quot;de-breastca&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> C</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="1895">
                                 <a:s>where </a:s>
                                 <a:s r="1895">
                                    <a:s r="1884">
                                       <a:s>Today()</a:s>
                                    </a:s>
                                    <a:s r="1895"> before </a:s>
                                    <a:s r="1885">
                                       <a:s r="1886">
                                          <a:s>(</a:s>
                                          <a:s r="1886">
                                             <a:s r="1888">
                                                <a:s r="1887">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1888">
                                                   <a:s>onset</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="1889">
                                                <a:s>FHIR.dateTime</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="1890">
                                          <a:s>5 years</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> or
    </a:s>
                     <a:s r="1904">
                        <a:s>(</a:s>
                        <a:s r="1904">
                           <a:s>exists </a:s>
                           <a:s r="1926">
                              <a:s>
                                 <a:s r="1905">
                                    <a:s r="1906">
                                       <a:s>
                                          <a:s>&quot;de-hxbreastca&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> P</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="1920">
                                 <a:s>where </a:s>
                                 <a:s r="1920">
                                    <a:s r="1909">
                                       <a:s>Today()</a:s>
                                    </a:s>
                                    <a:s r="1920"> before </a:s>
                                    <a:s r="1910">
                                       <a:s r="1911">
                                          <a:s>(</a:s>
                                          <a:s r="1911">
                                             <a:s r="1913">
                                                <a:s r="1912">
                                                   <a:s>P</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1913">
                                                   <a:s>onset</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="1914">
                                                <a:s>FHIR.dateTime</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="1915">
                                          <a:s>5 years</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  )</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1933" locator="501:3-506:3" xsi:type="Coalesce">
            <operand localId="1934" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1833" locator="502:5-502:50" strict="false" xsi:type="As">
                  <operand localId="1864" locator="502:5-502:39" path="value" xsi:type="Property">
                     <source localId="1863" locator="502:5-502:33" name="BreastCancerWithin5YEncounter" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1865" locator="502:44-502:50" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
            <operand localId="1935" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="1866" locator="503:5-503:49" strict="false" xsi:type="As">
                  <operand localId="1876" locator="503:5-503:38" path="value" xsi:type="Property">
                     <source localId="1875" locator="503:5-503:32" name="BreastCancerWithin5YLookback" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="1877" locator="503:43-503:49" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </operand>
            <operand localId="1878" locator="504:5-505:88" xsi:type="Or">
               <operand localId="1879" locator="504:5-504:86" xsi:type="Exists">
                  <signature localId="1902" xsi:type="ListTypeSpecifier">
                     <elementType localId="1903" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1901" locator="504:13-504:85" xsi:type="Query">
                     <source localId="1880" locator="504:13-504:27" alias="C">
                        <expression localId="1881" locator="504:13-504:25" name="de-breastca" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="1895" locator="504:29-504:85" xsi:type="Before">
                        <signature localId="1899" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1900" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1897" xsi:type="ToDateTime">
                           <signature localId="1898" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1884" locator="504:35-504:41" xsi:type="Today"/>
                        </operand>
                        <operand localId="1885" locator="504:50-504:85" xsi:type="Add">
                           <signature localId="1893" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="1894" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1891" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="1892" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1886" locator="504:50-504:75" strict="false" xsi:type="As">
                                 <operand localId="1888" locator="504:51-504:57" path="onset" scope="C" xsi:type="Property"/>
                                 <asTypeSpecifier localId="1889" locator="504:62-504:74" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand localId="1890" locator="504:79-504:85" value="5" unit="years" xsi:type="Quantity"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
               <operand localId="1904" locator="505:5-505:88" xsi:type="Exists">
                  <signature localId="1927" xsi:type="ListTypeSpecifier">
                     <elementType localId="1928" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="1926" locator="505:13-505:87" xsi:type="Query">
                     <source localId="1905" locator="505:13-505:29" alias="P">
                        <expression localId="1906" locator="505:13-505:27" name="de-hxbreastca" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="1920" locator="505:31-505:87" xsi:type="Before">
                        <signature localId="1924" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="1925" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="1922" xsi:type="ToDateTime">
                           <signature localId="1923" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1909" locator="505:37-505:43" xsi:type="Today"/>
                        </operand>
                        <operand localId="1910" locator="505:52-505:87" xsi:type="Add">
                           <signature localId="1918" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="1919" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1916" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <signature localId="1917" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="1911" locator="505:52-505:77" strict="false" xsi:type="As">
                                 <operand localId="1913" locator="505:53-505:59" path="onset" scope="P" xsi:type="Property"/>
                                 <asTypeSpecifier localId="1914" locator="505:64-505:76" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                           <operand localId="1915" locator="505:81-505:87" value="5" unit="years" xsi:type="Quantity"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="1941" locator="540:1-541:63" name="AtypicalBiopsyConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1941">
               <a:s>define AtypicalBiopsyConditions:
  </a:s>
               <a:s r="1949">
                  <a:s r="1942">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1949">
                     <a:s>ValidCondition(</a:s>
                     <a:s r="1945">
                        <a:s>[Condition: </a:s>
                        <a:s>
                           <a:s>&quot;Biopsy Atypical Results&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1949" locator="541:3-541:63" name="ValidCondition" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1945" locator="541:25-541:62" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="1944" locator="541:37-541:61" name="Biopsy Atypical Results" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1962" locator="798:1-799:54" name="AllCompletedDiagnosticReport" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1962">
               <a:s>define AllCompletedDiagnosticReport:
  </a:s>
               <a:s r="1965">
                  <a:s r="1963">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1965">
                     <a:s>CompletedDiagnosticReport(</a:s>
                     <a:s r="1964">
                        <a:s>[DiagnosticReport]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1965" locator="799:3-799:54" name="CompletedDiagnosticReport" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1964" locator="799:36-799:53" dataType="fhir:DiagnosticReport" templateId="http://hl7.org/fhir/StructureDefinition/DiagnosticReport" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="1971" locator="866:1-867:49" name="BiopsyObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1971">
               <a:s>// TODO: should report observation code be a value set?
define BiopsyObservations:
  </a:s>
               <a:s r="1974">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Breast Pathology biopsy report&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1974" locator="867:3-867:49" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="1982" xsi:type="ToList">
               <operand localId="1973" locator="867:17-867:48" name="Breast Pathology biopsy report" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="1994" locator="858:1-859:88" name="CompletedBreastBiopsyDiagnosticReports" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1994">
               <a:s>define CompletedBreastBiopsyDiagnosticReports:
  </a:s>
               <a:s r="2007">
                  <a:s r="1995">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2007">
                     <a:s>CompletedDiagnosticReport(</a:s>
                     <a:s r="1998">
                        <a:s>[DiagnosticReport: </a:s>
                        <a:s>
                           <a:s>&quot;Breast Pathology biopsy report&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2007" locator="859:3-859:88" name="CompletedDiagnosticReport" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="1998" locator="859:36-859:87" dataType="fhir:DiagnosticReport" templateId="http://hl7.org/fhir/StructureDefinition/DiagnosticReport" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="2006" xsi:type="ToList">
                  <operand localId="1997" locator="859:55-859:86" name="Breast Pathology biopsy report" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="1958" locator="841:1-849:3" name="BiopsyDiagnosticReports" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1958">
               <a:s>define BiopsyDiagnosticReports:
  </a:s>
               <a:s r="1959">
                  <a:s>distinct</a:s>
                  <a:s r="2009">
                     <a:s>(
    </a:s>
                     <a:s r="2009">
                        <a:s r="1992">
                           <a:s>(</a:s>
                           <a:s r="1992">
                              <a:s>
                                 <a:s r="1960">
                                    <a:s r="1966">
                                       <a:s>
                                          <a:s>AllCompletedDiagnosticReport</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> B</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      </a:s>
                              <a:s r="1967">
                                 <a:s>where 
        </a:s>
                                 <a:s r="1967">
                                    <a:s r="1988">
                                       <a:s>Count(
          </a:s>
                                       <a:s r="1985">
                                          <a:s r="1968">
                                             <a:s>BCSMCommon</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1985">
                                             <a:s>CollateConclusionCodes(</a:s>
                                             <a:s r="1969">
                                                <a:s>B</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1983">
                                                <a:s>BiopsyObservations</a:s>
                                             </a:s>
                                             <a:s>,</a:s>
                                             <a:s r="1984">
                                                <a:s>&quot;Breast Pathology biopsy report&quot;</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        )</a:s>
                                    </a:s>
                                    <a:s r="1989"> > 0</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> )</a:s>
                        </a:s>
                        <a:s> 
    union </a:s>
                        <a:s r="2008">
                           <a:s>CompletedBreastBiopsyDiagnosticReports</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1959" locator="842:3-849:3" xsi:type="Distinct">
            <operand localId="2009" locator="842:11-849:3" xsi:type="Union">
               <signature localId="2010" xsi:type="ListTypeSpecifier">
                  <elementType localId="2011" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <signature localId="2012" xsi:type="ListTypeSpecifier">
                  <elementType localId="2013" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1992" locator="843:5-847:15" xsi:type="Query">
                  <source localId="1960" locator="843:6-843:35" alias="B">
                     <expression localId="1966" locator="843:6-843:33" name="AllCompletedDiagnosticReport" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="1967" locator="844:7-847:13" xsi:type="Greater">
                     <signature localId="1990" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="1991" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1988" locator="845:9-847:9" xsi:type="Count">
                        <source localId="1985" locator="846:11-846:99" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                           <operand localId="1969" locator="846:45" name="B" xsi:type="AliasRef"/>
                           <operand localId="1983" locator="846:48-846:65" name="BiopsyObservations" xsi:type="ExpressionRef"/>
                           <operand localId="1984" locator="846:67-846:98" name="Breast Pathology biopsy report" xsi:type="CodeRef"/>
                        </source>
                     </operand>
                     <operand localId="1989" locator="847:13" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </where>
               </operand>
               <operand localId="2008" locator="848:11-848:48" name="CompletedBreastBiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="1955" locator="548:1-552:47" name="AtypicalBiopsyResults" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1955">
               <a:s>define AtypicalBiopsyResults:
  </a:s>
               <a:s r="2057">
                  <a:s>
                     <a:s r="1956">
                        <a:s r="2014">
                           <a:s>
                              <a:s>BiopsyDiagnosticReports</a:s>
                           </a:s>
                        </a:s>
                        <a:s> D</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="2015">
                        <a:s>cC: </a:s>
                        <a:s r="2019">
                           <a:s r="2016">
                              <a:s>BCSMCommon</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2019">
                              <a:s>CollateConclusionCodes(</a:s>
                              <a:s r="2017">
                                 <a:s>D</a:s>
                              </a:s>
                              <a:s>,</a:s>
                              <a:s r="2018">
                                 <a:s>BiopsyObservations</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2020">
                     <a:s>where </a:s>
                     <a:s r="2020">
                        <a:s r="2023">
                           <a:s r="2021">
                              <a:s>cC</a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="2022">
                              <a:s>&quot;Biopsy Atypical Results&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
      or </a:s>
                        <a:s r="2054">
                           <a:s>Exists(</a:s>
                           <a:s r="2049">
                              <a:s>
                                 <a:s r="2031">
                                    <a:s r="2042">
                                       <a:s>
                                          <a:s>cC.coding</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> c</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2043">
                                 <a:s>where </a:s>
                                 <a:s r="2043">
                                    <a:s r="2044">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2045">
                                       <a:s>Atypical</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2057" locator="549:3-552:47" xsi:type="Query">
            <source localId="1956" locator="549:3-549:27" alias="D">
               <expression localId="2014" locator="549:3-549:25" name="BiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
            </source>
            <let localId="2015" locator="550:9-550:67" identifier="cC">
               <expression localId="2019" locator="550:13-550:67" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                  <operand localId="2017" locator="550:47" name="D" xsi:type="AliasRef"/>
                  <operand localId="2018" locator="550:49-550:66" name="BiopsyObservations" xsi:type="ExpressionRef"/>
               </expression>
            </let>
            <where localId="2020" locator="551:5-552:47" xsi:type="Or">
               <operand localId="2023" locator="551:11-551:41" xsi:type="AnyInValueSet">
                  <signature localId="2029" xsi:type="ListTypeSpecifier">
                     <elementType localId="2030" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <codes localId="2024" xsi:type="Query">
                     <source localId="2025" alias="X">
                        <expression localId="2021" locator="551:11-551:12" name="cC" xsi:type="QueryLetRef"/>
                     </source>
                     <return localId="2026" distinct="false">
                        <expression localId="2028" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2027" name="X" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </codes>
                  <valueset localId="2022" locator="551:17-551:41" name="Biopsy Atypical Results" preserve="true"/>
               </operand>
               <operand localId="2054" locator="552:10-552:47" xsi:type="Exists">
                  <signature localId="2055" xsi:type="ListTypeSpecifier">
                     <elementType localId="2056" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="2049" locator="552:17-552:46" xsi:type="Query">
                     <source localId="2031" locator="552:17-552:27" alias="c">
                        <expression localId="2042" locator="552:17-552:25" xsi:type="Flatten">
                           <operand localId="2040" xsi:type="Query">
                              <source localId="2039" alias="$this">
                                 <expression localId="2032" name="cC" xsi:type="QueryLetRef"/>
                              </source>
                              <where localId="2036" xsi:type="Not">
                                 <operand localId="2035" xsi:type="IsNull">
                                    <operand localId="2034" path="coding" xsi:type="Property">
                                       <source localId="2033" name="$this" xsi:type="AliasRef"/>
                                    </operand>
                                 </operand>
                              </where>
                              <return localId="2041" distinct="false">
                                 <expression localId="2038" path="coding" xsi:type="Property">
                                    <source localId="2037" name="$this" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </operand>
                        </expression>
                     </source>
                     <where localId="2043" locator="552:29-552:46" xsi:type="Equivalent">
                        <signature localId="2047" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="2048" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2046" name="ToCode" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2044" locator="552:35" name="c" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="2045" locator="552:39-552:46" name="Atypical" xsi:type="CodeRef"/>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="1937" locator="526:1-528:32" name="de-atypicalbx" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1937">
               <a:s>//------------------------------------------------------------------------------
// Atypical biopsy
//------------------------------------------------------------------------------      

define &quot;de-atypicalbx&quot;:
  </a:s>
               <a:s r="1938">
                  <a:s r="1939">
                     <a:s>exists </a:s>
                     <a:s r="1950">
                        <a:s>AtypicalBiopsyConditions</a:s>
                     </a:s>
                  </a:s>
                  <a:s> or
    </a:s>
                  <a:s r="1953">
                     <a:s>exists </a:s>
                     <a:s r="2058">
                        <a:s>AtypicalBiopsyResults</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1938" locator="527:3-528:32" xsi:type="Or">
            <operand localId="1939" locator="527:3-527:33" xsi:type="Exists">
               <signature localId="1951" xsi:type="ListTypeSpecifier">
                  <elementType localId="1952" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="1950" locator="527:10-527:33" name="AtypicalBiopsyConditions" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="1953" locator="528:5-528:32" xsi:type="Exists">
               <signature localId="2059" xsi:type="ListTypeSpecifier">
                  <elementType localId="2060" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2058" locator="528:12-528:32" name="AtypicalBiopsyResults" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2065" locator="535:1-538:3" name="MostRecentAtypicalBiopsyConditionDate" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2065">
               <a:s>define MostRecentAtypicalBiopsyConditionDate:
  </a:s>
               <a:s r="2070">
                  <a:s r="2066">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2070">
                     <a:s>ConditionDate(
    </a:s>
                     <a:s r="2069">
                        <a:s r="2067">
                           <a:s>C3F</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2069">
                           <a:s>MostRecentCondition(</a:s>
                           <a:s r="2068">
                              <a:s>AtypicalBiopsyConditions</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2070" locator="536:3-538:3" name="ConditionDate" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="2069" locator="537:5-537:53" name="MostRecentCondition" libraryName="C3F" xsi:type="FunctionRef">
               <operand localId="2068" locator="537:29-537:52" name="AtypicalBiopsyConditions" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2074" locator="543:1-546:3" name="MostRecentAtypicalBiopsyResultDate" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2074">
               <a:s>define MostRecentAtypicalBiopsyResultDate:
  </a:s>
               <a:s r="2079">
                  <a:s r="2075">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2079">
                     <a:s>DiagnosticReportDate(
    </a:s>
                     <a:s r="2078">
                        <a:s r="2076">
                           <a:s>Common</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2078">
                           <a:s>MostRecentDiagnosticReport(</a:s>
                           <a:s r="2077">
                              <a:s>AtypicalBiopsyResults</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2079" locator="544:3-546:3" name="DiagnosticReportDate" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="2078" locator="545:5-545:60" name="MostRecentDiagnosticReport" libraryName="Common" xsi:type="FunctionRef">
               <operand localId="2077" locator="545:39-545:59" name="AtypicalBiopsyResults" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2062" locator="530:1-533:101" name="MostRecentAtypicalBiopsyDate" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2062">
               <a:s>define MostRecentAtypicalBiopsyDate:
  </a:s>
               <a:s r="2063">
                  <a:s>if </a:s>
                  <a:s r="2072">
                     <a:s r="2071">
                        <a:s>MostRecentAtypicalBiopsyConditionDate</a:s>
                     </a:s>
                     <a:s> is null</a:s>
                  </a:s>
                  <a:s> then </a:s>
                  <a:s r="2080">
                     <a:s>MostRecentAtypicalBiopsyResultDate</a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="2081">
                     <a:s>if </a:s>
                     <a:s r="2083">
                        <a:s r="2082">
                           <a:s>MostRecentAtypicalBiopsyResultDate</a:s>
                        </a:s>
                        <a:s> is null</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="2084">
                        <a:s>MostRecentAtypicalBiopsyConditionDate</a:s>
                     </a:s>
                     <a:s>
  else </a:s>
                     <a:s r="2099">
                        <a:s>Last(</a:s>
                        <a:s r="2096">
                           <a:s>
                              <a:s r="2085">
                                 <a:s r="2086">
                                    <a:s>(</a:s>
                                    <a:s r="2086">
                                       <a:s>{</a:s>
                                       <a:s r="2087">
                                          <a:s>MostRecentAtypicalBiopsyConditionDate</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="2088">
                                          <a:s>MostRecentAtypicalBiopsyResultDate</a:s>
                                       </a:s>
                                       <a:s>}</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> E</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="2089"> sort asc</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2063" locator="531:3-533:101" xsi:type="If">
            <condition localId="2072" locator="531:6-531:50" xsi:type="IsNull">
               <operand localId="2071" locator="531:6-531:42" name="MostRecentAtypicalBiopsyConditionDate" xsi:type="ExpressionRef"/>
            </condition>
            <then localId="2080" locator="531:57-531:90" name="MostRecentAtypicalBiopsyResultDate" xsi:type="ExpressionRef"/>
            <else localId="2081" locator="532:8-533:101" xsi:type="If">
               <condition localId="2083" locator="532:11-532:52" xsi:type="IsNull">
                  <operand localId="2082" locator="532:11-532:44" name="MostRecentAtypicalBiopsyResultDate" xsi:type="ExpressionRef"/>
               </condition>
               <then localId="2084" locator="532:59-532:95" name="MostRecentAtypicalBiopsyConditionDate" xsi:type="ExpressionRef"/>
               <else localId="2099" locator="533:8-533:101" xsi:type="Last">
                  <source localId="2096" locator="533:13-533:100" xsi:type="Query">
                     <source localId="2085" locator="533:13-533:91" alias="E">
                        <expression localId="2086" locator="533:13-533:89" xsi:type="List">
                           <element localId="2087" locator="533:15-533:51" name="MostRecentAtypicalBiopsyConditionDate" xsi:type="ExpressionRef"/>
                           <element localId="2088" locator="533:54-533:87" name="MostRecentAtypicalBiopsyResultDate" xsi:type="ExpressionRef"/>
                        </expression>
                     </source>
                     <sort localId="2089" locator="533:93-533:100">
                        <by localId="2090" direction="asc" xsi:type="ByDirection"/>
                     </sort>
                  </source>
               </else>
            </else>
         </expression>
      </def>
      <def localId="2106" locator="566:1-567:59" name="MostRecentLifetimeRiskAssessment" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2106">
               <a:s>define MostRecentLifetimeRiskAssessment:
  </a:s>
               <a:s r="2119">
                  <a:s r="2107">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2119">
                     <a:s>MostRecent(</a:s>
                     <a:s r="2110">
                        <a:s>[Observation: </a:s>
                        <a:s>
                           <a:s>&quot;Lifetime risk assessment&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2119" locator="567:3-567:59" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2110" locator="567:18-567:58" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="2118" xsi:type="ToList">
                  <operand localId="2109" locator="567:32-567:57" name="Lifetime risk assessment" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="2103" locator="561:1-564:94" name="MostRecentLifetimeRiskAssessmentResultHigh" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2103">
               <a:s>define MostRecentLifetimeRiskAssessmentResultHigh:
  </a:s>
               <a:s r="2157">
                  <a:s>
                     <a:s r="2104">
                        <a:s r="2120">
                           <a:s>
                              <a:s>MostRecentLifetimeRiskAssessment</a:s>
                           </a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="2121">
                     <a:s>where 
    </a:s>
                     <a:s r="2121">
                        <a:s r="2122">
                           <a:s r="2128">
                              <a:s r="2123">
                                 <a:s r="2125">
                                    <a:s r="2124">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2125">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="2126">
                                    <a:s>FHIR.Quantity</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2129">
                              <a:s r="2133">
                                 <a:s r="2132">
                                    <a:s r="2130">
                                       <a:s>C3F</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2132">
                                       <a:s>QuantityValue(</a:s>
                                       <a:s r="2131">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2133">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2134"> >20</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
    </a:s>
                        <a:s r="2140">
                           <a:s r="2146">
                              <a:s r="2141">
                                 <a:s r="2143">
                                    <a:s r="2142">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2143">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="2144">
                                    <a:s>FHIR.CodeableConcept</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2147">
                              <a:s r="2150">
                                 <a:s r="2148">
                                    <a:s>C3F</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2150">
                                    <a:s>ConceptValue(</a:s>
                                    <a:s r="2149">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="2151">
                                 <a:s>&quot;High lifetime risk&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2157" locator="562:3-564:94" xsi:type="Query">
            <source localId="2104" locator="562:3-562:36" alias="R">
               <expression localId="2120" locator="562:3-562:34" name="MostRecentLifetimeRiskAssessment" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2121" locator="562:38-564:94" xsi:type="Or">
               <operand localId="2122" locator="563:5-563:75" xsi:type="And">
                  <operand localId="2128" locator="563:5-563:40" xsi:type="Not">
                     <operand localId="2127" locator="563:5-563:40" xsi:type="IsNull">
                        <operand localId="2123" locator="563:5-563:28" strict="false" xsi:type="As">
                           <operand localId="2125" locator="563:5-563:11" path="value" scope="R" xsi:type="Property"/>
                           <asTypeSpecifier localId="2126" locator="563:16-563:28" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2129" locator="563:46-563:75" xsi:type="Greater">
                     <signature localId="2138" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="2139" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="2133" locator="563:46-563:71" path="value" xsi:type="Property">
                        <source localId="2132" locator="563:46-563:65" name="QuantityValue" libraryName="C3F" xsi:type="FunctionRef">
                           <operand localId="2131" locator="563:64" name="R" xsi:type="AliasRef"/>
                        </source>
                     </operand>
                     <operand localId="2136" xsi:type="ToDecimal">
                        <signature localId="2137" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2134" locator="563:74-563:75" valueType="t:Integer" value="20" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2140" locator="564:5-564:94" xsi:type="And">
                  <operand localId="2146" locator="564:5-564:47" xsi:type="Not">
                     <operand localId="2145" locator="564:5-564:47" xsi:type="IsNull">
                        <operand localId="2141" locator="564:5-564:35" strict="false" xsi:type="As">
                           <operand localId="2143" locator="564:5-564:11" path="value" scope="R" xsi:type="Property"/>
                           <asTypeSpecifier localId="2144" locator="564:16-564:35" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2147" locator="564:53-564:94" xsi:type="Equivalent">
                     <signature localId="2155" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="2156" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="2150" locator="564:53-564:71" name="ConceptValue" libraryName="C3F" xsi:type="FunctionRef">
                        <operand localId="2149" locator="564:70" name="R" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="2153" xsi:type="ToConcept">
                        <signature localId="2154" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2151" locator="564:75-564:94" name="High lifetime risk" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2101" locator="558:1-559:56" name="de-highlifetimerisk" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2101">
               <a:s>//------------------------------------------------------------------------------
// High lifetime risk
//------------------------------------------------------------------------------   

define &quot;de-highlifetimerisk&quot;:
  </a:s>
               <a:s r="2160">
                  <a:s r="2158">
                     <a:s>MostRecentLifetimeRiskAssessmentResultHigh</a:s>
                  </a:s>
                  <a:s> is not null</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2160" locator="559:3-559:56" xsi:type="Not">
            <operand localId="2159" locator="559:3-559:56" xsi:type="IsNull">
               <operand localId="2158" locator="559:3-559:44" name="MostRecentLifetimeRiskAssessmentResultHigh" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2162" locator="573:1-576:3" name="MostRecentFirstDegRelativeGeneticObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2162">
               <a:s>//------------------------------------------------------------------------------
// First degree relative with genetic marker or syndrome
//------------------------------------------------------------------------------  

define &quot;MostRecentFirstDegRelativeGeneticObservation&quot;:
  </a:s>
               <a:s r="2175">
                  <a:s r="2163">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2175">
                     <a:s>MostRecent(
      </a:s>
                     <a:s r="2166">
                        <a:s>[Observation: </a:s>
                        <a:s>
                           <a:s>&quot;First degree relative with genetic marker or syndrome&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2175" locator="574:3-576:3" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2166" locator="575:7-575:76" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="2174" xsi:type="ToList">
                  <operand localId="2165" locator="575:21-575:75" name="First degree relative with genetic marker or syndrome" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="2191" locator="829:1-830:40" name="BreastImagingObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2191">
               <a:s>define BreastImagingObservations:
  </a:s>
               <a:s r="2194">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Breast Imaging Report&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2194" locator="830:3-830:40" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="2202" xsi:type="ToList">
               <operand localId="2193" locator="830:17-830:39" name="Breast Imaging Report" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="2214" locator="826:1-827:86" name="CompletedBreastImagingDiagnosticReports" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2214">
               <a:s>define CompletedBreastImagingDiagnosticReports:
  </a:s>
               <a:s r="2222">
                  <a:s r="2215">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2222">
                     <a:s>CompletedDiagnosticReport(</a:s>
                     <a:s r="2218">
                        <a:s>[DiagnosticReport: </a:s>
                        <a:s>
                           <a:s>&quot;Breast Cancer Imaging Orders&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2222" locator="827:3-827:86" name="CompletedDiagnosticReport" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="2218" locator="827:36-827:85" dataType="fhir:DiagnosticReport" templateId="http://hl7.org/fhir/StructureDefinition/DiagnosticReport" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
               <codes localId="2217" locator="827:55-827:84" name="Breast Cancer Imaging Orders" preserve="true" xsi:type="ValueSetRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2183" locator="809:1-817:3" name="BreastImagingDiagnosticReports" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2183">
               <a:s>define BreastImagingDiagnosticReports:
  </a:s>
               <a:s r="2184">
                  <a:s>distinct</a:s>
                  <a:s r="2224">
                     <a:s>(
    </a:s>
                     <a:s r="2224">
                        <a:s r="2212">
                           <a:s>(</a:s>
                           <a:s r="2212">
                              <a:s>
                                 <a:s r="2185">
                                    <a:s r="2186">
                                       <a:s>
                                          <a:s>AllCompletedDiagnosticReport</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> R</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      </a:s>
                              <a:s r="2187">
                                 <a:s>where 
        </a:s>
                                 <a:s r="2187">
                                    <a:s r="2208">
                                       <a:s>Count(
          </a:s>
                                       <a:s r="2205">
                                          <a:s r="2188">
                                             <a:s>BCSMCommon</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2205">
                                             <a:s>CollateConclusionCodes(</a:s>
                                             <a:s r="2189">
                                                <a:s>R</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="2203">
                                                <a:s>BreastImagingObservations</a:s>
                                             </a:s>
                                             <a:s>,</a:s>
                                             <a:s r="2204">
                                                <a:s>&quot;Breast Imaging Report&quot;</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>        
      )</a:s>
                                    </a:s>
                                    <a:s r="2209"> > 0</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>
    union </a:s>
                        <a:s r="2223">
                           <a:s>CompletedBreastImagingDiagnosticReports</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2184" locator="810:3-817:3" xsi:type="Distinct">
            <operand localId="2224" locator="810:11-817:3" xsi:type="Union">
               <signature localId="2225" xsi:type="ListTypeSpecifier">
                  <elementType localId="2226" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <signature localId="2227" xsi:type="ListTypeSpecifier">
                  <elementType localId="2228" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2212" locator="811:5-815:12" xsi:type="Query">
                  <source localId="2185" locator="811:6-811:35" alias="R">
                     <expression localId="2186" locator="811:6-811:33" name="AllCompletedDiagnosticReport" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="2187" locator="812:7-815:11" xsi:type="Greater">
                     <signature localId="2210" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="2211" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="2208" locator="813:9-815:7" xsi:type="Count">
                        <source localId="2205" locator="814:11-814:97" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                           <operand localId="2189" locator="814:45" name="R" xsi:type="AliasRef"/>
                           <operand localId="2203" locator="814:48-814:72" name="BreastImagingObservations" xsi:type="ExpressionRef"/>
                           <operand localId="2204" locator="814:74-814:96" name="Breast Imaging Report" xsi:type="CodeRef"/>
                        </source>
                     </operand>
                     <operand localId="2209" locator="815:11" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </where>
               </operand>
               <operand localId="2223" locator="816:11-816:49" name="CompletedBreastImagingDiagnosticReports" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2180" locator="585:1-589:77" name="BreastImagingHeterogenouslyOrExtremelyDenseResults" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2180">
               <a:s>define BreastImagingHeterogenouslyOrExtremelyDenseResults:
  </a:s>
               <a:s r="2282">
                  <a:s>
                     <a:s r="2181">
                        <a:s r="2229">
                           <a:s>
                              <a:s>BreastImagingDiagnosticReports</a:s>
                           </a:s>
                        </a:s>
                        <a:s> D</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="2230">
                        <a:s>cC: </a:s>
                        <a:s r="2234">
                           <a:s r="2231">
                              <a:s>BCSMCommon</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2234">
                              <a:s>CollateConclusionCodes(</a:s>
                              <a:s r="2232">
                                 <a:s>D</a:s>
                              </a:s>
                              <a:s>,</a:s>
                              <a:s r="2233">
                                 <a:s>BreastImagingObservations</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2235">
                     <a:s>where </a:s>
                     <a:s r="2235">
                        <a:s r="2236">
                           <a:s>exists</a:s>
                           <a:s r="2256">
                              <a:s>(</a:s>
                              <a:s r="2256">
                                 <a:s>
                                    <a:s r="2237">
                                       <a:s r="2248">
                                          <a:s>
                                             <a:s>cC.coding</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="2249">
                                    <a:s>where </a:s>
                                    <a:s r="2249">
                                       <a:s r="2252">
                                          <a:s r="2250">
                                             <a:s>FHIRHelpers</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2252">
                                             <a:s>ToCode(</a:s>
                                             <a:s r="2251">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="2253">
                                          <a:s>&quot;Heterogeneously dense&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
      or </a:s>
                        <a:s r="2259">
                           <a:s>exists </a:s>
                           <a:s r="2279">
                              <a:s>(</a:s>
                              <a:s r="2279">
                                 <a:s>
                                    <a:s r="2260">
                                       <a:s r="2271">
                                          <a:s>
                                             <a:s>cC.coding</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="2272">
                                    <a:s>where </a:s>
                                    <a:s r="2272">
                                       <a:s r="2275">
                                          <a:s r="2273">
                                             <a:s>FHIRHelpers</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2275">
                                             <a:s>ToCode(</a:s>
                                             <a:s r="2274">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="2276">
                                          <a:s>&quot;Extremely dense&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2282" locator="586:3-589:77" xsi:type="Query">
            <source localId="2181" locator="586:3-586:34" alias="D">
               <expression localId="2229" locator="586:3-586:32" name="BreastImagingDiagnosticReports" xsi:type="ExpressionRef"/>
            </source>
            <let localId="2230" locator="587:9-587:74" identifier="cC">
               <expression localId="2234" locator="587:13-587:74" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                  <operand localId="2232" locator="587:47" name="D" xsi:type="AliasRef"/>
                  <operand localId="2233" locator="587:49-587:73" name="BreastImagingObservations" xsi:type="ExpressionRef"/>
               </expression>
            </let>
            <where localId="2235" locator="588:5-589:77" xsi:type="Or">
               <operand localId="2236" locator="588:11-588:83" xsi:type="Exists">
                  <signature localId="2257" xsi:type="ListTypeSpecifier">
                     <elementType localId="2258" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="2256" locator="588:17-588:83" xsi:type="Query">
                     <source localId="2237" locator="588:18-588:28" alias="C">
                        <expression localId="2248" locator="588:18-588:26" xsi:type="Flatten">
                           <operand localId="2246" xsi:type="Query">
                              <source localId="2245" alias="$this">
                                 <expression localId="2238" name="cC" xsi:type="QueryLetRef"/>
                              </source>
                              <where localId="2242" xsi:type="Not">
                                 <operand localId="2241" xsi:type="IsNull">
                                    <operand localId="2240" path="coding" xsi:type="Property">
                                       <source localId="2239" name="$this" xsi:type="AliasRef"/>
                                    </operand>
                                 </operand>
                              </where>
                              <return localId="2247" distinct="false">
                                 <expression localId="2244" path="coding" xsi:type="Property">
                                    <source localId="2243" name="$this" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </operand>
                        </expression>
                     </source>
                     <where localId="2249" locator="588:30-588:82" xsi:type="Equivalent">
                        <signature localId="2254" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="2255" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2252" locator="588:36-588:56" name="ToCode" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2251" locator="588:55" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="2253" locator="588:60-588:82" name="Heterogeneously dense" xsi:type="CodeRef"/>
                     </where>
                  </operand>
               </operand>
               <operand localId="2259" locator="589:10-589:77" xsi:type="Exists">
                  <signature localId="2280" xsi:type="ListTypeSpecifier">
                     <elementType localId="2281" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="2279" locator="589:17-589:77" xsi:type="Query">
                     <source localId="2260" locator="589:18-589:28" alias="C">
                        <expression localId="2271" locator="589:18-589:26" xsi:type="Flatten">
                           <operand localId="2269" xsi:type="Query">
                              <source localId="2268" alias="$this">
                                 <expression localId="2261" name="cC" xsi:type="QueryLetRef"/>
                              </source>
                              <where localId="2265" xsi:type="Not">
                                 <operand localId="2264" xsi:type="IsNull">
                                    <operand localId="2263" path="coding" xsi:type="Property">
                                       <source localId="2262" name="$this" xsi:type="AliasRef"/>
                                    </operand>
                                 </operand>
                              </where>
                              <return localId="2270" distinct="false">
                                 <expression localId="2267" path="coding" xsi:type="Property">
                                    <source localId="2266" name="$this" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </operand>
                        </expression>
                     </source>
                     <where localId="2272" locator="589:30-589:76" xsi:type="Equivalent">
                        <signature localId="2277" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="2278" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2275" locator="589:36-589:56" name="ToCode" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2274" locator="589:55" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="2276" locator="589:60-589:76" name="Extremely dense" xsi:type="CodeRef"/>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2177" locator="582:1-583:59" name="de-breastdensitycord" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2177">
               <a:s>//------------------------------------------------------------------------------
// BI-RADS breast density category C or D
//------------------------------------------------------------------------------  

define &quot;de-breastdensitycord&quot;:  
  </a:s>
               <a:s r="2178">
                  <a:s>exists </a:s>
                  <a:s r="2283">
                     <a:s>BreastImagingHeterogenouslyOrExtremelyDenseResults</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2178" locator="583:3-583:59" xsi:type="Exists">
            <signature localId="2284" xsi:type="ListTypeSpecifier">
               <elementType localId="2285" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="2283" locator="583:10-583:59" name="BreastImagingHeterogenouslyOrExtremelyDenseResults" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2293" locator="607:1-608:45" name="FamilialRiskAssessmentObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2293">
               <a:s>define FamilialRiskAssessmentObservations:  
  </a:s>
               <a:s r="2306">
                  <a:s>
                     <a:s r="2294">
                        <a:s r="2297">
                           <a:s r="2297">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>&quot;Familial risk assessment&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2306" locator="608:3-608:45" xsi:type="Query">
            <source localId="2294" locator="608:3-608:45" alias="R">
               <expression localId="2297" locator="608:3-608:43" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes localId="2305" xsi:type="ToList">
                     <operand localId="2296" locator="608:17-608:42" name="Familial risk assessment" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
         </expression>
      </def>
      <def localId="2290" locator="604:1-605:52" name="MostRecentFamilialRiskAssessmentObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2290">
               <a:s>define MostRecentFamilialRiskAssessmentObservation:  
  </a:s>
               <a:s r="2308">
                  <a:s r="2291">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2308">
                     <a:s>MostRecent(</a:s>
                     <a:s r="2307">
                        <a:s>FamilialRiskAssessmentObservations</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2308" locator="605:3-605:52" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2307" locator="605:18-605:51" name="FamilialRiskAssessmentObservations" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2322" locator="616:1-617:70" name="MostRecentFamilialRiskAssessmentResult" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2322">
               <a:s>define MostRecentFamilialRiskAssessmentResult:
  </a:s>
               <a:s r="2335">
                  <a:s r="2323">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2335">
                     <a:s>MostRecent(</a:s>
                     <a:s r="2326">
                        <a:s>[Observation: </a:s>
                        <a:s>
                           <a:s>&quot;Brief familial risk assessment tool&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2335" locator="617:3-617:70" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2326" locator="617:18-617:69" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="2334" xsi:type="ToList">
                  <operand localId="2325" locator="617:32-617:68" name="Brief familial risk assessment tool" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="2319" locator="611:1-614:94" name="MostRecentFamilialRiskAssessmentResultHigh" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2319">
               <a:s>// Output of validated brief familial risk assessment tool is positive or greater than 5%
define MostRecentFamilialRiskAssessmentResultHigh:
  </a:s>
               <a:s r="2373">
                  <a:s>
                     <a:s r="2320">
                        <a:s r="2336">
                           <a:s>
                              <a:s>MostRecentFamilialRiskAssessmentResult</a:s>
                           </a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="2337">
                     <a:s>where 
    </a:s>
                     <a:s r="2337">
                        <a:s r="2338">
                           <a:s r="2344">
                              <a:s r="2339">
                                 <a:s r="2341">
                                    <a:s r="2340">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2341">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="2342">
                                    <a:s>FHIR.Quantity</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2345">
                              <a:s r="2349">
                                 <a:s r="2348">
                                    <a:s r="2346">
                                       <a:s>C3F</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2348">
                                       <a:s>QuantityValue(</a:s>
                                       <a:s r="2347">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2349">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2350"> >5</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or
    </a:s>
                        <a:s r="2356">
                           <a:s r="2362">
                              <a:s r="2357">
                                 <a:s r="2359">
                                    <a:s r="2358">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2359">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="2360">
                                    <a:s>FHIR.CodeableConcept</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2363">
                              <a:s r="2366">
                                 <a:s r="2364">
                                    <a:s>C3F</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2366">
                                    <a:s>ConceptValue(</a:s>
                                    <a:s r="2365">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="2367">
                                 <a:s>&quot;High familial risk&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2373" locator="612:3-614:94" xsi:type="Query">
            <source localId="2320" locator="612:3-612:42" alias="R">
               <expression localId="2336" locator="612:3-612:40" name="MostRecentFamilialRiskAssessmentResult" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2337" locator="612:44-614:94" xsi:type="Or">
               <operand localId="2338" locator="613:5-613:74" xsi:type="And">
                  <operand localId="2344" locator="613:5-613:40" xsi:type="Not">
                     <operand localId="2343" locator="613:5-613:40" xsi:type="IsNull">
                        <operand localId="2339" locator="613:5-613:28" strict="false" xsi:type="As">
                           <operand localId="2341" locator="613:5-613:11" path="value" scope="R" xsi:type="Property"/>
                           <asTypeSpecifier localId="2342" locator="613:16-613:28" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2345" locator="613:46-613:74" xsi:type="Greater">
                     <signature localId="2354" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="2355" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="2349" locator="613:46-613:71" path="value" xsi:type="Property">
                        <source localId="2348" locator="613:46-613:65" name="QuantityValue" libraryName="C3F" xsi:type="FunctionRef">
                           <operand localId="2347" locator="613:64" name="R" xsi:type="AliasRef"/>
                        </source>
                     </operand>
                     <operand localId="2352" xsi:type="ToDecimal">
                        <signature localId="2353" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2350" locator="613:74" valueType="t:Integer" value="5" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2356" locator="614:5-614:94" xsi:type="And">
                  <operand localId="2362" locator="614:5-614:47" xsi:type="Not">
                     <operand localId="2361" locator="614:5-614:47" xsi:type="IsNull">
                        <operand localId="2357" locator="614:5-614:35" strict="false" xsi:type="As">
                           <operand localId="2359" locator="614:5-614:11" path="value" scope="R" xsi:type="Property"/>
                           <asTypeSpecifier localId="2360" locator="614:16-614:35" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2363" locator="614:53-614:94" xsi:type="Equivalent">
                     <signature localId="2371" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="2372" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="2366" locator="614:53-614:71" name="ConceptValue" libraryName="C3F" xsi:type="FunctionRef">
                        <operand localId="2365" locator="614:70" name="R" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="2369" xsi:type="ToConcept">
                        <signature localId="2370" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2367" locator="614:75-614:94" name="High familial risk" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2287" locator="595:1-598:61" name="de-fhxbreastcarisk" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2287">
               <a:s>//------------------------------------------------------------------------------
// Compelling family history of breast cancer
//------------------------------------------------------------------------------  

define &quot;de-fhxbreastcarisk&quot;:
  </a:s>
               <a:s r="2288">
                  <a:s>if </a:s>
                  <a:s r="2311">
                     <a:s r="2309">
                        <a:s>MostRecentFamilialRiskAssessmentObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s>
    then </a:s>
                  <a:s r="2317">
                     <a:s r="2312">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="2317">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="2313">
                           <a:s r="2315">
                              <a:s r="2314">
                                 <a:s>MostRecentFamilialRiskAssessmentObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2315">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="2316">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  else </a:s>
                  <a:s r="2376">
                     <a:s r="2374">
                        <a:s>MostRecentFamilialRiskAssessmentResultHigh</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2288" locator="596:3-598:61" xsi:type="If">
            <condition localId="2311" locator="596:6-596:60" xsi:type="Not">
               <operand localId="2310" locator="596:6-596:60" xsi:type="IsNull">
                  <operand localId="2309" locator="596:6-596:48" name="MostRecentFamilialRiskAssessmentObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="2317" locator="597:10-597:92" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="2313" locator="597:32-597:91" strict="false" xsi:type="As">
                  <operand localId="2315" locator="597:32-597:80" path="value" xsi:type="Property">
                     <source localId="2314" locator="597:32-597:74" name="MostRecentFamilialRiskAssessmentObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="2316" locator="597:85-597:91" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="2376" locator="598:8-598:61" xsi:type="Not">
               <operand localId="2375" locator="598:8-598:61" xsi:type="IsNull">
                  <operand localId="2374" locator="598:8-598:49" name="MostRecentFamilialRiskAssessmentResultHigh" xsi:type="ExpressionRef"/>
               </operand>
            </else>
         </expression>
      </def>
      <def localId="2378" locator="600:1-602:54" name="FamilialRiskAssessmentExists" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2378">
               <a:s>define FamilialRiskAssessmentExists:
  </a:s>
               <a:s r="2379">
                  <a:s r="2382">
                     <a:s r="2380">
                        <a:s>MostRecentFamilialRiskAssessmentObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> or 
    </a:s>
                  <a:s r="2385">
                     <a:s r="2383">
                        <a:s>MostRecentFamilialRiskAssessmentResult</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2379" locator="601:3-602:54" xsi:type="Or">
            <operand localId="2382" locator="601:3-601:57" xsi:type="Not">
               <operand localId="2381" locator="601:3-601:57" xsi:type="IsNull">
                  <operand localId="2380" locator="601:3-601:45" name="MostRecentFamilialRiskAssessmentObservation" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="2385" locator="602:5-602:54" xsi:type="Not">
               <operand localId="2384" locator="602:5-602:54" xsi:type="IsNull">
                  <operand localId="2383" locator="602:5-602:42" name="MostRecentFamilialRiskAssessmentResult" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="2399" locator="663:1-665:107" name="FirstOrSecondDegreeRelatives" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2399">
               <a:s>define &quot;FirstOrSecondDegreeRelatives&quot;:
  </a:s>
               <a:s r="2415">
                  <a:s>
                     <a:s r="2400">
                        <a:s r="2401">
                           <a:s r="2401">
                              <a:s>[FamilyMemberHistory]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2402">
                     <a:s>where </a:s>
                     <a:s r="2402">
                        <a:s r="2406">
                           <a:s r="2404">
                              <a:s r="2403">
                                 <a:s>F</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2404">
                                 <a:s>relationship</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="2405">
                              <a:s>&quot;First Degree Family Member&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> or </a:s>
                        <a:s r="2412">
                           <a:s r="2410">
                              <a:s r="2409">
                                 <a:s>F</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2410">
                                 <a:s>relationship</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="2411">
                              <a:s>&quot;Second Degree Family Member&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2415" locator="664:3-665:107" xsi:type="Query">
            <source localId="2400" locator="664:3-664:25" alias="F">
               <expression localId="2401" locator="664:3-664:23" dataType="fhir:FamilyMemberHistory" templateId="http://hl7.org/fhir/StructureDefinition/FamilyMemberHistory" xsi:type="Retrieve"/>
            </source>
            <where localId="2402" locator="665:5-665:107" xsi:type="Or">
               <operand localId="2406" locator="665:11-665:56" xsi:type="InValueSet">
                  <signature localId="2408" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <code localId="2407" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2404" locator="665:11-665:24" path="relationship" scope="F" xsi:type="Property"/>
                  </code>
                  <valueset localId="2405" locator="665:29-665:56" name="First Degree Family Member" preserve="true"/>
               </operand>
               <operand localId="2412" locator="665:61-665:107" xsi:type="InValueSet">
                  <signature localId="2414" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <code localId="2413" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2410" locator="665:61-665:74" path="relationship" scope="F" xsi:type="Property"/>
                  </code>
                  <valueset localId="2411" locator="665:79-665:107" name="Second Degree Family Member" preserve="true"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2396" locator="629:1-631:62" name="FirstOrSecondDegreeRelativesWithBreastCancer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2396">
               <a:s>define &quot;FirstOrSecondDegreeRelativesWithBreastCancer&quot;:
  </a:s>
               <a:s r="2430">
                  <a:s>
                     <a:s r="2397">
                        <a:s r="2416">
                           <a:s>
                              <a:s>FirstOrSecondDegreeRelatives</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2417">
                     <a:s>where </a:s>
                     <a:s r="2417">
                        <a:s>exists </a:s>
                        <a:s r="2427">
                           <a:s>
                              <a:s r="2418">
                                 <a:s r="2420">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="2424">
                              <a:s>where </a:s>
                              <a:s r="2424">
                                 <a:s r="2422">
                                    <a:s r="2421">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2422">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="2423">
                                    <a:s>&quot;Breast Cancer&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2430" locator="630:3-631:62" xsi:type="Query">
            <source localId="2397" locator="630:3-630:32" alias="F">
               <expression localId="2416" locator="630:3-630:30" name="FirstOrSecondDegreeRelatives" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2417" locator="631:5-631:62" xsi:type="Exists">
               <signature localId="2428" xsi:type="ListTypeSpecifier">
                  <elementType localId="2429" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2427" locator="631:18-631:62" xsi:type="Query">
                  <source localId="2418" locator="631:18-631:30" alias="C">
                     <expression localId="2420" locator="631:18-631:28" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2424" locator="631:32-631:62" xsi:type="InValueSet">
                     <signature localId="2426" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <code localId="2425" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2422" locator="631:38-631:43" path="code" scope="C" xsi:type="Property"/>
                     </code>
                     <valueset localId="2423" locator="631:48-631:62" name="Breast Cancer" preserve="true"/>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2444" locator="633:1-635:63" name="FirstOrSecondDegreeRelativesWithOvarianCancer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2444">
               <a:s>define &quot;FirstOrSecondDegreeRelativesWithOvarianCancer&quot;:
  </a:s>
               <a:s r="2460">
                  <a:s>
                     <a:s r="2445">
                        <a:s r="2446">
                           <a:s>
                              <a:s>FirstOrSecondDegreeRelatives</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2447">
                     <a:s>where </a:s>
                     <a:s r="2447">
                        <a:s>exists </a:s>
                        <a:s r="2457">
                           <a:s>
                              <a:s r="2448">
                                 <a:s r="2450">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="2454">
                              <a:s>where </a:s>
                              <a:s r="2454">
                                 <a:s r="2452">
                                    <a:s r="2451">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2452">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="2453">
                                    <a:s>&quot;Ovarian Cancer&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2460" locator="634:3-635:63" xsi:type="Query">
            <source localId="2445" locator="634:3-634:32" alias="F">
               <expression localId="2446" locator="634:3-634:30" name="FirstOrSecondDegreeRelatives" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2447" locator="635:5-635:63" xsi:type="Exists">
               <signature localId="2458" xsi:type="ListTypeSpecifier">
                  <elementType localId="2459" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2457" locator="635:18-635:63" xsi:type="Query">
                  <source localId="2448" locator="635:18-635:30" alias="C">
                     <expression localId="2450" locator="635:18-635:28" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2454" locator="635:32-635:63" xsi:type="InValueSet">
                     <signature localId="2456" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <code localId="2455" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2452" locator="635:38-635:43" path="code" scope="C" xsi:type="Property"/>
                     </code>
                     <valueset localId="2453" locator="635:48-635:63" name="Ovarian Cancer" preserve="true"/>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2474" locator="637:1-640:37" name="BreastCancerDiagnosedBefore50" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2474">
               <a:s>define &quot;BreastCancerDiagnosedBefore50&quot;:
  </a:s>
               <a:s r="2500">
                  <a:s>
                     <a:s r="2475">
                        <a:s r="2476">
                           <a:s>
                              <a:s>FirstOrSecondDegreeRelatives</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2477">
                     <a:s>where </a:s>
                     <a:s r="2477">
                        <a:s>exists </a:s>
                        <a:s r="2497">
                           <a:s>(</a:s>
                           <a:s r="2497">
                              <a:s>
                                 <a:s r="2478">
                                    <a:s r="2480">
                                       <a:s>
                                          <a:s>F.condition</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> C</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2481">
                                 <a:s>where </a:s>
                                 <a:s r="2481">
                                    <a:s r="2485">
                                       <a:s r="2483">
                                          <a:s r="2482">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2483">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="2484">
                                          <a:s>&quot;Breast Cancer&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
      and </a:s>
                                    <a:s r="2488">
                                       <a:s r="2489">
                                          <a:s r="2491">
                                             <a:s r="2490">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2491">
                                                <a:s>onset</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> as </a:s>
                                          <a:s r="2492">
                                             <a:s>Age</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> &lt;= </a:s>
                                       <a:s r="2493">
                                          <a:s>50 years</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2500" locator="638:3-640:37" xsi:type="Query">
            <source localId="2475" locator="638:3-638:32" alias="F">
               <expression localId="2476" locator="638:3-638:30" name="FirstOrSecondDegreeRelatives" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2477" locator="639:5-640:37" xsi:type="Exists">
               <signature localId="2498" xsi:type="ListTypeSpecifier">
                  <elementType localId="2499" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2497" locator="639:18-640:37" xsi:type="Query">
                  <source localId="2478" locator="639:19-639:31" alias="C">
                     <expression localId="2480" locator="639:19-639:29" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2481" locator="639:33-640:36" xsi:type="And">
                     <operand localId="2485" locator="639:39-639:63" xsi:type="InValueSet">
                        <signature localId="2487" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <code localId="2486" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2483" locator="639:39-639:44" path="code" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="2484" locator="639:49-639:63" name="Breast Cancer" preserve="true"/>
                     </operand>
                     <operand localId="2488" locator="640:11-640:36" xsi:type="LessOrEqual">
                        <signature localId="2495" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="2496" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2494" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2489" locator="640:11-640:24" strict="false" xsi:type="As">
                              <operand localId="2491" locator="640:11-640:17" path="onset" scope="C" xsi:type="Property"/>
                              <asTypeSpecifier localId="2492" locator="640:22-640:24" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                        </operand>
                        <operand localId="2493" locator="640:29-640:36" value="50" unit="years" xsi:type="Quantity"/>
                     </operand>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2505" locator="642:1-644:62" name="BreastAndOvarianCancerInFamily" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2505">
               <a:s>define &quot;BreastAndOvarianCancerInFamily&quot;:
  </a:s>
               <a:s r="2506">
                  <a:s r="2507">
                     <a:s>exists </a:s>
                     <a:s r="2508">
                        <a:s>(</a:s>
                        <a:s r="2508">
                           <a:s>FirstOrSecondDegreeRelativesWithBreastCancer</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    and </a:s>
                  <a:s r="2511">
                     <a:s>exists </a:s>
                     <a:s r="2512">
                        <a:s>(</a:s>
                        <a:s r="2512">
                           <a:s>FirstOrSecondDegreeRelativesWithOvarianCancer</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2506" locator="643:3-644:62" xsi:type="And">
            <operand localId="2507" locator="643:3-643:55" xsi:type="Exists">
               <signature localId="2509" xsi:type="ListTypeSpecifier">
                  <elementType localId="2510" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2508" locator="643:10-643:55" name="FirstOrSecondDegreeRelativesWithBreastCancer" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="2511" locator="644:9-644:62" xsi:type="Exists">
               <signature localId="2513" xsi:type="ListTypeSpecifier">
                  <elementType localId="2514" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2512" locator="644:16-644:62" name="FirstOrSecondDegreeRelativesWithOvarianCancer" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2518" locator="646:1-649:65" name="BreastAndOvarianCancerInSameRelative" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2518">
               <a:s>define &quot;BreastAndOvarianCancerInSameRelative&quot;:
  </a:s>
               <a:s r="2548">
                  <a:s>
                     <a:s r="2519">
                        <a:s r="2520">
                           <a:s>
                              <a:s>FirstOrSecondDegreeRelatives</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2521">
                     <a:s>where </a:s>
                     <a:s r="2521">
                        <a:s>exists </a:s>
                        <a:s r="2545">
                           <a:s>
                              <a:s r="2522">
                                 <a:s r="2524">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C1</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="2525">
                              <a:s>where </a:s>
                              <a:s r="2525">
                                 <a:s r="2529">
                                    <a:s r="2527">
                                       <a:s r="2526">
                                          <a:s>C1</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2527">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="2528">
                                       <a:s>&quot;Breast Cancer&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2532">
                                    <a:s>exists </a:s>
                                    <a:s r="2542">
                                       <a:s>
                                          <a:s r="2533">
                                             <a:s r="2535">
                                                <a:s>
                                                   <a:s>F.condition</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> C2</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="2539">
                                          <a:s>where </a:s>
                                          <a:s r="2539">
                                             <a:s r="2537">
                                                <a:s r="2536">
                                                   <a:s>C2</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="2537">
                                                   <a:s>code</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s r="2538">
                                                <a:s>&quot;Ovarian Cancer&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2548" locator="647:3-649:65" xsi:type="Query">
            <source localId="2519" locator="647:3-647:32" alias="F">
               <expression localId="2520" locator="647:3-647:30" name="FirstOrSecondDegreeRelatives" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2521" locator="648:5-649:65" xsi:type="Exists">
               <signature localId="2546" xsi:type="ListTypeSpecifier">
                  <elementType localId="2547" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2545" locator="648:18-649:65" xsi:type="Query">
                  <source localId="2522" locator="648:18-648:31" alias="C1">
                     <expression localId="2524" locator="648:18-648:28" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2525" locator="648:33-649:65" xsi:type="And">
                     <operand localId="2529" locator="648:39-648:64" xsi:type="InValueSet">
                        <signature localId="2531" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <code localId="2530" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2527" locator="648:39-648:45" path="code" scope="C1" xsi:type="Property"/>
                        </code>
                        <valueset localId="2528" locator="648:50-648:64" name="Breast Cancer" preserve="true"/>
                     </operand>
                     <operand localId="2532" locator="649:11-649:65" xsi:type="Exists">
                        <signature localId="2543" xsi:type="ListTypeSpecifier">
                           <elementType localId="2544" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="2542" locator="649:18-649:65" xsi:type="Query">
                           <source localId="2533" locator="649:18-649:31" alias="C2">
                              <expression localId="2535" locator="649:18-649:28" path="condition" scope="F" xsi:type="Property"/>
                           </source>
                           <where localId="2539" locator="649:33-649:65" xsi:type="InValueSet">
                              <signature localId="2541" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <code localId="2540" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2537" locator="649:39-649:45" path="code" scope="C2" xsi:type="Property"/>
                              </code>
                              <valueset localId="2538" locator="649:50-649:65" name="Ovarian Cancer" preserve="true"/>
                           </where>
                        </operand>
                     </operand>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2554" locator="652:1-656:20" name="TwoIndependentBreastCancers" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2554">
               <a:s>// TODO: do we need to consider two independent conditions with the same code but different onsets?
define &quot;TwoIndependentBreastCancers&quot;:
  </a:s>
               <a:s r="2591">
                  <a:s>
                     <a:s r="2555">
                        <a:s r="2556">
                           <a:s>
                              <a:s>FirstOrSecondDegreeRelatives</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2557">
                     <a:s>where </a:s>
                     <a:s r="2557">
                        <a:s>exists </a:s>
                        <a:s r="2588">
                           <a:s>
                              <a:s r="2558">
                                 <a:s r="2560">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C1</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="2561">
                              <a:s>where </a:s>
                              <a:s r="2561">
                                 <a:s r="2565">
                                    <a:s r="2563">
                                       <a:s r="2562">
                                          <a:s>C1</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2563">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="2564">
                                       <a:s>&quot;Breast Cancer&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2568">
                                    <a:s>exists </a:s>
                                    <a:s r="2585">
                                       <a:s>
                                          <a:s r="2569">
                                             <a:s r="2571">
                                                <a:s>
                                                   <a:s>F.condition</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> C2</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="2572">
                                          <a:s>where </a:s>
                                          <a:s r="2572">
                                             <a:s r="2576">
                                                <a:s r="2574">
                                                   <a:s r="2573">
                                                      <a:s>C2</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="2574">
                                                      <a:s>code</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="2575">
                                                   <a:s>&quot;Breast Cancer&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
        and </a:s>
                                             <a:s r="2584">
                                                <a:s r="2580">
                                                   <a:s>C1</a:s>
                                                </a:s>
                                                <a:s> != </a:s>
                                                <a:s r="2581">
                                                   <a:s>C2</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2591" locator="653:3-656:20" xsi:type="Query">
            <source localId="2555" locator="653:3-653:32" alias="F">
               <expression localId="2556" locator="653:3-653:30" name="FirstOrSecondDegreeRelatives" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2557" locator="654:5-656:20" xsi:type="Exists">
               <signature localId="2589" xsi:type="ListTypeSpecifier">
                  <elementType localId="2590" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2588" locator="654:18-656:20" xsi:type="Query">
                  <source localId="2558" locator="654:18-654:31" alias="C1">
                     <expression localId="2560" locator="654:18-654:28" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2561" locator="654:33-656:20" xsi:type="And">
                     <operand localId="2565" locator="654:39-654:64" xsi:type="InValueSet">
                        <signature localId="2567" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <code localId="2566" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2563" locator="654:39-654:45" path="code" scope="C1" xsi:type="Property"/>
                        </code>
                        <valueset localId="2564" locator="654:50-654:64" name="Breast Cancer" preserve="true"/>
                     </operand>
                     <operand localId="2568" locator="655:11-656:20" xsi:type="Exists">
                        <signature localId="2586" xsi:type="ListTypeSpecifier">
                           <elementType localId="2587" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                        </signature>
                        <operand localId="2585" locator="655:18-656:20" xsi:type="Query">
                           <source localId="2569" locator="655:18-655:31" alias="C2">
                              <expression localId="2571" locator="655:18-655:28" path="condition" scope="F" xsi:type="Property"/>
                           </source>
                           <where localId="2572" locator="655:33-656:20" xsi:type="And">
                              <operand localId="2576" locator="655:39-655:64" xsi:type="InValueSet">
                                 <signature localId="2578" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                 <code localId="2577" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2574" locator="655:39-655:45" path="code" scope="C2" xsi:type="Property"/>
                                 </code>
                                 <valueset localId="2575" locator="655:50-655:64" name="Breast Cancer" preserve="true"/>
                              </operand>
                              <operand localId="2584" locator="656:13-656:20" xsi:type="Not">
                                 <operand localId="2579" locator="656:13-656:20" xsi:type="Equal">
                                    <signature localId="2582" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                    <signature localId="2583" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="2580" locator="656:13-656:14" name="C1" xsi:type="AliasRef"/>
                                    <operand localId="2581" locator="656:19-656:20" name="C2" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2597" locator="658:1-661:24" name="MaleRelativeWithBreastCancer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2597">
               <a:s>define &quot;MaleRelativeWithBreastCancer&quot;:
  </a:s>
               <a:s r="2624">
                  <a:s>
                     <a:s r="2598">
                        <a:s r="2599">
                           <a:s>
                              <a:s>FirstOrSecondDegreeRelatives</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2600">
                     <a:s>where </a:s>
                     <a:s r="2600">
                        <a:s>exists </a:s>
                        <a:s r="2621">
                           <a:s>
                              <a:s r="2601">
                                 <a:s r="2603">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="2604">
                              <a:s>where </a:s>
                              <a:s r="2604">
                                 <a:s r="2608">
                                    <a:s r="2606">
                                       <a:s r="2605">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2606">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="2607">
                                       <a:s>&quot;Breast Cancer&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2611">
                                    <a:s r="2613">
                                       <a:s r="2612">
                                          <a:s>F</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2613">
                                          <a:s>sex</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2614">
                                       <a:s>&quot;Male&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2624" locator="659:3-661:24" xsi:type="Query">
            <source localId="2598" locator="659:3-659:32" alias="F">
               <expression localId="2599" locator="659:3-659:30" name="FirstOrSecondDegreeRelatives" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2600" locator="660:5-661:24" xsi:type="Exists">
               <signature localId="2622" xsi:type="ListTypeSpecifier">
                  <elementType localId="2623" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2621" locator="660:18-661:24" xsi:type="Query">
                  <source localId="2601" locator="660:18-660:30" alias="C">
                     <expression localId="2603" locator="660:18-660:28" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2604" locator="660:32-661:24" xsi:type="And">
                     <operand localId="2608" locator="660:38-660:62" xsi:type="InValueSet">
                        <signature localId="2610" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <code localId="2609" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2606" locator="660:38-660:43" path="code" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="2607" locator="660:48-660:62" name="Breast Cancer" preserve="true"/>
                     </operand>
                     <operand localId="2611" locator="661:11-661:24" xsi:type="Equivalent">
                        <signature localId="2619" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="2620" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2615" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2613" locator="661:11-661:15" path="sex" scope="F" xsi:type="Property"/>
                        </operand>
                        <operand localId="2617" xsi:type="ToConcept">
                           <signature localId="2618" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="2614" locator="661:19-661:24" name="Male" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </where>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2387" locator="620:1-627:42" name="de-fhxrisk" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2387">
               <a:s>// 'Informal familial risk criteria' exist
define &quot;de-fhxrisk&quot;:
  </a:s>
               <a:s r="2388">
                  <a:s r="2389">
                     <a:s r="2390">
                        <a:s r="2391">
                           <a:s r="2392">
                              <a:s r="2393">
                                 <a:s r="2394">
                                    <a:s r="2436">
                                       <a:s>Count(</a:s>
                                       <a:s r="2431">
                                          <a:s>FirstOrSecondDegreeRelativesWithBreastCancer</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s r="2439"> >= 2</a:s>
                                 </a:s>
                                 <a:s>
  or </a:s>
                                 <a:s r="2442">
                                    <a:s r="2466">
                                       <a:s>Count(</a:s>
                                       <a:s r="2461">
                                          <a:s>FirstOrSecondDegreeRelativesWithOvarianCancer</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s r="2469"> >= 2</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
  or </a:s>
                              <a:s r="2472">
                                 <a:s>exists </a:s>
                                 <a:s r="2501">
                                    <a:s>(</a:s>
                                    <a:s r="2501">
                                       <a:s>BreastCancerDiagnosedBefore50</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  or </a:s>
                           <a:s r="2515">
                              <a:s>BreastAndOvarianCancerInFamily</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  or </a:s>
                        <a:s r="2516">
                           <a:s>exists </a:s>
                           <a:s r="2549">
                              <a:s>(</a:s>
                              <a:s r="2549">
                                 <a:s>BreastAndOvarianCancerInSameRelative</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  or </a:s>
                     <a:s r="2552">
                        <a:s>exists </a:s>
                        <a:s r="2592">
                           <a:s>(</a:s>
                           <a:s r="2592">
                              <a:s>TwoIndependentBreastCancers</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  or </a:s>
                  <a:s r="2595">
                     <a:s>exists </a:s>
                     <a:s r="2625">
                        <a:s>(</a:s>
                        <a:s r="2625">
                           <a:s>MaleRelativeWithBreastCancer</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2388" locator="621:3-627:42" xsi:type="Or">
            <operand localId="2389" locator="621:3-626:41" xsi:type="Or">
               <operand localId="2390" locator="621:3-625:50" xsi:type="Or">
                  <operand localId="2391" locator="621:3-624:35" xsi:type="Or">
                     <operand localId="2392" locator="621:3-623:43" xsi:type="Or">
                        <operand localId="2393" locator="621:3-622:62" xsi:type="Or">
                           <operand localId="2394" locator="621:3-621:58" xsi:type="GreaterOrEqual">
                              <signature localId="2440" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="2441" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="2436" locator="621:3-621:53" xsi:type="Count">
                                 <signature localId="2437" xsi:type="ListTypeSpecifier">
                                    <elementType localId="2438" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                                 </signature>
                                 <source localId="2431" locator="621:9-621:52" name="FirstOrSecondDegreeRelativesWithBreastCancer" xsi:type="ExpressionRef"/>
                              </operand>
                              <operand localId="2439" locator="621:58" valueType="t:Integer" value="2" xsi:type="Literal"/>
                           </operand>
                           <operand localId="2442" locator="622:6-622:62" xsi:type="GreaterOrEqual">
                              <signature localId="2470" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="2471" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="2466" locator="622:6-622:57" xsi:type="Count">
                                 <signature localId="2467" xsi:type="ListTypeSpecifier">
                                    <elementType localId="2468" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                                 </signature>
                                 <source localId="2461" locator="622:12-622:56" name="FirstOrSecondDegreeRelativesWithOvarianCancer" xsi:type="ExpressionRef"/>
                              </operand>
                              <operand localId="2469" locator="622:62" valueType="t:Integer" value="2" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="2472" locator="623:6-623:43" xsi:type="Exists">
                           <signature localId="2502" xsi:type="ListTypeSpecifier">
                              <elementType localId="2503" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <operand localId="2501" locator="623:13-623:43" name="BreastCancerDiagnosedBefore50" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="2515" locator="624:6-624:35" name="BreastAndOvarianCancerInFamily" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="2516" locator="625:6-625:50" xsi:type="Exists">
                     <signature localId="2550" xsi:type="ListTypeSpecifier">
                        <elementType localId="2551" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <operand localId="2549" locator="625:13-625:50" name="BreastAndOvarianCancerInSameRelative" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="2552" locator="626:6-626:41" xsi:type="Exists">
                  <signature localId="2593" xsi:type="ListTypeSpecifier">
                     <elementType localId="2594" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="2592" locator="626:13-626:41" name="TwoIndependentBreastCancers" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="2595" locator="627:6-627:42" xsi:type="Exists">
               <signature localId="2626" xsi:type="ListTypeSpecifier">
                  <elementType localId="2627" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2625" locator="627:13-627:42" name="MaleRelativeWithBreastCancer" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="2632" locator="676:1-679:3" name="FamilyGeneticHistoryAssessmentObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2632">
               <a:s>define FamilyGeneticHistoryAssessmentObservation:  
  </a:s>
               <a:s r="2647">
                  <a:s r="2633">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2647">
                     <a:s>MostRecent(
      </a:s>
                     <a:s r="2646">
                        <a:s>
                           <a:s r="2634">
                              <a:s r="2637">
                                 <a:s r="2637">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>&quot;Family history of inherited cancer susceptibility&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> R</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2647" locator="677:3-679:3" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2646" locator="678:7-678:74" xsi:type="Query">
               <source localId="2634" locator="678:7-678:74" alias="R">
                  <expression localId="2637" locator="678:7-678:72" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes localId="2645" xsi:type="ToList">
                        <operand localId="2636" locator="678:21-678:71" name="Family history of inherited cancer susceptibility" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
            </operand>
         </expression>
      </def>
      <def localId="2662" locator="690:1-705:5" name="FamilyMemberGeneticMarkerOrSyndromeConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2662">
               <a:s>define &quot;FamilyMemberGeneticMarkerOrSyndromeConditions&quot;:
  </a:s>
               <a:s r="2731">
                  <a:s>
                     <a:s r="2663">
                        <a:s r="2664">
                           <a:s r="2664">
                              <a:s>[FamilyMemberHistory]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s>
                     <a:s>let
      </a:s>
                     <a:s r="2665">
                        <a:s>GeneticConditions: </a:s>
                        <a:s r="2722">
                           <a:s>
                              <a:s r="2666">
                                 <a:s r="2668">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        </a:s>
                           <a:s r="2669">
                              <a:s>where
          </a:s>
                              <a:s r="2669">
                                 <a:s r="2670">
                                    <a:s r="2671">
                                       <a:s r="2672">
                                          <a:s r="2673">
                                             <a:s r="2677">
                                                <a:s r="2675">
                                                   <a:s r="2674">
                                                      <a:s>C</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="2675">
                                                      <a:s>code</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="2676">
                                                   <a:s>&quot;Genetic Marker of Susceptibility to Breast Cancer&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> or         
          </a:s>
                                             <a:s r="2683">
                                                <a:s r="2681">
                                                   <a:s r="2680">
                                                      <a:s>C</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="2681">
                                                      <a:s>code</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> in </a:s>
                                                <a:s r="2682">
                                                   <a:s>&quot;BRCA1 Gene Mutation&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> or 
          </a:s>
                                          <a:s r="2689">
                                             <a:s r="2687">
                                                <a:s r="2686">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="2687">
                                                   <a:s>code</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> in </a:s>
                                             <a:s r="2688">
                                                <a:s>&quot;BRCA2 Gene Mutation&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or
          </a:s>
                                       <a:s r="2692">
                                          <a:s r="2694">
                                             <a:s r="2693">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2694">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2695">
                                             <a:s>&quot;Li-Fraumeni Syndrome&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> or 
          </a:s>
                                    <a:s r="2702">
                                       <a:s r="2704">
                                          <a:s r="2703">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2704">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="2705">
                                          <a:s>&quot;Cowden Syndrome&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> or
          </a:s>
                                 <a:s r="2712">
                                    <a:s r="2714">
                                       <a:s r="2713">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2714">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2715">
                                       <a:s>&quot;Bannayan-Riley-Ruvalcaba Syndrome&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2723">
                     <a:s>where </a:s>
                     <a:s r="2723">
                        <a:s>exists </a:s>
                        <a:s r="2724">
                           <a:s>GeneticConditions</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2727">
                     <a:s>return </a:s>
                     <a:s r="2728">
                        <a:s>{
      </a:s>
                        <a:s>
                           <a:s>familyMemberHistory: </a:s>
                           <a:s r="2729">
                              <a:s>F</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>conditions: </a:s>
                           <a:s r="2730">
                              <a:s>GeneticConditions</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2731" locator="691:3-705:5" xsi:type="Query">
            <source localId="2663" locator="691:3-691:25" alias="F">
               <expression localId="2664" locator="691:3-691:23" dataType="fhir:FamilyMemberHistory" templateId="http://hl7.org/fhir/StructureDefinition/FamilyMemberHistory" xsi:type="Retrieve"/>
            </source>
            <let localId="2665" locator="693:7-700:54" identifier="GeneticConditions">
               <expression localId="2722" locator="693:26-700:54" xsi:type="Query">
                  <source localId="2666" locator="693:26-693:38" alias="C">
                     <expression localId="2668" locator="693:26-693:36" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2669" locator="694:9-700:54" xsi:type="Or">
                     <operand localId="2670" locator="695:11-699:36" xsi:type="Or">
                        <operand localId="2671" locator="695:11-698:41" xsi:type="Or">
                           <operand localId="2672" locator="695:11-697:41" xsi:type="Or">
                              <operand localId="2673" locator="695:11-696:41" xsi:type="Or">
                                 <operand localId="2677" locator="695:11-695:71" xsi:type="InValueSet">
                                    <signature localId="2679" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                    <code localId="2678" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="2675" locator="695:11-695:16" path="code" scope="C" xsi:type="Property"/>
                                    </code>
                                    <valueset localId="2676" locator="695:21-695:71" name="Genetic Marker of Susceptibility to Breast Cancer" preserve="true"/>
                                 </operand>
                                 <operand localId="2683" locator="696:11-696:41" xsi:type="InValueSet">
                                    <signature localId="2685" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                    <code localId="2684" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="2681" locator="696:11-696:16" path="code" scope="C" xsi:type="Property"/>
                                    </code>
                                    <valueset localId="2682" locator="696:21-696:41" name="BRCA1 Gene Mutation" preserve="true"/>
                                 </operand>
                              </operand>
                              <operand localId="2689" locator="697:11-697:41" xsi:type="InValueSet">
                                 <signature localId="2691" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                                 <code localId="2690" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2687" locator="697:11-697:16" path="code" scope="C" xsi:type="Property"/>
                                 </code>
                                 <valueset localId="2688" locator="697:21-697:41" name="BRCA2 Gene Mutation" preserve="true"/>
                              </operand>
                           </operand>
                           <operand localId="2692" locator="698:11-698:41" xsi:type="Equivalent">
                              <signature localId="2700" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <signature localId="2701" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="2696" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2694" locator="698:11-698:16" path="code" scope="C" xsi:type="Property"/>
                              </operand>
                              <operand localId="2698" xsi:type="ToConcept">
                                 <signature localId="2699" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="2695" locator="698:20-698:41" name="Li-Fraumeni Syndrome" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2702" locator="699:11-699:36" xsi:type="Equivalent">
                           <signature localId="2710" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <signature localId="2711" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="2706" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2704" locator="699:11-699:16" path="code" scope="C" xsi:type="Property"/>
                           </operand>
                           <operand localId="2708" xsi:type="ToConcept">
                              <signature localId="2709" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="2705" locator="699:20-699:36" name="Cowden Syndrome" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2712" locator="700:11-700:54" xsi:type="Equivalent">
                        <signature localId="2720" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature localId="2721" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="2716" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2714" locator="700:11-700:16" path="code" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand localId="2718" xsi:type="ToConcept">
                           <signature localId="2719" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="2715" locator="700:20-700:54" name="Bannayan-Riley-Ruvalcaba Syndrome" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </where>
               </expression>
            </let>
            <where localId="2723" locator="701:5-701:34" xsi:type="Exists">
               <signature localId="2725" xsi:type="ListTypeSpecifier">
                  <elementType localId="2726" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2724" locator="701:18-701:34" name="GeneticConditions" xsi:type="QueryLetRef"/>
            </where>
            <return localId="2727" locator="702:5-705:5">
               <expression localId="2728" locator="702:12-705:5" xsi:type="Tuple">
                  <element name="familyMemberHistory">
                     <value localId="2729" locator="703:28" name="F" xsi:type="AliasRef"/>
                  </element>
                  <element name="conditions">
                     <value localId="2730" locator="704:19-704:35" name="GeneticConditions" xsi:type="QueryLetRef"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="2659" locator="686:1-688:32" name="FamilyMemberGeneticMarkerOrSyndrome" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2659">
               <a:s>define &quot;FamilyMemberGeneticMarkerOrSyndrome&quot;:
  </a:s>
               <a:s r="2736">
                  <a:s>
                     <a:s r="2660">
                        <a:s r="2732">
                           <a:s>
                              <a:s>FamilyMemberGeneticMarkerOrSyndromeConditions</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2733">
                     <a:s>return </a:s>
                     <a:s r="2735">
                        <a:s r="2734">
                           <a:s>F</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2735">
                           <a:s>familyMemberHistory</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2736" locator="687:3-688:32" xsi:type="Query">
            <source localId="2660" locator="687:3-687:49" alias="F">
               <expression localId="2732" locator="687:3-687:47" name="FamilyMemberGeneticMarkerOrSyndromeConditions" xsi:type="ExpressionRef"/>
            </source>
            <return localId="2733" locator="688:5-688:32">
               <expression localId="2735" locator="688:12-688:32" path="familyMemberHistory" scope="F" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="2629" locator="671:1-674:49" name="de-fhxgeneinherited" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2629">
               <a:s>//------------------------------------------------------------------------------
// Family history of inherited cancer susceptibility
//------------------------------------------------------------------------------  

define &quot;de-fhxgeneinherited&quot;:
  </a:s>
               <a:s r="2630">
                  <a:s>if </a:s>
                  <a:s r="2650">
                     <a:s r="2648">
                        <a:s>FamilyGeneticHistoryAssessmentObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s>
    then </a:s>
                  <a:s r="2656">
                     <a:s r="2651">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="2656">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="2652">
                           <a:s r="2654">
                              <a:s r="2653">
                                 <a:s>FamilyGeneticHistoryAssessmentObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2654">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="2655">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  else </a:s>
                  <a:s r="2657">
                     <a:s>exists </a:s>
                     <a:s r="2737">
                        <a:s>FamilyMemberGeneticMarkerOrSyndrome</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2630" locator="672:3-674:49" xsi:type="If">
            <condition localId="2650" locator="672:6-672:58" xsi:type="Not">
               <operand localId="2649" locator="672:6-672:58" xsi:type="IsNull">
                  <operand localId="2648" locator="672:6-672:46" name="FamilyGeneticHistoryAssessmentObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="2656" locator="673:10-673:90" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="2652" locator="673:32-673:89" strict="false" xsi:type="As">
                  <operand localId="2654" locator="673:32-673:78" path="value" xsi:type="Property">
                     <source localId="2653" locator="673:32-673:72" name="FamilyGeneticHistoryAssessmentObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="2655" locator="673:83-673:89" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="2657" locator="674:8-674:49" xsi:type="Exists">
               <signature localId="2738" xsi:type="ListTypeSpecifier">
                  <elementType localId="2739" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2737" locator="674:15-674:49" name="FamilyMemberGeneticMarkerOrSyndrome" xsi:type="ExpressionRef"/>
            </else>
         </expression>
      </def>
      <def localId="2741" locator="681:1-684:52" name="FirstDegRelativeGeneticMarkerOrSyndrome" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2741">
               <a:s>define &quot;FirstDegRelativeGeneticMarkerOrSyndrome&quot;:
  </a:s>
               <a:s r="2750">
                  <a:s>
                     <a:s r="2742">
                        <a:s r="2743">
                           <a:s>
                              <a:s>FamilyMemberGeneticMarkerOrSyndrome</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2747">
                     <a:s>where 
      </a:s>
                     <a:s r="2747">
                        <a:s r="2745">
                           <a:s r="2744">
                              <a:s>F</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2745">
                              <a:s>relationship</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="2746">
                           <a:s>&quot;First Degree Family Member&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2750" locator="682:3-684:52" xsi:type="Query">
            <source localId="2742" locator="682:3-682:39" alias="F">
               <expression localId="2743" locator="682:3-682:37" name="FamilyMemberGeneticMarkerOrSyndrome" xsi:type="ExpressionRef"/>
            </source>
            <where localId="2747" locator="683:5-684:52" xsi:type="InValueSet">
               <signature localId="2749" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
               <code localId="2748" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2745" locator="684:7-684:20" path="relationship" scope="F" xsi:type="Property"/>
               </code>
               <valueset localId="2746" locator="684:25-684:52" name="First Degree Family Member" preserve="true"/>
            </where>
         </expression>
      </def>
      <def localId="2755" locator="716:1-719:3" name="KnownGeneticMarkerOrSyndromeStatusObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2755">
               <a:s>define KnownGeneticMarkerOrSyndromeStatusObservation:  
  </a:s>
               <a:s r="2770">
                  <a:s r="2756">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2770">
                     <a:s>MostRecent(
      </a:s>
                     <a:s r="2769">
                        <a:s>
                           <a:s r="2757">
                              <a:s r="2760">
                                 <a:s r="2760">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>&quot;Known breast cancer variant status&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> R</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2770" locator="717:3-719:3" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2769" locator="718:7-718:59" xsi:type="Query">
               <source localId="2757" locator="718:7-718:59" alias="R">
                  <expression localId="2760" locator="718:7-718:57" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes localId="2768" xsi:type="ToList">
                        <operand localId="2759" locator="718:21-718:56" name="Known breast cancer variant status" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
            </operand>
         </expression>
      </def>
      <def localId="2752" locator="711:1-714:12" name="de-knownvariantstatus" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2752">
               <a:s>//------------------------------------------------------------------------------
// Unknown variant status
//------------------------------------------------------------------------------  

define &quot;de-knownvariantstatus&quot;:
  </a:s>
               <a:s r="2753">
                  <a:s>if </a:s>
                  <a:s r="2773">
                     <a:s r="2771">
                        <a:s>KnownGeneticMarkerOrSyndromeStatusObservation</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s>
    then </a:s>
                  <a:s r="2779">
                     <a:s r="2774">
                        <a:s>FHIRHelpers</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="2779">
                        <a:s>ToBoolean(</a:s>
                        <a:s r="2775">
                           <a:s r="2777">
                              <a:s r="2776">
                                 <a:s>KnownGeneticMarkerOrSyndromeStatusObservation</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2777">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="2778">
                              <a:s>boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="2780"> 
  else false</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2753" locator="712:3-714:12" xsi:type="If">
            <condition localId="2773" locator="712:6-712:62" xsi:type="Not">
               <operand localId="2772" locator="712:6-712:62" xsi:type="IsNull">
                  <operand localId="2771" locator="712:6-712:50" name="KnownGeneticMarkerOrSyndromeStatusObservation" xsi:type="ExpressionRef"/>
               </operand>
            </condition>
            <then localId="2779" locator="713:10-713:94" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <operand localId="2775" locator="713:32-713:93" strict="false" xsi:type="As">
                  <operand localId="2777" locator="713:32-713:82" path="value" xsi:type="Property">
                     <source localId="2776" locator="713:32-713:76" name="KnownGeneticMarkerOrSyndromeStatusObservation" xsi:type="ExpressionRef"/>
                  </operand>
                  <asTypeSpecifier localId="2778" locator="713:87-713:93" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
               </operand>
            </then>
            <else localId="2780" locator="714:8-714:12" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="2782" locator="727:1-730:3" name="MostRecentBRCAGeneAncestryObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2782">
               <a:s>// TODO: check for BRCA1 and BRCA2 DiagnosticReports with conclusion code and/or associated observations?

//------------------------------------------------------------------------------
// BRCA ancestry
//------------------------------------------------------------------------------ 

define &quot;MostRecentBRCAGeneAncestryObservation&quot;:
  </a:s>
               <a:s r="2797">
                  <a:s r="2783">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2797">
                     <a:s>MostRecent(
      </a:s>
                     <a:s r="2796">
                        <a:s>
                           <a:s r="2784">
                              <a:s r="2787">
                                 <a:s r="2787">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>&quot;Ancestry associated with BRCA1/2 gene mutations&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> R</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2797" locator="728:3-730:3" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2796" locator="729:7-729:72" xsi:type="Query">
               <source localId="2784" locator="729:7-729:72" alias="R">
                  <expression localId="2787" locator="729:7-729:70" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes localId="2795" xsi:type="ToList">
                        <operand localId="2786" locator="729:21-729:69" name="Ancestry associated with BRCA1/2 gene mutations" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
            </operand>
         </expression>
      </def>
      <def localId="2802" locator="739:1-740:81" name="FamilyHistoryBreastOvarianTubalPeritonealCancerObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2802">
               <a:s>define FamilyHistoryBreastOvarianTubalPeritonealCancerObservations:  
  </a:s>
               <a:s r="2805">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Family history of breast, ovarian, tubal, or peritoneal cancer&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2805" locator="740:3-740:81" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="2813" xsi:type="ToList">
               <operand localId="2804" locator="740:17-740:80" name="Family history of breast, ovarian, tubal, or peritoneal cancer" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="2799" locator="736:1-737:77" name="FamilyHistoryBreastOvarianTubalPeritonealCancerObservation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2799">
               <a:s>//------------------------------------------------------------------------------
// Family history of breast, ovarian, tubal, or peritoneal cancer
//------------------------------------------------------------------------------  

define FamilyHistoryBreastOvarianTubalPeritonealCancerObservation:  
  </a:s>
               <a:s r="2815">
                  <a:s r="2800">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2815">
                     <a:s>MostRecent(</a:s>
                     <a:s r="2814">
                        <a:s>FamilyHistoryBreastOvarianTubalPeritonealCancerObservations</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2815" locator="737:3-737:77" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2814" locator="737:18-737:76" name="FamilyHistoryBreastOvarianTubalPeritonealCancerObservations" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2820" locator="746:1-758:5" name="FamilyMemberBreastOvarianTubalPeritonealCancerCondition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2820">
               <a:s>define &quot;FamilyMemberBreastOvarianTubalPeritonealCancerCondition&quot;:
  </a:s>
               <a:s r="2863">
                  <a:s>
                     <a:s r="2821">
                        <a:s r="2822">
                           <a:s r="2822">
                              <a:s>[FamilyMemberHistory]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> F</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s>
                     <a:s>let
      </a:s>
                     <a:s r="2823">
                        <a:s>CancerConditions: </a:s>
                        <a:s r="2854">
                           <a:s>
                              <a:s r="2824">
                                 <a:s r="2826">
                                    <a:s>
                                       <a:s>F.condition</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        </a:s>
                           <a:s r="2827">
                              <a:s>where </a:s>
                              <a:s r="2827">
                                 <a:s r="2828">
                                    <a:s r="2829">
                                       <a:s r="2833">
                                          <a:s r="2831">
                                             <a:s r="2830">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2831">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="2832">
                                             <a:s>&quot;Breast Cancer&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or
              </a:s>
                                       <a:s r="2839">
                                          <a:s r="2837">
                                             <a:s r="2836">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2837">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="2838">
                                             <a:s>&quot;Ovarian Cancer&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> or
              </a:s>
                                    <a:s r="2845">
                                       <a:s r="2843">
                                          <a:s r="2842">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2843">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="2844">
                                          <a:s>&quot;Tubal Cancer&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> or
              </a:s>
                                 <a:s r="2851">
                                    <a:s r="2849">
                                       <a:s r="2848">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2849">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="2850">
                                       <a:s>&quot;Peritoneal Cancer&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2855">
                     <a:s>where </a:s>
                     <a:s r="2855">
                        <a:s>exists </a:s>
                        <a:s r="2856">
                           <a:s>CancerConditions</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2859">
                     <a:s>return </a:s>
                     <a:s r="2860">
                        <a:s>{
      </a:s>
                        <a:s>
                           <a:s>familyMemberHistory: </a:s>
                           <a:s r="2861">
                              <a:s>F</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s>
                           <a:s>conditions: </a:s>
                           <a:s r="2862">
                              <a:s>CancerConditions</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2863" locator="747:3-758:5" xsi:type="Query">
            <source localId="2821" locator="747:3-747:25" alias="F">
               <expression localId="2822" locator="747:3-747:23" dataType="fhir:FamilyMemberHistory" templateId="http://hl7.org/fhir/StructureDefinition/FamilyMemberHistory" xsi:type="Retrieve"/>
            </source>
            <let localId="2823" locator="749:7-753:43" identifier="CancerConditions">
               <expression localId="2854" locator="749:25-753:43" xsi:type="Query">
                  <source localId="2824" locator="749:25-749:37" alias="C">
                     <expression localId="2826" locator="749:25-749:35" path="condition" scope="F" xsi:type="Property"/>
                  </source>
                  <where localId="2827" locator="750:9-753:43" xsi:type="Or">
                     <operand localId="2828" locator="750:15-752:38" xsi:type="Or">
                        <operand localId="2829" locator="750:15-751:40" xsi:type="Or">
                           <operand localId="2833" locator="750:15-750:39" xsi:type="InValueSet">
                              <signature localId="2835" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <code localId="2834" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2831" locator="750:15-750:20" path="code" scope="C" xsi:type="Property"/>
                              </code>
                              <valueset localId="2832" locator="750:25-750:39" name="Breast Cancer" preserve="true"/>
                           </operand>
                           <operand localId="2839" locator="751:15-751:40" xsi:type="InValueSet">
                              <signature localId="2841" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                              <code localId="2840" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2837" locator="751:15-751:20" path="code" scope="C" xsi:type="Property"/>
                              </code>
                              <valueset localId="2838" locator="751:25-751:40" name="Ovarian Cancer" preserve="true"/>
                           </operand>
                        </operand>
                        <operand localId="2845" locator="752:15-752:38" xsi:type="InValueSet">
                           <signature localId="2847" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <code localId="2846" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2843" locator="752:15-752:20" path="code" scope="C" xsi:type="Property"/>
                           </code>
                           <valueset localId="2844" locator="752:25-752:38" name="Tubal Cancer" preserve="true"/>
                        </operand>
                     </operand>
                     <operand localId="2851" locator="753:15-753:43" xsi:type="InValueSet">
                        <signature localId="2853" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <code localId="2852" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2849" locator="753:15-753:20" path="code" scope="C" xsi:type="Property"/>
                        </code>
                        <valueset localId="2850" locator="753:25-753:43" name="Peritoneal Cancer" preserve="true"/>
                     </operand>
                  </where>
               </expression>
            </let>
            <where localId="2855" locator="754:5-754:33" xsi:type="Exists">
               <signature localId="2857" xsi:type="ListTypeSpecifier">
                  <elementType localId="2858" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2856" locator="754:18-754:33" name="CancerConditions" xsi:type="QueryLetRef"/>
            </where>
            <return localId="2859" locator="755:5-758:5">
               <expression localId="2860" locator="755:12-758:5" xsi:type="Tuple">
                  <element name="familyMemberHistory">
                     <value localId="2861" locator="756:28" name="F" xsi:type="AliasRef"/>
                  </element>
                  <element name="conditions">
                     <value localId="2862" locator="757:19-757:34" name="CancerConditions" xsi:type="QueryLetRef"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="2817" locator="742:1-744:34" name="FamilyMemberBreastOvarianTubalPeritonealCancer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2817">
               <a:s>define &quot;FamilyMemberBreastOvarianTubalPeritonealCancer&quot;:
  </a:s>
               <a:s r="2868">
                  <a:s>
                     <a:s r="2818">
                        <a:s r="2864">
                           <a:s>
                              <a:s>FamilyMemberBreastOvarianTubalPeritonealCancerCondition</a:s>
                           </a:s>
                        </a:s>
                        <a:s> FMH</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="2865">
                     <a:s>return </a:s>
                     <a:s r="2867">
                        <a:s r="2866">
                           <a:s>FMH</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2867">
                           <a:s>familyMemberHistory</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2868" locator="743:3-744:34" xsi:type="Query">
            <source localId="2818" locator="743:3-743:61" alias="FMH">
               <expression localId="2864" locator="743:3-743:57" name="FamilyMemberBreastOvarianTubalPeritonealCancerCondition" xsi:type="ExpressionRef"/>
            </source>
            <return localId="2865" locator="744:5-744:34">
               <expression localId="2867" locator="744:12-744:34" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
            </return>
         </expression>
      </def>
      <def localId="2870" locator="764:1-768:3" name="GeneticCounselingEncounters" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2870">
               <a:s>//------------------------------------------------------------------------------
// Genetic risk referrals and encounters
//------------------------------------------------------------------------------  

define GeneticCounselingEncounters:
  </a:s>
               <a:s r="2893">
                  <a:s r="2871">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2893">
                     <a:s>RelevantEncounterStatus(
    </a:s>
                     <a:s r="2892">
                        <a:s>
                           <a:s r="2872">
                              <a:s r="2873">
                                 <a:s r="2873">
                                    <a:s>[Encounter]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="2874">
                           <a:s>where </a:s>
                           <a:s r="2874">
                              <a:s r="2878">
                                 <a:s r="2876">
                                    <a:s r="2875">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2876">
                                       <a:s>serviceType</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="2877">
                                    <a:s>&quot;GENETIC COUNSELING&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> or </a:s>
                              <a:s r="2884">
                                 <a:s r="2882">
                                    <a:s r="2881">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2882">
                                       <a:s>reasonCode</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="2883">
                                    <a:s>&quot;GENETIC COUNSELING&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2893" locator="765:3-768:3" name="RelevantEncounterStatus" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="2892" locator="766:5-767:89" xsi:type="Query">
               <source localId="2872" locator="766:5-766:17" alias="E">
                  <expression localId="2873" locator="766:5-766:15" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" xsi:type="Retrieve"/>
               </source>
               <where localId="2874" locator="767:7-767:89" xsi:type="Or">
                  <operand localId="2878" locator="767:13-767:49" xsi:type="InValueSet">
                     <signature localId="2880" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <code localId="2879" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2876" locator="767:13-767:25" path="serviceType" scope="E" xsi:type="Property"/>
                     </code>
                     <valueset localId="2877" locator="767:30-767:49" name="GENETIC COUNSELING" preserve="true"/>
                  </operand>
                  <operand localId="2884" locator="767:54-767:89" xsi:type="AnyInValueSet">
                     <signature localId="2890" xsi:type="ListTypeSpecifier">
                        <elementType localId="2891" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <codes localId="2885" xsi:type="Query">
                        <source localId="2886" alias="X">
                           <expression localId="2882" locator="767:54-767:65" path="reasonCode" scope="E" xsi:type="Property"/>
                        </source>
                        <return localId="2887" distinct="false">
                           <expression localId="2889" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2888" name="X" xsi:type="AliasRef"/>
                           </expression>
                        </return>
                     </codes>
                     <valueset localId="2883" locator="767:70-767:89" name="GENETIC COUNSELING" preserve="true"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="2895" locator="770:1-773:78" name="GeneticCounselingReferralOrders" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2895">
               <a:s>define GeneticCounselingReferralOrders:
  </a:s>
               <a:s r="2920">
                  <a:s>
                     <a:s r="2896">
                        <a:s r="2897">
                           <a:s r="2897">
                              <a:s>[ServiceRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="2898">
                     <a:s>where 
    </a:s>
                     <a:s r="2898">
                        <a:s r="2899">
                           <a:s r="2902">
                              <a:s r="2900">
                                 <a:s>BCSMCommon</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2902">
                                 <a:s>ServiceRequestWithOrderIntent(</a:s>
                                 <a:s r="2901">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> 
    and </a:s>
                           <a:s r="2906">
                              <a:s r="2904">
                                 <a:s r="2903">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2904">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2905">
                                 <a:s>&quot;GENETIC COUNSELING&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> or </a:s>
                        <a:s r="2912">
                           <a:s r="2910">
                              <a:s r="2909">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2910">
                                 <a:s>reasonCode</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="2911">
                              <a:s>&quot;GENETIC COUNSELING&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2920" locator="771:3-773:78" xsi:type="Query">
            <source localId="2896" locator="771:3-771:20" alias="O">
               <expression localId="2897" locator="771:3-771:18" dataType="fhir:ServiceRequest" templateId="http://hl7.org/fhir/StructureDefinition/ServiceRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="2898" locator="771:22-773:78" xsi:type="Or">
               <operand localId="2899" locator="772:5-773:38" xsi:type="And">
                  <operand localId="2902" locator="772:5-772:47" name="ServiceRequestWithOrderIntent" libraryName="BCSMCommon" xsi:type="FunctionRef">
                     <operand localId="2901" locator="772:46" name="O" xsi:type="AliasRef"/>
                  </operand>
                  <operand localId="2906" locator="773:9-773:38" xsi:type="InValueSet">
                     <signature localId="2908" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <code localId="2907" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2904" locator="773:9-773:14" path="code" scope="O" xsi:type="Property"/>
                     </code>
                     <valueset localId="2905" locator="773:19-773:38" name="GENETIC COUNSELING" preserve="true"/>
                  </operand>
               </operand>
               <operand localId="2912" locator="773:43-773:78" xsi:type="AnyInValueSet">
                  <signature localId="2918" xsi:type="ListTypeSpecifier">
                     <elementType localId="2919" name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <codes localId="2913" xsi:type="Query">
                     <source localId="2914" alias="X">
                        <expression localId="2910" locator="773:43-773:54" path="reasonCode" scope="O" xsi:type="Property"/>
                     </source>
                     <return localId="2915" distinct="false">
                        <expression localId="2917" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2916" name="X" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </codes>
                  <valueset localId="2911" locator="773:59-773:78" name="GENETIC COUNSELING" preserve="true"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2922" locator="779:1-780:57" name="MostRecent5YrRiskAssessment" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2922">
               <a:s>//------------------------------------------------------------------------------
// High risk referral factors
//------------------------------------------------------------------------------  

define MostRecent5YrRiskAssessment:
  </a:s>
               <a:s r="2935">
                  <a:s r="2923">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2935">
                     <a:s>MostRecent(</a:s>
                     <a:s r="2926">
                        <a:s>[Observation: </a:s>
                        <a:s>
                           <a:s>&quot;5 year risk assessment&quot;</a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2935" locator="780:3-780:57" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2926" locator="780:18-780:56" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
               <codes localId="2934" xsi:type="ToList">
                  <operand localId="2925" locator="780:32-780:55" name="5 year risk assessment" xsi:type="CodeRef"/>
               </codes>
            </operand>
         </expression>
      </def>
      <def localId="2937" locator="782:1-783:53" name="MostRecent5YrRiskAssessmentDate" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2937">
               <a:s>define MostRecent5YrRiskAssessmentDate:
  </a:s>
               <a:s r="2940">
                  <a:s r="2938">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2940">
                     <a:s>ObservationDate(</a:s>
                     <a:s r="2939">
                        <a:s>MostRecent5YrRiskAssessment</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2940" locator="783:3-783:53" name="ObservationDate" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="2939" locator="783:26-783:52" name="MostRecent5YrRiskAssessment" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2945" locator="788:1-789:83" name="PersonalRiskFactorAssessments" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2945">
               <a:s>define PersonalRiskFactorAssessments:
  </a:s>
               <a:s r="2948">
                  <a:s>[Observation: </a:s>
                  <a:s>
                     <a:s>&quot;Personal risk factors conferring increased risk of breast cancer&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2948" locator="789:3-789:83" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
            <codes localId="2956" xsi:type="ToList">
               <operand localId="2947" locator="789:17-789:82" name="Personal risk factors conferring increased risk of breast cancer" xsi:type="CodeRef"/>
            </codes>
         </expression>
      </def>
      <def localId="2942" locator="785:1-786:47" name="MostRecentPersonalRiskFactorAssessment" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2942">
               <a:s>define MostRecentPersonalRiskFactorAssessment:
  </a:s>
               <a:s r="2958">
                  <a:s r="2943">
                     <a:s>C3F</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2958">
                     <a:s>MostRecent(</a:s>
                     <a:s r="2957">
                        <a:s>PersonalRiskFactorAssessments</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2958" locator="786:3-786:47" name="MostRecent" libraryName="C3F" xsi:type="FunctionRef">
            <operand localId="2957" locator="786:18-786:46" name="PersonalRiskFactorAssessments" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2960" locator="795:1-796:86" name="CompletedBreastCancerScreeningDiagnosticReports" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2960">
               <a:s>//------------------------------------------------------------------------------
// Latest screening test
//------------------------------------------------------------------------------  

define CompletedBreastCancerScreeningDiagnosticReports:
  </a:s>
               <a:s r="2963">
                  <a:s r="2961">
                     <a:s>CompletedBreastImagingDiagnosticReports</a:s>
                  </a:s>
                  <a:s> union </a:s>
                  <a:s r="2962">
                     <a:s>CompletedBreastBiopsyDiagnosticReports</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2963" locator="796:3-796:86" xsi:type="Union">
            <signature localId="2964" xsi:type="ListTypeSpecifier">
               <elementType localId="2965" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="2966" xsi:type="ListTypeSpecifier">
               <elementType localId="2967" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="2961" locator="796:3-796:41" name="CompletedBreastImagingDiagnosticReports" xsi:type="ExpressionRef"/>
            <operand localId="2962" locator="796:49-796:86" name="CompletedBreastBiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2969" locator="802:1-803:67" name="MostRecentBreastImagingDiagnosticReport" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2969">
               <a:s>// Imaging
define MostRecentBreastImagingDiagnosticReport:
  </a:s>
               <a:s r="2972">
                  <a:s r="2970">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="2972">
                     <a:s>MostRecentDiagnosticReport(</a:s>
                     <a:s r="2971">
                        <a:s>BreastImagingDiagnosticReports</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2972" locator="803:3-803:67" name="MostRecentDiagnosticReport" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="2971" locator="803:37-803:66" name="BreastImagingDiagnosticReports" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2974" locator="805:1-807:116" name="MostRecentBreastImagingDiagnosticReportNoConclusionCodes" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2974">
               <a:s>define MostRecentBreastImagingDiagnosticReportNoConclusionCodes:
  </a:s>
               <a:s r="2975">
                  <a:s r="2978">
                     <a:s r="2976">
                        <a:s>MostRecentBreastImagingDiagnosticReport</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and
    </a:s>
                  <a:s r="2979">
                     <a:s>not </a:s>
                     <a:s r="2988">
                        <a:s>Exists(</a:s>
                        <a:s r="2983">
                           <a:s r="2980">
                              <a:s>BCSMCommon</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2983">
                              <a:s>CollateConclusionCodes(</a:s>
                              <a:s r="2981">
                                 <a:s>MostRecentBreastImagingDiagnosticReport</a:s>
                              </a:s>
                              <a:s>,</a:s>
                              <a:s r="2982">
                                 <a:s>BreastImagingObservations</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2975" locator="806:3-807:116" xsi:type="And">
            <operand localId="2978" locator="806:3-806:53" xsi:type="Not">
               <operand localId="2977" locator="806:3-806:53" xsi:type="IsNull">
                  <operand localId="2976" locator="806:3-806:41" name="MostRecentBreastImagingDiagnosticReport" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="2979" locator="807:5-807:116" xsi:type="Not">
               <operand localId="2988" locator="807:9-807:116" xsi:type="Exists">
                  <signature localId="2989" xsi:type="ListTypeSpecifier">
                     <elementType localId="2990" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="2983" locator="807:16-807:115" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                     <operand localId="2981" locator="807:50-807:88" name="MostRecentBreastImagingDiagnosticReport" xsi:type="ExpressionRef"/>
                     <operand localId="2982" locator="807:90-807:114" name="BreastImagingObservations" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="2992" locator="819:1-824:3" name="ImagingDiagnosticReportsWithNoConclusionCodes" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2992">
               <a:s>define ImagingDiagnosticReportsWithNoConclusionCodes:
  </a:s>
               <a:s r="2993">
                  <a:s r="2999">
                     <a:s>Exists(</a:s>
                     <a:s r="2994">
                        <a:s>BreastImagingDiagnosticReports</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> and
    </a:s>
                  <a:s r="3020">
                     <a:s>AnyTrue(
      </a:s>
                     <a:s r="3017">
                        <a:s>
                           <a:s r="3002">
                              <a:s r="3003">
                                 <a:s>(</a:s>
                                 <a:s r="3003">
                                    <a:s>BiopsyDiagnosticReports</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> D</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
      </a:s>
                        <a:s r="3004">
                           <a:s>return </a:s>
                           <a:s r="3005">
                              <a:s>not </a:s>
                              <a:s r="3014">
                                 <a:s>Exists(</a:s>
                                 <a:s r="3009">
                                    <a:s r="3006">
                                       <a:s>BCSMCommon</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="3009">
                                       <a:s>CollateConclusionCodes(</a:s>
                                       <a:s r="3007">
                                          <a:s>D</a:s>
                                       </a:s>
                                       <a:s>,</a:s>
                                       <a:s r="3008">
                                          <a:s>BreastImagingObservations</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2993" locator="820:3-824:3" xsi:type="And">
            <operand localId="2999" locator="820:3-820:40" xsi:type="Exists">
               <signature localId="3000" xsi:type="ListTypeSpecifier">
                  <elementType localId="3001" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="2994" locator="820:10-820:39" name="BreastImagingDiagnosticReports" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="3020" locator="821:5-824:3" xsi:type="AnyTrue">
               <source localId="3017" locator="822:7-823:87" xsi:type="Query">
                  <source localId="3002" locator="822:7-822:33" alias="D">
                     <expression localId="3003" locator="822:7-822:31" name="BiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
                  </source>
                  <return localId="3004" locator="823:7-823:87">
                     <expression localId="3005" locator="823:14-823:87" xsi:type="Not">
                        <operand localId="3014" locator="823:18-823:87" xsi:type="Exists">
                           <signature localId="3015" xsi:type="ListTypeSpecifier">
                              <elementType localId="3016" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <operand localId="3009" locator="823:25-823:86" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                              <operand localId="3007" locator="823:59" name="D" xsi:type="AliasRef"/>
                              <operand localId="3008" locator="823:61-823:85" name="BreastImagingObservations" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </expression>
                  </return>
               </source>
            </operand>
         </expression>
      </def>
      <def localId="3022" locator="833:1-834:60" name="MostRecentBreastBiopsyDiagnosticReport" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3022">
               <a:s>// Biopsy
define MostRecentBreastBiopsyDiagnosticReport:
  </a:s>
               <a:s r="3025">
                  <a:s r="3023">
                     <a:s>Common</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="3025">
                     <a:s>MostRecentDiagnosticReport(</a:s>
                     <a:s r="3024">
                        <a:s>BiopsyDiagnosticReports</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="3025" locator="834:3-834:60" name="MostRecentDiagnosticReport" libraryName="Common" xsi:type="FunctionRef">
            <operand localId="3024" locator="834:37-834:59" name="BiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="3027" locator="836:1-839:65" name="MostRecentBreastBiopsyDiagnosticReportNoConclusionCodes" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3027">
               <a:s>define MostRecentBreastBiopsyDiagnosticReportNoConclusionCodes:
  </a:s>
               <a:s r="3028">
                  <a:s r="3031">
                     <a:s r="3029">
                        <a:s>MostRecentBreastBiopsyDiagnosticReport</a:s>
                     </a:s>
                     <a:s> is not null</a:s>
                  </a:s>
                  <a:s> and
    </a:s>
                  <a:s r="3032">
                     <a:s>not </a:s>
                     <a:s r="3041">
                        <a:s>Exists(</a:s>
                        <a:s r="3036">
                           <a:s r="3033">
                              <a:s>BCSMCommon</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="3036">
                              <a:s>CollateConclusionCodes(
      </a:s>
                              <a:s r="3034">
                                 <a:s>MostRecentBreastBiopsyDiagnosticReport</a:s>
                              </a:s>
                              <a:s>,</a:s>
                              <a:s r="3035">
                                 <a:s>BiopsyObservations</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="3028" locator="837:3-839:65" xsi:type="And">
            <operand localId="3031" locator="837:3-837:52" xsi:type="Not">
               <operand localId="3030" locator="837:3-837:52" xsi:type="IsNull">
                  <operand localId="3029" locator="837:3-837:40" name="MostRecentBreastBiopsyDiagnosticReport" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="3032" locator="838:5-839:65" xsi:type="Not">
               <operand localId="3041" locator="838:9-839:65" xsi:type="Exists">
                  <signature localId="3042" xsi:type="ListTypeSpecifier">
                     <elementType localId="3043" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                  </signature>
                  <operand localId="3036" locator="838:16-839:64" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                     <operand localId="3034" locator="839:7-839:44" name="MostRecentBreastBiopsyDiagnosticReport" xsi:type="ExpressionRef"/>
                     <operand localId="3035" locator="839:46-839:63" name="BiopsyObservations" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
            </operand>
         </expression>
      </def>
      <def localId="3045" locator="851:1-856:3" name="BiopsyDiagnosticReportsWithNoConclusionCodes" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3045">
               <a:s>define BiopsyDiagnosticReportsWithNoConclusionCodes:
  </a:s>
               <a:s r="3046">
                  <a:s r="3052">
                     <a:s>Exists(</a:s>
                     <a:s r="3047">
                        <a:s>BiopsyDiagnosticReports</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> and
    </a:s>
                  <a:s r="3073">
                     <a:s>AnyTrue(
      </a:s>
                     <a:s r="3070">
                        <a:s>
                           <a:s r="3055">
                              <a:s r="3056">
                                 <a:s>(</a:s>
                                 <a:s r="3056">
                                    <a:s>BiopsyDiagnosticReports</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> D</a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
      </a:s>
                        <a:s r="3057">
                           <a:s>return </a:s>
                           <a:s r="3058">
                              <a:s>not </a:s>
                              <a:s r="3067">
                                 <a:s>Exists(</a:s>
                                 <a:s r="3062">
                                    <a:s r="3059">
                                       <a:s>BCSMCommon</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="3062">
                                       <a:s>CollateConclusionCodes(</a:s>
                                       <a:s r="3060">
                                          <a:s>D</a:s>
                                       </a:s>
                                       <a:s>,</a:s>
                                       <a:s r="3061">
                                          <a:s>BiopsyObservations</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="3046" locator="852:3-856:3" xsi:type="And">
            <operand localId="3052" locator="852:3-852:33" xsi:type="Exists">
               <signature localId="3053" xsi:type="ListTypeSpecifier">
                  <elementType localId="3054" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="3047" locator="852:10-852:32" name="BiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="3073" locator="853:5-856:3" xsi:type="AnyTrue">
               <source localId="3070" locator="854:7-855:80" xsi:type="Query">
                  <source localId="3055" locator="854:7-854:33" alias="D">
                     <expression localId="3056" locator="854:7-854:31" name="BiopsyDiagnosticReports" xsi:type="ExpressionRef"/>
                  </source>
                  <return localId="3057" locator="855:7-855:80">
                     <expression localId="3058" locator="855:14-855:80" xsi:type="Not">
                        <operand localId="3067" locator="855:18-855:80" xsi:type="Exists">
                           <signature localId="3068" xsi:type="ListTypeSpecifier">
                              <elementType localId="3069" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <operand localId="3062" locator="855:25-855:79" name="CollateConclusionCodes" libraryName="BCSMCommon" xsi:type="FunctionRef">
                              <operand localId="3060" locator="855:59" name="D" xsi:type="AliasRef"/>
                              <operand localId="3061" locator="855:61-855:78" name="BiopsyObservations" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </expression>
                  </return>
               </source>
            </operand>
         </expression>
      </def>
      <def localId="3075" locator="861:1-863:57" name="IncompleteBreastBiopsyDiagnosticReports" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3075">
               <a:s>define IncompleteBreastBiopsyDiagnosticReports:
  </a:s>
               <a:s r="3097">
                  <a:s>
                     <a:s r="3076">
                        <a:s r="3079">
                           <a:s r="3079">
                              <a:s>[DiagnosticReport: </a:s>
                              <a:s>
                                 <a:s>&quot;Breast Pathology biopsy report&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> DR</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="3094">
                     <a:s>where
    </a:s>
                     <a:s r="3094">
                        <a:s r="3089">
                           <a:s r="3088">
                              <a:s>DR</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="3089">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> in </a:s>
                        <a:s r="3090">
                           <a:s>{</a:s>
                           <a:s r="3091">
                              <a:s>'preliminary'</a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="3092">
                              <a:s>'registered'</a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="3093">
                              <a:s>'partial'</a:s>
                           </a:s>
                           <a:s>}</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="3097" locator="862:3-863:57" xsi:type="Query">
            <source localId="3076" locator="862:3-862:57" alias="DR">
               <expression localId="3079" locator="862:3-862:54" dataType="fhir:DiagnosticReport" templateId="http://hl7.org/fhir/StructureDefinition/DiagnosticReport" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes localId="3087" xsi:type="ToList">
                     <operand localId="3078" locator="862:22-862:53" name="Breast Pathology biopsy report" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="3094" locator="862:59-863:57" xsi:type="In">
               <operand localId="3095" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="3096" name="fhir:DiagnosticReportStatus" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="3089" locator="863:5-863:13" path="status" scope="DR" xsi:type="Property"/>
               </operand>
               <operand localId="3090" locator="863:18-863:57" xsi:type="List">
                  <element localId="3091" locator="863:19-863:31" valueType="t:String" value="preliminary" xsi:type="Literal"/>
                  <element localId="3092" locator="863:34-863:45" valueType="t:String" value="registered" xsi:type="Literal"/>
                  <element localId="3093" locator="863:48-863:56" valueType="t:String" value="partial" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
      </def>
   </statements>
</library>
