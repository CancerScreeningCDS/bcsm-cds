<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>High Risk Exclusions - Breast Cancer Screening and Management (BCSM) Clinical Decision Support (CDS) Implementation Guide v1.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"7.12"}
    h3,h4,h5,h6{--heading-prefix:"7.12"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Breast Cancer Screening and Management (BCSM) Clinical Decision Support (CDS) Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - ci-build


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="background.html">Background</a>
  </li>
  <li>
    <a href="specification.html">Specification</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Artifacts
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">FHIR Artifacts</a>
      </li>
      <li>
        <a href="terminology.html">Terminology</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="examples.html">Examples</a>
  </li>
  <li>
    <a href="downloads.html">Downloads</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='artifacts.html'><b>Artifacts Summary</b></a></li><li><b>High Risk Exclusions</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Breast Cancer Screening and Management (BCSM) Clinical Decision Support (CDS) Implementation Guide - Local Development build (v1.0.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="http://cancerscreeningcds.github.io/bcsm-cds/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  








<ul class="nav nav-tabs">

  <li class="active">
    <a href="#">Narrative Content</a>
  </li>



  
    <li>
      <a href="Library-HighRiskExclusions.xml.html">XML</a>
    </li>
  


  
    <li>
      <a href="Library-HighRiskExclusions.json.html">JSON</a>
    </li>
  


  
    <li>
      <a href="Library-HighRiskExclusions.ttl.html">TTL</a>
    </li>
  



</ul>

  <a name="root"> </a>

  <h2 id="root">Library: High Risk Exclusions

  </h2>

  <table class="colsd">

    <tr>
      <td colspan="4"><i>Official URL</i>: <span class="copy-text">http://cancerscreeningcds.github.io/bcsm-cds/Library/HighRiskExclusions<button title="Click to copy URL" class="btn-copy" data-clipboard-text="http://cancerscreeningcds.github.io/bcsm-cds/Library/HighRiskExclusions"/></span>
      </td>
      <td><i>Version</i>:
      <span class="copy-text">1.0.0<button title="Click to copy versioned URL" class="btn-copy" data-clipboard-text="http://cancerscreeningcds.github.io/bcsm-cds/Library/HighRiskExclusions|1.0.0"/></span>
      </td>
    </tr>

    <tr>







      <td colspan="4">
        
          Draft
          
            as of 2025-02-28
          
        
      </td>



      <td><i>Computable Name</i>: <span style="font-family: monospace;">HighRiskExclusions</span></td>
    </tr>




  </table>



  <!-- insert intro if present -->
  



<!--  <p>
  Formats: <a href="Library-HighRiskExclusions.xml.html">XML</a>, <a href="Library-HighRiskExclusions.json.html">JSON</a>, <a href="Library-HighRiskExclusions.ttl.html">Turtle</a>
  </p>-->

  


  <div xmlns="http://www.w3.org/1999/xhtml">
<div>
    <table class="grid dict">
        
        
        <tr>
            <th scope="row"><b>Title: </b></th>
            <td style="padding-left: 4px;">High Risk Exclusions</td>
        </tr>
        

        
        
        <tr>
            <th scope="row"><b>Id: </b></th>
            <td style="padding-left: 4px;">HighRiskExclusions</td>
        </tr>
        

        
        
        <tr>
            <th scope="row"><b>Version: </b></th>
            <td style="padding-left: 4px;">1.0.0</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Url: </b></th>
            <td style="padding-left: 4px;"><a href="Library-HighRiskExclusions.html">High Risk Exclusions</a></td>
        </tr>
        

        

        

        
        <tr>
            <th scope="row"><b>Status: </b></th>
            <td style="padding-left: 4px;">draft</td>
        </tr>
        

        

        
        <tr>
            <th scope="row"><b>Type: </b></th>
            <td style="padding-left: 4px;">
                
                    
                        
                        <p style="margin-bottom: 5px;">
                            <b>system: </b> <span><a href="http://terminology.hl7.org/6.2.0/CodeSystem-library-type.html">http://terminology.hl7.org/CodeSystem/library-type</a></span>
                        </p>
                        
                        
                        <p style="margin-bottom: 5px;">
                            <b>code: </b> <span>logic-library</span>
                        </p>
                        
                        
                    
                
                
            </td>
        </tr>
        

        

        
        <tr>
            <th scope="row"><b>Date: </b></th>
            <td style="padding-left: 4px;">2025-02-28 23:16:14+0000</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Publisher: </b></th>
            <td style="padding-left: 4px;">MITRE</td>
        </tr>
        

        

        

        

        

        

        

        

        

        

        

        

        
        <tr>
            <th scope="row"><b>Related Artifacts: </b></th>
            <td style="padding-left: 4px;">
                
                
                
                <p><b>Dependencies</b></p>
                <ul>
                  
                    <li><code>http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1</code></li>
                  
                    <li><code>http://cancerscreeningcds.github.io/bcsm-cds/Library/FHIRHelpers|4.0.1</code></li>
                  
                    <li><a href="Library-HighRiskExclusionsEvents.html">High Risk Exclusions Eventsversion: null1.0.0)</a></li>
                  
                    <li><a href="Library-HighRiskExclusionsActions.html">High Risk Exclusions Actionsversion: null1.0.0)</a></li>
                  
                    <li><a href="Library-DataElements.html">DataElementsversion: null1.0.0)</a></li>
                  
                    <li><a href="Library-BCSMCommonFunctions.html">BCSM Common Functionsversion: null1.0.0)</a></li>
                  
                    <li><a href="Library-CSMCommonFunctions.html">CSM Common Functionsversion: null1.0.0)</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-condition-ver-status.html">ConditionVerificationStatus</a></li>
                  
                    <li><a href="http://terminology.hl7.org/6.2.0/CodeSystem-v3-loinc.html">Logical Observation Identifiers, Names and Codes (LOINC)</a></li>
                  
                    <li><a href="CodeSystem-biopsy-result-observation-code-system.html">Biopsy Result Observation Code System</a></li>
                  
                    <li><code>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392</code></li>
                  
                </ul>
                
                
                
                
                
            </td>
        </tr>
        

        
        <tr>
          <th scope="row"><b>Parameters: </b></th>
          <td style="padding-left: 4px;">
            <table class="grid-dict">
              <tr><th><b>Name</b></th><th><b>Type</b></th><th><b>Min</b></th><th><b>Max</b></th><th><b>In/Out</b></th></tr>
              
                <tr><th>Patient</th><th>Patient</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMammo</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMri</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>SpecialtyReferralGeneticRisk</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterRT</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAfterRT</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterBrca</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>SpecialtyReferralBreastCaWithin5y</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>eve-atypicalbx</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAtypicalBiopsy</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSAtypicalBiopsy</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAtypicalBiopsyHighRisk</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>flow-HighRiskExclusions</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsSpecialtyReferralGeneticRisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>SpecialtyReferralGeneticRiskCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>SpecialtyReferralGeneticRiskReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ExistsACSGeneticRiskMammo</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMammoCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMammoReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMammoTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMammoTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMammoFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsACSGeneticRiskMri</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMriCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMriReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMriTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMriTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSGeneticRiskMriFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsACSMammoAfterRT</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterRTCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterRTReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterRTTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterRTTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterRTFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsACSMriAfterRT</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAfterRTCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAfterRTReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAfterRTTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAfterRTTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAfterRTFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsACSMammoAfterBrca</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterBrcaCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterBrcaReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterBrcaTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterBrcaTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAfterBrcaFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsSpecialtyReferralBreastCaWithin5y</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>SpecialtyReferralBreastCaWithin5yCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>SpecialtyReferralBreastCaWithin5yReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ExistsACSMammoAtypicalBiopsy</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAtypicalBiopsyCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAtypicalBiopsyReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAtypicalBiopsyTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAtypicalBiopsyTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMammoAtypicalBiopsyFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
                <tr><th>ExistsACSAtypicalBiopsy</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSAtypicalBiopsyCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSAtypicalBiopsyReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ExistsACSMriAtypicalBiopsyHighRisk</th><th>boolean</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAtypicalBiopsyHighRiskCode</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAtypicalBiopsyHighRiskReason</th><th>Coding</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAtypicalBiopsyHighRiskTiming</th><th>Resource</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAtypicalBiopsyHighRiskTimingEvent</th><th>string</th><th>0</th><th>1</th><th>Out</th></tr>
              
                <tr><th>ACSMriAtypicalBiopsyHighRiskFlag</th><th>Resource</th><th>0</th><th>*</th><th>Out</th></tr>
              
            </table>
          </td>
        </tr>
        

        
        <tr>
          <th scope="row"><b>Data Requirements:</b></th>
          <td style="padding-left: 4px;">
            <table class="grid-dict">
              <tr><th><b>Type</b></th><th><b>Profile</b></th><th><b>MS</b></th><th><b>Code Filter</b></th></tr>
              
                <tr>
                  <th>Patient</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Patient</th>
                  <th/>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Condition</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Condition</th>
                  <th>;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      <span style="padding-left: 4px;">
                          <b>value set: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.392</span>
                      </span>
                      
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>DiagnosticReport</th>
                  <th>http://hl7.org/fhir/StructureDefinition/DiagnosticReport</th>
                  <th>;;;</th>
                  <th>
                    
                  </th>
                </tr>
              
                <tr>
                  <th>DiagnosticReport</th>
                  <th>http://hl7.org/fhir/StructureDefinition/DiagnosticReport</th>
                  <th>;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>66110-8</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Breast Pathology biopsy report</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
                <tr>
                  <th>Observation</th>
                  <th>http://hl7.org/fhir/StructureDefinition/Observation</th>
                  <th>;;;;</th>
                  <th>
                    
                      <b>code filter: </b>
                      
                      <br/>
                      
                      
                      <span style="padding-left: 4px;">
                          <b>path: </b><span>code</span>
                      </span>
                      
                      <br/>
                      
                      
                      
                      
                          
                          <p style="margin-bottom: 5px;">
                              <b>system: </b> <span><a href="https://loinc.org/">http://loinc.org</a></span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>code: </b> <span>66110-8</span>
                          </p>
                          
                          
                          <p style="margin-bottom: 5px;">
                              <b>display: </b> <span>Breast Pathology biopsy report</span>
                          </p>
                          
                      
                    
                  </th>
                </tr>
              
            </table>
          </td>
        </tr>
        

        
        
        <tr>
          <td colspan="2">
            <table>
              <tr><th><a id="cql-content"><b>Content: </b></a> text/cql</th></tr>
              <tr><td><pre><code class="language-cql">/*  
  Author: CMS Alliance to Modernize Healthcare, operated by THE MITRE Corporation.

  (C) 2024 The MITRE Corporation. All Rights Reserved. 
  Approved for Public Release: 24-2711. 
  Distribution Unlimited.

  Unless otherwise noted, this work is available under an Apache 2.0 license. 
  It was produced by the MITRE Corporation for the Division of Cancer Prevention 
  and Control, Centers for Disease Control and Prevention in accordance with the 
  Statement of Work, contract number 75FCMC18D0047, task order number 75D30123F17931.
*/

library HighRiskExclusions version '1.0.0'

using FHIR version '4.0.1'
include FHIRHelpers  version '4.0.1' called FHIRHelpers

include HighRiskExclusionsEvents version '1.0.0' called Events
include HighRiskExclusionsActions version '1.0.0' called Actions
include DataElements version '1.0.0' called DataElements
include BCSMCommonFunctions version '1.0.0' called BCSMCommon

context Patient

//------------------------------------------------------------------------------
// RECOMMENDATIONS
//------------------------------------------------------------------------------

define &quot;flow-HighRiskExclusions&quot;:
  {    
    ACSGeneticRiskMammo,
    ACSGeneticRiskMri,
    SpecialtyReferralGeneticRisk,
    ACSMammoAfterRT,
    ACSMriAfterRT,
    ACSMammoAfterBrca,
    SpecialtyReferralBreastCaWithin5y,
    ACSMammoAtypicalBiopsy,
    ACSAtypicalBiopsy,
    ACSMriAtypicalBiopsyHighRisk
  }   
  except { null }

define SpecialtyReferralGeneticRisk:
  if Events.&quot;eve-geneticrisk&quot; is true
  then if Events.&quot;eve-acsgeneticrisk&quot; is false
    then Actions.&quot;act-othergeneticrisk&quot; else null
  else null    

define ACSGeneticRiskMammo:
  if Events.&quot;eve-geneticrisk&quot; is true
    then if Events.&quot;eve-acsgeneticrisk&quot; is true
      then Actions.&quot;act-acsgeneticriskmammo&quot; else null
    else null    

define ACSGeneticRiskMri:
  if Events.&quot;eve-geneticrisk&quot; is true
    then if Events.&quot;eve-acsgeneticrisk&quot; is true
      then Actions.&quot;act-acsgeneticriskmri&quot; else null
    else null       

define ACSMammoAfterRT:
  if Events.&quot;eve-chestxrt&quot; is true
    then Actions.&quot;act-acsmammoafterRT&quot; else null    

define ACSMriAfterRT:
  if Events.&quot;eve-chestxrt&quot; is true
    then Actions.&quot;act-acsmriafterRT&quot; else null    

define ACSMammoAfterBrca:
  if Events.&quot;eve-hxbreastca&quot; is true
    then if Events.&quot;eve-hxbreastcawithin5y&quot; is false
      then Actions.&quot;act-acsmammoafterbrca&quot; else null
    else null       

define SpecialtyReferralBreastCaWithin5y:
  if Events.&quot;eve-hxbreastca&quot; is true
    then if Events.&quot;eve-hxbreastcawithin5y&quot; is true
      then Actions.&quot;act-hxbreastcawithin5y&quot; else null
    else null  

define ACSMammoAtypicalBiopsy:
  if Events.&quot;eve-geneticrisk&quot; is false and Events.&quot;eve-chestxrt&quot; is false and Events.&quot;eve-hxbreastca&quot; is false
    then if &quot;eve-atypicalbx&quot; is true
      then Actions.&quot;act-acsmammoatypicalbx&quot; else null
    else null       

define ACSAtypicalBiopsy:
  if Events.&quot;eve-geneticrisk&quot; is false and Events.&quot;eve-chestxrt&quot; is false and Events.&quot;eve-hxbreastca&quot; is false
    then if &quot;eve-atypicalbx&quot; is true and Events.&quot;eve-highlifetimerisk&quot; is false and Events.&quot;eve-nolifetimerisk&quot; is true
      then Actions.&quot;act-acsatypicalbx&quot; else null
    else null       

define ACSMriAtypicalBiopsyHighRisk:
  if Events.&quot;eve-geneticrisk&quot; is false and Events.&quot;eve-chestxrt&quot; is false and Events.&quot;eve-hxbreastca&quot; is false
    then if &quot;eve-atypicalbx&quot; is true and Events.&quot;eve-highlifetimerisk&quot; is true
      then Actions.&quot;act-acsmriatypicalbx&quot; else null
    else null       

//------------------------------------------------------------------------------
// ERRORS
//------------------------------------------------------------------------------     

define &quot;eve-atypicalbx&quot;:  
  Message(Events.&quot;eve-atypicalbx&quot;, 
    DataElements.BiopsyDiagnosticReportsWithNoConclusionCodes,
    'http://example.org/CodeSystem/plan-definition-action-reason-code-system/missingresultcode',
    'Warning', 
    'A laboratory test was found without a result. Please review patient record to resolve.')      

//------------------------------------------------------------------------------
// DYNAMIC VALUES
//------------------------------------------------------------------------------   

define ExistsSpecialtyReferralGeneticRisk:  
  SpecialtyReferralGeneticRisk is not null

define SpecialtyReferralGeneticRiskCode:
  SpecialtyReferralGeneticRisk R return R.code  

define SpecialtyReferralGeneticRiskReason:
  SpecialtyReferralGeneticRisk R return R.reason

define ExistsACSGeneticRiskMammo:
  ACSGeneticRiskMammo is not null

define ACSGeneticRiskMammoCode:    
  ACSGeneticRiskMammo R return R.code

define ACSGeneticRiskMammoReason:
  ACSGeneticRiskMammo R return R.reason  

define ACSGeneticRiskMammoTiming:    
  ACSGeneticRiskMammo R return R.timingTiming

define ACSGeneticRiskMammoTimingEvent:    
  ACSGeneticRiskMammoTiming R return First(R.event)

define ACSGeneticRiskMammoFlag:
  ACSGeneticRiskMammo R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)    

define ExistsACSGeneticRiskMri:
  ACSGeneticRiskMri is not null

define ACSGeneticRiskMriCode:    
  ACSGeneticRiskMri R return R.code

define ACSGeneticRiskMriReason:  
  ACSGeneticRiskMri R return R.reason  

define ACSGeneticRiskMriTiming:    
  ACSGeneticRiskMri R return R.timingTiming

define ACSGeneticRiskMriTimingEvent:    
  ACSGeneticRiskMriTiming R return First(R.event)

define ACSGeneticRiskMriFlag:
  ACSGeneticRiskMri R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)      

define ExistsACSMammoAfterRT:
  ACSMammoAfterRT is not null

define ACSMammoAfterRTCode:    
  ACSMammoAfterRT R return R.code

define ACSMammoAfterRTReason:  
  ACSMammoAfterRT R return R.reason

define ACSMammoAfterRTTiming:    
  ACSMammoAfterRT R return R.timingTiming

define ACSMammoAfterRTTimingEvent:    
  ACSMammoAfterRTTiming R return First(R.event)

define ACSMammoAfterRTFlag:
  ACSMammoAfterRT R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)      

define ExistsACSMriAfterRT:
  ACSMriAfterRT is not null

define ACSMriAfterRTCode:    
  ACSMriAfterRT R return R.code

define ACSMriAfterRTReason:    
  ACSMriAfterRT R return R.reason  

define ACSMriAfterRTTiming:    
  ACSMriAfterRT R return R.timingTiming

define ACSMriAfterRTTimingEvent:    
  ACSMriAfterRTTiming R return First(R.event)  

define ACSMriAfterRTFlag:
  ACSMriAfterRT R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)      

define ExistsACSMammoAfterBrca:
  ACSMammoAfterBrca is not null

define ACSMammoAfterBrcaCode:    
  ACSMammoAfterBrca R return R.code

define ACSMammoAfterBrcaReason:    
  ACSMammoAfterBrca R return R.reason  

define ACSMammoAfterBrcaTiming:    
  ACSMammoAfterBrca R return R.timingTiming

define ACSMammoAfterBrcaTimingEvent:    
  ACSMammoAfterBrcaTiming R return First(R.event)

define ACSMammoAfterBrcaFlag:
  ACSMammoAfterBrca R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)      

define ExistsSpecialtyReferralBreastCaWithin5y:  
  SpecialtyReferralBreastCaWithin5y is not null

define SpecialtyReferralBreastCaWithin5yCode:
  SpecialtyReferralBreastCaWithin5y R return R.code    

define SpecialtyReferralBreastCaWithin5yReason:
  SpecialtyReferralBreastCaWithin5y R return R.reason

define ExistsACSMammoAtypicalBiopsy:
  ACSMammoAtypicalBiopsy is not null

define ACSMammoAtypicalBiopsyCode:    
  ACSMammoAtypicalBiopsy R return R.code

define ACSMammoAtypicalBiopsyReason:    
  ACSMammoAtypicalBiopsy R return R.reason  

define ACSMammoAtypicalBiopsyTiming:    
  ACSMammoAtypicalBiopsy R return R.timingTiming

define ACSMammoAtypicalBiopsyTimingEvent:    
  ACSMammoAtypicalBiopsyTiming R return First(R.event)  

define ACSMammoAtypicalBiopsyFlag:
  ACSMammoAtypicalBiopsy R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)   

define ExistsACSAtypicalBiopsy:
  ACSAtypicalBiopsy is not null

define ACSAtypicalBiopsyCode:    
  ACSAtypicalBiopsy R return R.code

define ACSAtypicalBiopsyReason:    
  ACSAtypicalBiopsy R return R.reason

define ExistsACSMriAtypicalBiopsyHighRisk:
  ACSMriAtypicalBiopsyHighRisk is not null

define ACSMriAtypicalBiopsyHighRiskCode:    
  ACSMriAtypicalBiopsyHighRisk R return R.code

define ACSMriAtypicalBiopsyHighRiskReason:    
  ACSMriAtypicalBiopsyHighRisk R return R.reason  

define ACSMriAtypicalBiopsyHighRiskTiming:    
  ACSMriAtypicalBiopsyHighRisk R return R.timingTiming

define ACSMriAtypicalBiopsyHighRiskTimingEvent:    
  ACSMriAtypicalBiopsyHighRiskTiming R return First(R.event) 

define ACSMriAtypicalBiopsyHighRiskFlag:
  ACSMriAtypicalBiopsyHighRisk R return BCSMCommon.CreateRecommendationFlagExtension(R.flag)      </code></pre></td></tr>
            </table>
          </td>
        </tr>
        
        
        
        
        
        <tr>
          <td colspan="2">
            <table>
              <tr><th><b>Content: </b> application/elm+xml</th></tr>
              <tr><td><pre><code>Encoded data (246408 characters)</code></pre></td></tr>
            </table>
          </td>
        </tr>
        
        
        
        
        <tr>
          <td colspan="2">
            <table>
              <tr><th><b>Content: </b> application/elm+json</th></tr>
              <tr><td><pre><code>Encoded data (452124 characters)</code></pre></td></tr>
            </table>
          </td>
        </tr>
        
        
    </table>
</div>
</div>

  <!-- insert notes if present -->
  



  

</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2025+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.mitre.org/">MITRE</a>.  Package cancerscreeningcds.fhir.us.bcsm-cds#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Feb 28, 2025 23:17+0000">2025-02-28</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

