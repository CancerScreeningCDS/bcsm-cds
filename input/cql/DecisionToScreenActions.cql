library DecisionToScreenActions version '1.0.0'

using FHIR version '4.0.1'

include FHIRHelpers  version '4.0.1' called FHIRHelpers
include BCSMCommonFunctions version '1.0.0'

codesystem "ActCode": 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/plan-definition-action-code-system'
codesystem "LOCAL": 'http://cancerscreeningcds.github.io/bcsm-cds/CodeSystem/screening-observation-code-system'

// Act Codes
code "Screening Next Due": 'screeningnextdue' from "ActCode" display 'Screening Next Due'
code "Discuss decision to continue screening": 'sdmcontinue' from "ActCode" display 'Shared decision making to continue screening'
code "Discuss delay in screening": 'sdmdelay' from "ActCode" display 'Shared decision making to consider delay in screening'
// Reason Codes
code "Age over 74 years": 'ageover74' from "LOCAL" display 'Age over 74 years'
code "Reduced life expectancy indicator": 'lifeexp' from "LOCAL" display 'Reduced life expectancy indicator'
code "Currently lactating": 'currentlylactating' from "LOCAL" display 'Currently lactating'
code "USPSTF average risk": 'USPSTFaveragerisk' from "LOCAL" display 'USPSTF average risk'

context Patient

define "act-sdmcontinueage":
  {
		code: "Discuss decision to continue screening",
    reason: "Age over 74 years",
    documentation: BCSMCommonFunctions.SourceDocumentationUSPSTF
	}  

define "act-sdmcontinuelifexp":
  {
		code: "Discuss decision to continue screening",
    reason: "Reduced life expectancy indicator",
    documentation: BCSMCommonFunctions.SourceDocumentationACS
	} 

define "act-lactating":
  {
		code: "Discuss delay in screening",
    reason: "Currently lactating",
    documentation: BCSMCommonFunctions.SourceDocumentationOther
	} 

